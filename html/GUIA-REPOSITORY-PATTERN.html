
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Repository Pattern e Spring Data JPA - Guia Completo - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üìä Repository Pattern e Spring Data JPA - Guia Completo</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:21:31 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1>üìä Repository Pattern e Spring Data JPA - Guia Completo</h1>
<p><strong>Finalidade:</strong> Guia fundamental sobre Repository Pattern e Spring Data JPA<br><strong>Foco:</strong> Conceitos, implementa√ß√£o e boas pr√°ticas<br><strong>Tecnologia:</strong> Spring Data JPA, Repository Pattern, Query Methods</p>
<h2>üîó Links R√°pidos para Documenta√ß√£o Oficial</h2>
<table>
<thead>
<tr>
<th><strong>Recurso</strong></th>
<th><strong>Link</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td>üìñ <strong>Spring Data JPA</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Reference Guide</a></td>
<td>Documenta√ß√£o completa oficial</td>
</tr>
<tr>
<td>üîß <strong>Repository Interface</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts">Core Concepts</a></td>
<td>Conceitos fundamentais</td>
</tr>
<tr>
<td>üéØ <strong>Query Methods</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods">Query Creation</a></td>
<td>Cria√ß√£o de consultas</td>
</tr>
<tr>
<td>üìä <strong>JPA Repository</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.repositories">JPA Repositories</a></td>
<td>Reposit√≥rios JPA espec√≠ficos</td>
</tr>
<tr>
<td>üöÄ <strong>Custom Implementations</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations">Custom Repository</a></td>
<td>Implementa√ß√µes customizadas</td>
</tr>
</tbody></table>
<p>üí° <strong>Mais links detalhados dispon√≠veis na <a href="#-documenta%C3%A7%C3%A3o-oficial-e-refer%C3%AAncias">se√ß√£o de documenta√ß√£o oficial</a> no final deste guia.</strong></p>
<hr>
<h2>üéØ O que √© Repository Pattern?</h2>
<h3><strong>üèóÔ∏è Conceito Fundamental</strong></h3>
<p>O <strong>Repository Pattern</strong> √© um padr√£o de design que encapsula a l√≥gica necess√°ria para acessar fontes de dados. Ele centraliza funcionalidades comuns de acesso a dados, proporcionando melhor manutenibilidade e desacoplamento da infraestrutura ou tecnologia usada para acessar bancos de dados.</p>
<h3><strong>üí° Analogia Pr√°tica:</strong></h3>
<p>Imagine o Repository como um <strong>&quot;bibliotec√°rio digital&quot;</strong>:</p>
<ul>
<li>üìö <strong>Voc√™ pede</strong> um livro (entidade) pelo t√≠tulo (ID)</li>
<li>üîç <strong>Ele busca</strong> na estante (banco de dados)</li>
<li>üìñ <strong>Retorna</strong> o livro (objeto) para voc√™</li>
<li>üìù <strong>Organiza</strong> novos livros (save) na estante</li>
<li>üóëÔ∏è <strong>Remove</strong> livros antigos (delete) quando necess√°rio</li>
</ul>
<h3><strong><span class="badge success">‚úÖ</span> Benef√≠cios do Repository Pattern:</strong></h3>
<ul>
<li><strong>üîÑ Abstra√ß√£o</strong> - Esconde detalhes de acesso aos dados</li>
<li><strong>üß™ Testabilidade</strong> - F√°cil mock para testes unit√°rios</li>
<li><strong>üîÑ Reutiliza√ß√£o</strong> - Centraliza opera√ß√µes comuns</li>
<li><strong>üìä Consist√™ncia</strong> - Padroniza acesso aos dados</li>
<li><strong>üõ°Ô∏è Manutenibilidade</strong> - Mudan√ßas isoladas em um local</li>
</ul>
<hr>
<h2>üöÄ Spring Data JPA - O Poder da Automa√ß√£o</h2>
<h3><strong>üéØ O que √© Spring Data JPA?</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#preface">Spring Data JPA Introduction</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#getting-started">Getting Started</a></p>
</blockquote>
<p>Spring Data JPA √© um framework que <strong>automatiza</strong> a implementa√ß√£o do Repository Pattern, gerando automaticamente implementa√ß√µes baseadas em conven√ß√µes de nomenclatura.</p>
<h3><strong>üî• Funcionalidades Principais:</strong></h3>
<h4><strong>1. ü§ñ Implementa√ß√£o Autom√°tica</strong></h4>
<pre><code class="language-java">// Voc√™ define apenas a interface
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    // Spring Data JPA implementa automaticamente!
}

// Spring gera automaticamente:
// - save(doador)
// - findById(id)
// - findAll()
// - delete(doador)
// - count()
// - existsById(id)
// E muito mais!
</code></pre>
<h4><strong>2. üìù Query Methods por Conven√ß√£o</strong></h4>
<pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    
    // Spring entende e gera SQL automaticamente!
    List&lt;Doador&gt; findByFullName(String fullName);
    List&lt;Doador&gt; findByEmailContaining(String email);
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    List&lt;Doador&gt; findByIdadeBetween(Integer minIdade, Integer maxIdade);
    List&lt;Doador&gt; findByAtivoTrue();
    
    // Equivale a: SELECT d FROM Doador d WHERE d.fullName = ?1
    // Equivale a: SELECT d FROM Doador d WHERE d.email LIKE %?1%
    // E assim por diante...
}
</code></pre>
<h4><strong>3. üìä Pagina√ß√£o e Ordena√ß√£o Nativas</strong></h4>
<pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    
    // Pagina√ß√£o autom√°tica
    Page&lt;Doador&gt; findByEstado(String estado, Pageable pageable);
    
    // Slice para performance
    Slice&lt;Doador&gt; findByCidade(String cidade, Pageable pageable);
    
    // Lista ordenada
    List&lt;Doador&gt; findByAtivoTrueOrderByFullNameAsc();
}
</code></pre>
<hr>
<h2>üìã Hierarquia de Interfaces Repository</h2>
<h3><strong>üèóÔ∏è Estrutura Completa</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/commons/docs/current/reference/html/#repositories.core-concepts">Repository Hierarchy</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.repositories">Interface Overview</a></p>
</blockquote>
<pre><code class="language-java">// 1. üîß Repository (Base) - Marker interface
Repository&lt;T, ID&gt;

// 2. üìö CrudRepository - CRUD b√°sico
CrudRepository&lt;T, ID&gt; extends Repository&lt;T, ID&gt;

// 3. üìÑ PagingAndSortingRepository - Adiciona pagina√ß√£o
PagingAndSortingRepository&lt;T, ID&gt; extends CrudRepository&lt;T, ID&gt;

// 4. üöÄ JpaRepository - Funcionalidades JPA espec√≠ficas
JpaRepository&lt;T, ID&gt; extends PagingAndSortingRepository&lt;T, ID&gt;
</code></pre>
<h3><strong>üéØ Quando Usar Cada Interface:</strong></h3>
<h4><strong>1. <code>Repository&lt;T, ID&gt;</code> - Interface Marker</strong></h4>
<pre><code class="language-java">// Quando voc√™ quer controle total
public interface DoadorRepository extends Repository&lt;Doador, Long&gt; {
    // Define apenas os m√©todos que precisa
    Optional&lt;Doador&gt; findById(Long id);
    Doador save(Doador doador);
    // N√£o herda nenhum m√©todo autom√°tico
}
</code></pre>
<h4><strong>2. <code>CrudRepository&lt;T, ID&gt;</code> - CRUD B√°sico</strong></h4>
<pre><code class="language-java">public interface DoadorRepository extends CrudRepository&lt;Doador, Long&gt; {
    // Herda automaticamente:
    // save(S entity)
    // saveAll(Iterable&lt;S&gt; entities)
    // findById(ID id)
    // existsById(ID id)
    // findAll()
    // findAllById(Iterable&lt;ID&gt; ids)
    // count()
    // deleteById(ID id)
    // delete(T entity)
    // deleteAll()
}
</code></pre>
<h4><strong>3. <code>PagingAndSortingRepository&lt;T, ID&gt;</code> - Com Pagina√ß√£o</strong></h4>
<pre><code class="language-java">public interface DoadorRepository extends PagingAndSortingRepository&lt;Doador, Long&gt; {
    // Herda tudo do CrudRepository +
    // findAll(Sort sort)
    // findAll(Pageable pageable)
}
</code></pre>
<h4><strong>4. <code>JpaRepository&lt;T, ID&gt;</code> - Completo (RECOMENDADO)</strong></h4>
<pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    // Herda tudo dos anteriores +
    // flush()
    // saveAndFlush(S entity)
    // deleteInBatch(Iterable&lt;T&gt; entities)
    // deleteAllInBatch()
    // getReferenceById(ID id)
    // findAll(Example&lt;S&gt; example)
    // findAll(Example&lt;S&gt; example, Pageable pageable)
}
</code></pre>
<hr>
<h2>üîß Implementa√ß√£o Pr√°tica - Projeto DoeSangue</h2>
<h3><strong>üìã Passo 1: Definir a Interface Repository</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.definition">Defining Repository Interfaces</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-creation">Repository Methods</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.repository;

import com.faculdade.doesangue_api.entities.Doador;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.time.LocalDate;
import java.util.List;
import java.util.Optional;

@Repository
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // üîç QUERY METHODS - Spring gera SQL automaticamente
    
    /**
     * Busca doador por CPF
     * SQL gerado: SELECT d FROM Doador d WHERE d.cpf = ?1
     */
    Optional&lt;Doador&gt; findByCpf(String cpf);
    
    /**
     * Busca doadores por nome (parcial, case-insensitive)
     * SQL gerado: SELECT d FROM Doador d WHERE LOWER(d.fullName) LIKE LOWER(?1)
     */
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    
    /**
     * Busca doadores por email
     * SQL gerado: SELECT d FROM Doador d WHERE d.email = ?1
     */
    Optional&lt;Doador&gt; findByEmail(String email);
    
    /**
     * Busca doadores ativos por cidade
     * SQL gerado: SELECT d FROM Doador d WHERE d.cidade = ?1 AND d.deletedAt IS NULL
     */
    List&lt;Doador&gt; findByCidadeAndDeletedAtIsNull(String cidade);
    
    /**
     * Busca doadores por estado com pagina√ß√£o
     */
    Page&lt;Doador&gt; findByEstadoAndDeletedAtIsNull(String estado, Pageable pageable);
    
    /**
     * Busca doadores habituais ativos
     */
    List&lt;Doador&gt; findByDoadorHabitudeTrueAndDeletedAtIsNull();
    
    /**
     * Busca doadores por faixa de idade
     */
    List&lt;Doador&gt; findByIdadeBetweenAndDeletedAtIsNull(Integer minIdade, Integer maxIdade);
    
    /**
     * Busca doadores que podem doar (baseado na √∫ltima doa√ß√£o)
     */
    List&lt;Doador&gt; findByUltimaDoacaoBeforeOrUltimaDoacaoIsNull(LocalDate dataLimite);
    
    // üìù CUSTOM QUERIES - Quando precisar de controle maior
    
    /**
     * Busca doadores com JOIN customizado
     */
    @Query(&quot;SELECT d FROM Doador d &quot; +
           &quot;JOIN d.tipoSanguineo ts &quot; +
           &quot;WHERE ts.tipoAbo = :tipoAbo &quot; +
           &quot;AND ts.fatorRh = :fatorRh &quot; +
           &quot;AND d.deletedAt IS NULL&quot;)
    List&lt;Doador&gt; findByTipoSanguineo(
        @Param(&quot;tipoAbo&quot;) String tipoAbo, 
        @Param(&quot;fatorRh&quot;) String fatorRh
    );
    
    /**
     * Estat√≠sticas de doadores por cidade
     */
    @Query(&quot;SELECT d.cidade, COUNT(d) &quot; +
           &quot;FROM Doador d &quot; +
           &quot;WHERE d.deletedAt IS NULL &quot; +
           &quot;GROUP BY d.cidade &quot; +
           &quot;ORDER BY COUNT(d) DESC&quot;)
    List&lt;Object[]&gt; countDoadoresPorCidade();
    
    /**
     * Busca doadores aptos para doar urgente
     */
    @Query(&quot;SELECT d FROM Doador d &quot; +
           &quot;WHERE d.deletedAt IS NULL &quot; +
           &quot;AND d.doadorHabitudel = true &quot; +
           &quot;AND (d.ultimaDoacao IS NULL OR d.ultimaDoacao &lt;= :dataLimite) &quot; +
           &quot;AND d.idade BETWEEN 18 AND 65 &quot; +
           &quot;ORDER BY d.ultimaDoacao ASC NULLS FIRST&quot;)
    List&lt;Doador&gt; findDoadoresAptosParaDoarUrgente(@Param(&quot;dataLimite&quot;) LocalDate dataLimite);
    
    // üî¢ QUERIES DE CONTAGEM
    
    /**
     * Conta doadores ativos por estado
     */
    long countByEstadoAndDeletedAtIsNull(String estado);
    
    /**
     * Verifica se existe doador com CPF
     */
    boolean existsByCpfAndDeletedAtIsNull(String cpf);
    
    /**
     * Verifica se existe doador com email
     */
    boolean existsByEmailAndDeletedAtIsNull(String email);
    
    // üóëÔ∏è SOFT DELETE QUERIES
    
    /**
     * Busca apenas doadores ativos (n√£o deletados)
     */
    List&lt;Doador&gt; findByDeletedAtIsNull();
    
    /**
     * Busca doadores deletados (para auditoria)
     */
    List&lt;Doador&gt; findByDeletedAtIsNotNull();
}
</code></pre>
<h3><strong>üìã Passo 2: Usar no Service</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-stereotypes">Service Layer</a> | <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction">Transaction Management</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.service;

import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.repository.DoadorRepository;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.LocalDate;
import java.util.List;
import java.util.Optional;

@Service
@Transactional(readOnly = true) // Otimiza√ß√£o para opera√ß√µes de leitura
public class DoadorService {

    private final DoadorRepository doadorRepository;

    public DoadorService(DoadorRepository doadorRepository) {
        this.doadorRepository = doadorRepository;
    }

    // üìã OPERA√á√ïES B√ÅSICAS
    
    public List&lt;Doador&gt; listarTodos() {
        return doadorRepository.findByDeletedAtIsNull();
    }
    
    public Page&lt;Doador&gt; listarComPaginacao(Pageable pageable) {
        return doadorRepository.findAll(pageable);
    }
    
    public Optional&lt;Doador&gt; buscarPorId(Long id) {
        return doadorRepository.findById(id)
            .filter(doador -&gt; doador.getDeletedAt() == null);
    }
    
    public Optional&lt;Doador&gt; buscarPorCpf(String cpf) {
        return doadorRepository.findByCpf(cpf);
    }
    
    public Optional&lt;Doador&gt; buscarPorEmail(String email) {
        return doadorRepository.findByEmail(email);
    }
    
    // üîç OPERA√á√ïES DE BUSCA
    
    public List&lt;Doador&gt; buscarPorNome(String nome) {
        return doadorRepository.findByFullNameContainingIgnoreCase(nome);
    }
    
    public List&lt;Doador&gt; buscarPorCidade(String cidade) {
        return doadorRepository.findByCidadeAndDeletedAtIsNull(cidade);
    }
    
    public Page&lt;Doador&gt; buscarPorEstado(String estado, Pageable pageable) {
        return doadorRepository.findByEstadoAndDeletedAtIsNull(estado, pageable);
    }
    
    public List&lt;Doador&gt; buscarDoadoresHabituais() {
        return doadorRepository.findByDoadorHabitudeTrueAndDeletedAtIsNull();
    }
    
    public List&lt;Doador&gt; buscarPorFaixaIdade(Integer minIdade, Integer maxIdade) {
        return doadorRepository.findByIdadeBetweenAndDeletedAtIsNull(minIdade, maxIdade);
    }
    
    // ü©∏ OPERA√á√ïES ESPEC√çFICAS DO DOM√çNIO
    
    public List&lt;Doador&gt; buscarDoadoresAptos() {
        // Doadores que podem doar (√∫ltim doa√ß√£o &gt; 60 dias ou nunca doaram)
        LocalDate dataLimite = LocalDate.now().minusDays(60);
        return doadorRepository.findByUltimaDoacaoBeforeOrUltimaDoacaoIsNull(dataLimite);
    }
    
    public List&lt;Doador&gt; buscarPorTipoSanguineo(String tipoAbo, String fatorRh) {
        return doadorRepository.findByTipoSanguineo(tipoAbo, fatorRh);
    }
    
    public List&lt;Doador&gt; buscarDoadoresUrgente() {
        LocalDate dataLimite = LocalDate.now().minusDays(60);
        return doadorRepository.findDoadoresAptosParaDoarUrgente(dataLimite);
    }
    
    // üíæ OPERA√á√ïES DE PERSIST√äNCIA
    
    @Transactional // Remove readOnly para opera√ß√µes de escrita
    public Doador salvar(Doador doador) {
        return doadorRepository.save(doador);
    }
    
    @Transactional
    public Doador atualizar(Doador doador) {
        return doadorRepository.save(doador);
    }
    
    @Transactional
    public void deletar(Long id) {
        doadorRepository.findById(id)
            .ifPresent(doador -&gt; {
                doador.setDeletedAt(LocalDateTime.now());
                doadorRepository.save(doador); // Soft delete
            });
    }
    
    // üìä OPERA√á√ïES DE ESTAT√çSTICA
    
    public long contarPorEstado(String estado) {
        return doadorRepository.countByEstadoAndDeletedAtIsNull(estado);
    }
    
    public boolean existePorCpf(String cpf) {
        return doadorRepository.existsByCpfAndDeletedAtIsNull(cpf);
    }
    
    public boolean existePorEmail(String email) {
        return doadorRepository.existsByEmailAndDeletedAtIsNull(email);
    }
    
    public List&lt;Object[]&gt; obterEstatisticasPorCidade() {
        return doadorRepository.countDoadoresPorCidade();
    }
}
</code></pre>
<h3><strong>üìã Passo 3: Usar no Controller</strong></h3>
<pre><code class="language-java">package com.faculdade.doesangue_api.controller;

import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.service.DoadorService;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping(&quot;/api/doadores&quot;)
public class DoadorController {

    private final DoadorService doadorService;

    public DoadorController(DoadorService doadorService) {
        this.doadorService = doadorService;
    }

    @GetMapping
    public ResponseEntity&lt;Page&lt;Doador&gt;&gt; listar(Pageable pageable) {
        Page&lt;Doador&gt; doadores = doadorService.listarComPaginacao(pageable);
        return ResponseEntity.ok(doadores);
    }

    @GetMapping(&quot;/{id}&quot;)
    public ResponseEntity&lt;Doador&gt; buscarPorId(@PathVariable Long id) {
        return doadorService.buscarPorId(id)
            .map(ResponseEntity::ok)
            .orElse(ResponseEntity.notFound().build());
    }

    @GetMapping(&quot;/cpf/{cpf}&quot;)
    public ResponseEntity&lt;Doador&gt; buscarPorCpf(@PathVariable String cpf) {
        return doadorService.buscarPorCpf(cpf)
            .map(ResponseEntity::ok)
            .orElse(ResponseEntity.notFound().build());
    }

    @GetMapping(&quot;/buscar&quot;)
    public ResponseEntity&lt;List&lt;Doador&gt;&gt; buscarPorNome(@RequestParam String nome) {
        List&lt;Doador&gt; doadores = doadorService.buscarPorNome(nome);
        return ResponseEntity.ok(doadores);
    }
    
    // Outros endpoints...
}
</code></pre>
<hr>
<h2>üîç Query Methods - Conven√ß√µes de Nomenclatura</h2>
<h3><strong>üìö Keywords Principais</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords">Supported Keywords</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-creation">Query Creation Examples</a></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>Keyword</strong></th>
<th><strong>Exemplo</strong></th>
<th><strong>SQL Gerado</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>findBy</code></td>
<td><code>findByName(String name)</code></td>
<td><code>WHERE name = ?1</code></td>
</tr>
<tr>
<td><code>findByAnd</code></td>
<td><code>findByNameAndEmail(String name, String email)</code></td>
<td><code>WHERE name = ?1 AND email = ?2</code></td>
</tr>
<tr>
<td><code>findByOr</code></td>
<td><code>findByNameOrEmail(String name, String email)</code></td>
<td><code>WHERE name = ?1 OR email = ?2</code></td>
</tr>
<tr>
<td><code>findByContaining</code></td>
<td><code>findByNameContaining(String name)</code></td>
<td><code>WHERE name LIKE %?1%</code></td>
</tr>
<tr>
<td><code>findByStartingWith</code></td>
<td><code>findByNameStartingWith(String prefix)</code></td>
<td><code>WHERE name LIKE ?1%</code></td>
</tr>
<tr>
<td><code>findByEndingWith</code></td>
<td><code>findByNameEndingWith(String suffix)</code></td>
<td><code>WHERE name LIKE %?1</code></td>
</tr>
<tr>
<td><code>findByIgnoreCase</code></td>
<td><code>findByNameIgnoreCase(String name)</code></td>
<td><code>WHERE UPPER(name) = UPPER(?1)</code></td>
</tr>
<tr>
<td><code>findByBetween</code></td>
<td><code>findByAgeBetween(int start, int end)</code></td>
<td><code>WHERE age BETWEEN ?1 AND ?2</code></td>
</tr>
<tr>
<td><code>findByLessThan</code></td>
<td><code>findByAgeLessThan(int age)</code></td>
<td><code>WHERE age &lt; ?1</code></td>
</tr>
<tr>
<td><code>findByGreaterThan</code></td>
<td><code>findByAgeGreaterThan(int age)</code></td>
<td><code>WHERE age &gt; ?1</code></td>
</tr>
<tr>
<td><code>findByIsNull</code></td>
<td><code>findByEmailIsNull()</code></td>
<td><code>WHERE email IS NULL</code></td>
</tr>
<tr>
<td><code>findByIsNotNull</code></td>
<td><code>findByEmailIsNotNull()</code></td>
<td><code>WHERE email IS NOT NULL</code></td>
</tr>
<tr>
<td><code>findByTrue</code></td>
<td><code>findByActiveTrue()</code></td>
<td><code>WHERE active = true</code></td>
</tr>
<tr>
<td><code>findByFalse</code></td>
<td><code>findByActiveFalse()</code></td>
<td><code>WHERE active = false</code></td>
</tr>
<tr>
<td><code>findByOrderBy</code></td>
<td><code>findByAgeOrderByNameAsc(int age)</code></td>
<td><code>WHERE age = ?1 ORDER BY name ASC</code></td>
</tr>
</tbody></table>
<h3><strong>üéØ Exemplos Pr√°ticos para DoeSangue:</strong></h3>
<pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // Busca simples
    List&lt;Doador&gt; findByFullName(String fullName);
    
    // Busca com LIKE (cont√©m)
    List&lt;Doador&gt; findByFullNameContaining(String nome);
    
    // Busca case-insensitive
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    
    // Busca com m√∫ltiplos campos
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    
    // Busca com OR
    List&lt;Doador&gt; findByEmailOrTelefonePrincipal(String email, String telefone);
    
    // Busca por range
    List&lt;Doador&gt; findByIdadeBetween(Integer minIdade, Integer maxIdade);
    
    // Busca com condi√ß√µes nulas
    List&lt;Doador&gt; findByDeletedAtIsNull();
    List&lt;Doador&gt; findByUltimaDoacaoIsNotNull();
    
    // Busca com boolean
    List&lt;Doador&gt; findByDoadorHabitudereTrue();
    List&lt;Doador&gt; findByAtivoFalse();
    
    // Busca com ordena√ß√£o
    List&lt;Doador&gt; findByEstadoOrderByFullNameAsc(String estado);
    List&lt;Doador&gt; findByCidadeOrderByIdadeDescFullNameAsc(String cidade);
    
    // Busca com LIKE e wildcards
    List&lt;Doador&gt; findByEmailStartingWith(String prefixo); // email LIKE &#39;prefix%&#39;
    List&lt;Doador&gt; findByFullNameEndingWith(String sufixo); // nome LIKE &#39;%sufixo&#39;
    
    // Busca por data
    List&lt;Doador&gt; findByDataNascimentoBefore(LocalDate data);
    List&lt;Doador&gt; findByCreatedAtAfter(LocalDateTime data);
    
    // Contadores
    long countByCidade(String cidade);
    long countByEstadoAndAtivoTrue(String estado);
    
    // Verifica√ß√£o de exist√™ncia
    boolean existsByCpf(String cpf);
    boolean existsByEmailAndDeletedAtIsNull(String email);
    
    // Primeira ocorr√™ncia
    Optional&lt;Doador&gt; findFirstByOrderByCreatedAtDesc();
    Optional&lt;Doador&gt; findTopByEstadoOrderByIdadeAsc(String estado);
}
</code></pre>
<hr>
<h2>üß™ Testes com Repository</h2>
<h3><strong>üîß Teste Unit√°rio com @DataJpaTest</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/testing.html#testing.spring-boot-applications.testing-autoconfigured-jpa">Testing Data Layer</a> | <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html">@DataJpaTest</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.repository;

import com.faculdade.doesangue_api.entities.Doador;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageRequest;

import java.time.LocalDate;
import java.util.List;
import java.util.Optional;

import static org.assertj.core.api.Assertions.assertThat;

@DataJpaTest
class DoadorRepositoryTest {

    @Autowired
    private TestEntityManager entityManager;

    @Autowired
    private DoadorRepository doadorRepository;

    @Test
    void deveBuscarDoadorPorCpf() {
        // Given
        Doador doador = new Doador();
        doador.setCpf(&quot;12345678901&quot;);
        doador.setFullName(&quot;Jo√£o Silva&quot;);
        doador.setEmail(&quot;joao@email.com&quot;);
        entityManager.persistAndFlush(doador);

        // When
        Optional&lt;Doador&gt; resultado = doadorRepository.findByCpf(&quot;12345678901&quot;);

        // Then
        assertThat(resultado).isPresent();
        assertThat(resultado.get().getFullName()).isEqualTo(&quot;Jo√£o Silva&quot;);
    }

    @Test
    void deveBuscarDoadoresPorNomeContendo() {
        // Given
        Doador doador1 = criarDoador(&quot;Jo√£o Silva&quot;, &quot;joao@email.com&quot;);
        Doador doador2 = criarDoador(&quot;Maria Jo√£o&quot;, &quot;maria@email.com&quot;);
        Doador doador3 = criarDoador(&quot;Pedro Santos&quot;, &quot;pedro@email.com&quot;);
        
        entityManager.persistAndFlush(doador1);
        entityManager.persistAndFlush(doador2);
        entityManager.persistAndFlush(doador3);

        // When
        List&lt;Doador&gt; resultado = doadorRepository.findByFullNameContainingIgnoreCase(&quot;jo√£o&quot;);

        // Then
        assertThat(resultado).hasSize(2);
        assertThat(resultado).extracting(Doador::getFullName)
            .containsExactlyInAnyOrder(&quot;Jo√£o Silva&quot;, &quot;Maria Jo√£o&quot;);
    }

    @Test
    void deveRetornarPaginacaoCorretamente() {
        // Given
        for (int i = 1; i &lt;= 25; i++) {
            Doador doador = criarDoador(&quot;Doador &quot; + i, &quot;doador&quot; + i + &quot;@email.com&quot;);
            entityManager.persist(doador);
        }
        entityManager.flush();

        // When
        Page&lt;Doador&gt; primeiraPagina = doadorRepository.findAll(PageRequest.of(0, 10));
        Page&lt;Doador&gt; segundaPagina = doadorRepository.findAll(PageRequest.of(1, 10));

        // Then
        assertThat(primeiraPagina.getContent()).hasSize(10);
        assertThat(primeiraPagina.getTotalElements()).isEqualTo(25);
        assertThat(primeiraPagina.getTotalPages()).isEqualTo(3);
        assertThat(segundaPagina.getContent()).hasSize(10);
    }

    @Test
    void deveContarDoadoresPorEstado() {
        // Given
        entityManager.persist(criarDoadorComEstado(&quot;Doador 1&quot;, &quot;SP&quot;));
        entityManager.persist(criarDoadorComEstado(&quot;Doador 2&quot;, &quot;SP&quot;));
        entityManager.persist(criarDoadorComEstado(&quot;Doador 3&quot;, &quot;RJ&quot;));
        entityManager.flush();

        // When
        long countSP = doadorRepository.countByEstadoAndDeletedAtIsNull(&quot;SP&quot;);
        long countRJ = doadorRepository.countByEstadoAndDeletedAtIsNull(&quot;RJ&quot;);

        // Then
        assertThat(countSP).isEqualTo(2);
        assertThat(countRJ).isEqualTo(1);
    }

    @Test
    void deveVerificarExistenciaPorEmail() {
        // Given
        Doador doador = criarDoador(&quot;Jo√£o Silva&quot;, &quot;joao@email.com&quot;);
        entityManager.persistAndFlush(doador);

        // When/Then
        assertThat(doadorRepository.existsByEmailAndDeletedAtIsNull(&quot;joao@email.com&quot;)).isTrue();
        assertThat(doadorRepository.existsByEmailAndDeletedAtIsNull(&quot;inexistente@email.com&quot;)).isFalse();
    }

    // M√©todos auxiliares
    private Doador criarDoador(String nome, String email) {
        Doador doador = new Doador();
        doador.setFullName(nome);
        doador.setEmail(email);
        doador.setCpf(&quot;12345678901&quot;);
        doador.setDataNascimento(LocalDate.of(1990, 1, 1));
        return doador;
    }

    private Doador criarDoadorComEstado(String nome, String estado) {
        Doador doador = criarDoador(nome, nome.toLowerCase().replace(&quot; &quot;, &quot;&quot;) + &quot;@email.com&quot;);
        doador.setEstado(estado);
        return doador;
    }
}
</code></pre>
<hr>
<h2>üí° Boas Pr√°ticas e Dicas Avan√ßadas</h2>
<h3><strong><span class="badge success">‚úÖ</span> Conven√ß√µes de Nomenclatura</strong></h3>
<pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Nomes descritivos e claros
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    Optional&lt;Doador&gt; findByEmailAndDeletedAtIsNull(String email);
    Page&lt;Doador&gt; findByEstadoOrderByCreatedAtDesc(String estado, Pageable pageable);

    // &lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; BAD: Nomes amb√≠guos ou confusos
    List&lt;Doador&gt; findByName(String nome); // Qual nome? Full? First? Last?
    List&lt;Doador&gt; find(String value); // Busca por qual campo?
    List&lt;Doador&gt; getStuff(); // Muito gen√©rico
}
</code></pre>
<h3><strong><span class="badge success">‚úÖ</span> Performance e Otimiza√ß√£o</strong></h3>
<pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use Slice quando n√£o precisar do total de elementos
    Slice&lt;Doador&gt; findByEstado(String estado, Pageable pageable);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use Stream para processamento de grandes volumes
    @Query(&quot;SELECT d FROM Doador d WHERE d.ativo = true&quot;)
    Stream&lt;Doador&gt; streamAllActiveDoadores();

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use proje√ß√µes para buscar apenas campos necess√°rios
    @Query(&quot;SELECT d.id, d.fullName, d.email FROM Doador d WHERE d.estado = :estado&quot;)
    List&lt;Object[]&gt; findBasicInfoByEstado(@Param(&quot;estado&quot;) String estado);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use EXISTS para verifica√ß√µes de exist√™ncia (mais eficiente)
    @Query(&quot;SELECT CASE WHEN COUNT(d) &gt; 0 THEN true ELSE false END FROM Doador d WHERE d.cpf = :cpf&quot;)
    boolean existsByCpfCustom(@Param(&quot;cpf&quot;) String cpf);
}
</code></pre>
<h3><strong><span class="badge success">‚úÖ</span> Tratamento de Null e Optional</strong></h3>
<pre><code class="language-java">@Service
public class DoadorService {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Use Optional para retornos que podem ser nulos
    public Optional&lt;Doador&gt; buscarPorId(Long id) {
        return doadorRepository.findById(id);
    }

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Trate par√¢metros nulos adequadamente
    public List&lt;Doador&gt; buscarPorNome(String nome) {
        if (nome == null || nome.trim().isEmpty()) {
            return List.of(); // Retorna lista vazia em vez de null
        }
        return doadorRepository.findByFullNameContainingIgnoreCase(nome.trim());
    }

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Use orElse para valores padr√£o
    public Doador buscarOuCriarDefault(Long id) {
        return doadorRepository.findById(id)
            .orElse(new Doador()); // Retorna inst√¢ncia padr√£o
    }
}
</code></pre>
<hr>
<h2>üìä √çndices de Banco de Dados - Performance e Otimiza√ß√£o</h2>
<h3><strong>üéØ O que s√£o √çndices?</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-indexes.html">MySQL Indexes</a> | <a href="https://www.postgresql.org/docs/current/indexes.html">PostgreSQL Indexes</a> | <a href="https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/index">JPA Index Annotation</a></p>
</blockquote>
<p><strong>√çndices</strong> s√£o estruturas de dados especiais que melhoram a velocidade de opera√ß√µes de consulta em uma tabela de banco de dados. Funcionam como um <strong>&quot;√≠ndice de livro&quot;</strong> - permitem localizar dados rapidamente sem varrer toda a tabela.</p>
<h3><strong>üèóÔ∏è Analogia Pr√°tica:</strong></h3>
<p>Imagine uma <strong>biblioteca com 10.000 livros</strong>:</p>
<ul>
<li><strong>üìö Sem √≠ndice</strong> - Voc√™ precisa verificar livro por livro para encontrar &quot;Dom Casmurro&quot;</li>
<li><strong>üìá Com √≠ndice</strong> - Voc√™ consulta o cat√°logo por t√≠tulo e vai direto √† estante correta</li>
</ul>
<h3><strong>üöÄ Por que Usar √çndices?</strong></h3>
<h4><strong>1. üîç Performance de Consultas</strong></h4>
<pre><code class="language-sql">-- SEM √çNDICE: Busca sequencial em 1 milh√£o de registros
SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;
-- Tempo: ~500ms (varre toda a tabela)

-- COM √çNDICE: Busca logar√≠tmica
CREATE INDEX idx_doador_cpf ON doador(cpf);
SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;
-- Tempo: ~2ms (acesso direto)
</code></pre>
<h4><strong>2. üìà Escalabilidade</strong></h4>
<pre><code class="language-java">// Repository que se beneficia de √≠ndices
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    
    // Busca por CPF - DEVE ter √≠ndice √∫nico
    Optional&lt;Doador&gt; findByCpf(String cpf);
    
    // Busca por email - DEVE ter √≠ndice √∫nico  
    Optional&lt;Doador&gt; findByEmail(String email);
    
    // Filtros combinados - DEVE ter √≠ndice composto
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    
    // Ordena√ß√£o - DEVE ter √≠ndice para performance
    List&lt;Doador&gt; findByAtivoTrueOrderByCreatedAtDesc();
}
</code></pre>
<h4><strong>3. üéØ Integridade Referencial</strong></h4>
<pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;)
public class Doador {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // √çndice autom√°tico (PRIMARY KEY)
    
    @Column(unique = true) // Cria √≠ndice √∫nico automaticamente
    private String cpf;
    
    @Column(unique = true) // Cria √≠ndice √∫nico automaticamente
    private String email;
}
</code></pre>
<h3><strong><span class="badge success">‚úÖ</span> Principais Benef√≠cios dos √çndices</strong></h3>
<table>
<thead>
<tr>
<th><strong>Benef√≠cio</strong></th>
<th><strong>Descri√ß√£o</strong></th>
<th><strong>Impacto</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>‚ö° Velocidade</strong></td>
<td>Consultas at√© 1000x mais r√°pidas</td>
<td>Reduz tempo de resposta drasticamente</td>
</tr>
<tr>
<td><strong>üìà Escalabilidade</strong></td>
<td>Performance mantida com milh√µes de registros</td>
<td>Sistema cresce sem degrada√ß√£o</td>
</tr>
<tr>
<td><strong>üîí Unicidade</strong></td>
<td>Garante valores √∫nicos (CPF, email)</td>
<td>Integridade de dados autom√°tica</td>
</tr>
<tr>
<td><strong>üîç Busca Eficiente</strong></td>
<td>Localiza√ß√£o logar√≠tmica vs linear</td>
<td>O(log n) vs O(n)</td>
</tr>
<tr>
<td><strong>üìä Ordena√ß√£o R√°pida</strong></td>
<td>ORDER BY otimizado</td>
<td>Resultados ordenados sem overhead</td>
</tr>
<tr>
<td><strong>üîó JOINs Eficientes</strong></td>
<td>Relacionamentos mais r√°pidos</td>
<td>Consultas complexas otimizadas</td>
</tr>
</tbody></table>
<h3><strong>üéØ Tipos de √çndices e Quando Usar</strong></h3>
<h4><strong>1. üîë Primary Key Index (Autom√°tico)</strong></h4>
<pre><code class="language-java">@Entity
public class Doador {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // MySQL cria CLUSTERED INDEX automaticamente
}
</code></pre>
<h4><strong>2. üîê Unique Index (Constraints)</strong></h4>
<pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    @Index(name = &quot;idx_doador_cpf&quot;, columnList = &quot;cpf&quot;, unique = true),
    @Index(name = &quot;idx_doador_email&quot;, columnList = &quot;email&quot;, unique = true)
})
public class Doador {
    
    @Column(unique = true, length = 11)
    private String cpf; // √çndice √∫nico para consultas r√°pidas
    
    @Column(unique = true, length = 100)
    private String email; // √çndice √∫nico para login/valida√ß√£o
}
</code></pre>
<h4><strong>3. üìä Single Column Index</strong></h4>
<pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    @Index(name = &quot;idx_doador_cidade&quot;, columnList = &quot;cidade&quot;),
    @Index(name = &quot;idx_doador_estado&quot;, columnList = &quot;estado&quot;),
    @Index(name = &quot;idx_doador_ativo&quot;, columnList = &quot;ativo&quot;),
    @Index(name = &quot;idx_doador_created_at&quot;, columnList = &quot;createdAt&quot;)
})
public class Doador {
    
    private String cidade; // Para filtros por localiza√ß√£o
    private String estado; // Para relat√≥rios estaduais
    private Boolean ativo; // Para filtros de status
    private LocalDateTime createdAt; // Para ordena√ß√£o temporal
}
</code></pre>
<h4><strong>4. üéØ Composite Index (M√∫ltiplas Colunas)</strong></h4>
<pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    // √çndice composto para filtros combinados
    @Index(name = &quot;idx_doador_cidade_estado&quot;, columnList = &quot;cidade, estado&quot;),
    
    // √çndice para soft delete + filtros
    @Index(name = &quot;idx_doador_ativo_cidade&quot;, columnList = &quot;ativo, cidade&quot;),
    
    // √çndice para busca com ordena√ß√£o
    @Index(name = &quot;idx_doador_estado_created&quot;, columnList = &quot;estado, createdAt&quot;)
})
public class Doador {
    // A ordem das colunas no √≠ndice √© IMPORTANTE!
    // cidade, estado != estado, cidade
}
</code></pre>
<h4><strong>5. üîç Functional Index (Casos Especiais)</strong></h4>
<pre><code class="language-sql">-- Para busca case-insensitive em nomes
CREATE INDEX idx_doador_nome_lower ON doador(LOWER(full_name));

-- Para busca por prefixo de telefone
CREATE INDEX idx_doador_ddd ON doador(LEFT(telefone_principal, 2));
</code></pre>
<h3><strong>üîß Implementa√ß√£o Pr√°tica com JPA</strong></h3>
<h4><strong>üìã Exemplo Completo - Entidade Doador Otimizada</strong></h4>
<pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    // üîê √çndices √∫nicos para integridade
    @Index(name = &quot;idx_doador_cpf&quot;, columnList = &quot;cpf&quot;, unique = true),
    @Index(name = &quot;idx_doador_email&quot;, columnList = &quot;email&quot;, unique = true),
    
    // üîç √çndices para consultas frequentes
    @Index(name = &quot;idx_doador_cidade&quot;, columnList = &quot;cidade&quot;),
    @Index(name = &quot;idx_doador_estado&quot;, columnList = &quot;estado&quot;),
    @Index(name = &quot;idx_doador_tipo_sanguineo&quot;, columnList = &quot;tipoSanguineoId&quot;),
    
    // üéØ √çndices compostos para filtros combinados
    @Index(name = &quot;idx_doador_cidade_estado&quot;, columnList = &quot;cidade, estado&quot;),
    @Index(name = &quot;idx_doador_ativo_cidade&quot;, columnList = &quot;ativo, cidade&quot;),
    
    // ‚è∞ √çndices para ordena√ß√£o e data
    @Index(name = &quot;idx_doador_created_at&quot;, columnList = &quot;createdAt&quot;),
    @Index(name = &quot;idx_doador_ultima_doacao&quot;, columnList = &quot;ultimaDoacao&quot;),
    
    // üóëÔ∏è Soft delete otimizado
    @Index(name = &quot;idx_doador_deleted_at&quot;, columnList = &quot;deletedAt&quot;),
    @Index(name = &quot;idx_doador_ativo_deleted&quot;, columnList = &quot;ativo, deletedAt&quot;)
})
public class Doador {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // PRIMARY KEY (√≠ndice autom√°tico)

    @Column(unique = true, length = 11, nullable = false)
    private String cpf; // √çndice √∫nico

    @Column(unique = true, length = 100, nullable = false)  
    private String email; // √çndice √∫nico

    @Column(length = 100, nullable = false)
    private String fullName; // Pode precisar de √≠ndice para busca

    @Column(length = 50)
    private String cidade; // √çndice simples

    @Column(length = 2)
    private String estado; // √çndice simples

    @Column(nullable = false)
    private Boolean ativo = true; // √çndice para filtros

    @Column(name = &quot;created_at&quot;, nullable = false)
    private LocalDateTime createdAt; // √çndice para ordena√ß√£o

    @Column(name = &quot;deleted_at&quot;)
    private LocalDateTime deletedAt; // Soft delete

    @Column(name = &quot;ultima_doacao&quot;)
    private LocalDate ultimaDoacao; // √çndice para regras de neg√≥cio

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;tipo_sanguineo_id&quot;)
    private TipoSanguineo tipoSanguineo; // Foreign key (√≠ndice autom√°tico)
}
</code></pre>
<h4><strong>üìä Repository Otimizado com √çndices</strong></h4>
<pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_cpf (√∫nico)
    Optional&lt;Doador&gt; findByCpf(String cpf);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_email (√∫nico)  
    Optional&lt;Doador&gt; findByEmail(String email);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_cidade_estado (composto)
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_ativo_deleted
    List&lt;Doador&gt; findByAtivoTrueAndDeletedAtIsNull();

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_created_at para ORDER BY
    List&lt;Doador&gt; findByEstadoOrderByCreatedAtDesc(String estado);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_ultima_doacao
    List&lt;Doador&gt; findByUltimaDoacaoBeforeAndAtivoTrue(LocalDate data);

    // &lt;span class=&quot;badge warning&quot;&gt;‚ö†Ô∏è&lt;/span&gt; CUIDADO: busca por nome pode ser lenta sem √≠ndice
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    // Solu√ß√£o: Considere √≠ndice FULLTEXT ou busca externa (Elasticsearch)
}
</code></pre>
<h3><strong>üìà An√°lise de Performance</strong></h3>
<h4><strong>üîç Como Verificar se √çndices Est√£o Sendo Usados</strong></h4>
<p><strong>MySQL:</strong></p>
<pre><code class="language-sql">-- Verificar plano de execu√ß√£o
EXPLAIN SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;

-- Analisar √≠ndices da tabela
SHOW INDEXES FROM doador;

-- Estat√≠sticas de uso dos √≠ndices
SELECT * FROM information_schema.STATISTICS WHERE table_name = &#39;doador&#39;;
</code></pre>
<p><strong>PostgreSQL:</strong></p>
<pre><code class="language-sql">-- Verificar plano de execu√ß√£o
EXPLAIN ANALYZE SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;

-- Listar √≠ndices
\d+ doador

-- Verificar uso dos √≠ndices
SELECT * FROM pg_stat_user_indexes WHERE relname = &#39;doador&#39;;
</code></pre>
<h4><strong>üìä M√©tricas de Performance</strong></h4>
<table>
<thead>
<tr>
<th><strong>Cen√°rio</strong></th>
<th><strong>Sem √çndice</strong></th>
<th><strong>Com √çndice</strong></th>
<th><strong>Melhoria</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Busca por CPF (1M registros)</td>
<td>500ms</td>
<td>2ms</td>
<td><strong>250x mais r√°pido</strong></td>
</tr>
<tr>
<td>Login por email</td>
<td>300ms</td>
<td>1ms</td>
<td><strong>300x mais r√°pido</strong></td>
</tr>
<tr>
<td>Filtro cidade + estado</td>
<td>800ms</td>
<td>5ms</td>
<td><strong>160x mais r√°pido</strong></td>
</tr>
<tr>
<td>Ordena√ß√£o por data</td>
<td>1200ms</td>
<td>10ms</td>
<td><strong>120x mais r√°pido</strong></td>
</tr>
<tr>
<td>COUNT(*) com WHERE</td>
<td>600ms</td>
<td>3ms</td>
<td><strong>200x mais r√°pido</strong></td>
</tr>
</tbody></table>
<h3><strong><span class="badge warning">‚ö†Ô∏è</span> Cuidados e Trade-offs</strong></h3>
<h4><strong><span class="badge danger">‚ùå</span> Problemas com Muitos √çndices</strong></h4>
<pre><code class="language-java">// &lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; RUIM: √çndices demais
@Table(indexes = {
    @Index(columnList = &quot;campo1&quot;),
    @Index(columnList = &quot;campo2&quot;), 
    @Index(columnList = &quot;campo3&quot;),
    @Index(columnList = &quot;campo4&quot;),
    @Index(columnList = &quot;campo5&quot;),
    @Index(columnList = &quot;campo1, campo2&quot;),
    @Index(columnList = &quot;campo1, campo3&quot;),
    // ... 20+ √≠ndices
})

// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; BOM: √çndices estrat√©gicos
@Table(indexes = {
    @Index(columnList = &quot;cpf&quot;, unique = true),           // Busca √∫nica
    @Index(columnList = &quot;cidade, estado&quot;),               // Filtro comum
    @Index(columnList = &quot;ativo, deletedAt&quot;),            // Soft delete
    @Index(columnList = &quot;createdAt&quot;)                     // Ordena√ß√£o
})
</code></pre>
<h4><strong>üìä Impacto em Opera√ß√µes de Escrita</strong></h4>
<pre><code class="language-java">@Service
public class DoadorService {

    // &lt;span class=&quot;badge warning&quot;&gt;‚ö†Ô∏è&lt;/span&gt; CUIDADO: INSERT/UPDATE ficam mais lentos com muitos √≠ndices
    @Transactional
    public Doador salvar(Doador doador) {
        // MySQL precisa atualizar TODOS os √≠ndices na inser√ß√£o
        return doadorRepository.save(doador);
    }

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; SOLU√á√ÉO: Batch inserts para grandes volumes
    @Transactional
    public List&lt;Doador&gt; salvarLote(List&lt;Doador&gt; doadores) {
        return doadorRepository.saveAll(doadores); // Mais eficiente
    }
}
</code></pre>
<h3><strong>üõ†Ô∏è Estrat√©gias de Indexa√ß√£o</strong></h3>
<h4><strong>1. üéØ √çndices Baseados em Query Patterns</strong></h4>
<pre><code class="language-java">// Analise suas consultas mais frequentes:
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // üî• CONSULTA FREQUENTE: Login/Autentica√ß√£o
    Optional&lt;Doador&gt; findByEmail(String email);
    // √çNDICE NECESS√ÅRIO: email (√∫nico)

    // üî• CONSULTA FREQUENTE: Busca por documento
    Optional&lt;Doador&gt; findByCpf(String cpf);
    // √çNDICE NECESS√ÅRIO: cpf (√∫nico)

    // üî• CONSULTA FREQUENTE: Relat√≥rios por regi√£o
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    // √çNDICE NECESS√ÅRIO: (cidade, estado) composto

    // üîç CONSULTA RARA: Busca por nome
    List&lt;Doador&gt; findByFullNameLike(String nome);
    // √çNDICE OPCIONAL: considere busca externa (Elasticsearch)
}
</code></pre>
<h4><strong>2. üìä Monitoramento de Performance</strong></h4>
<pre><code class="language-java">// Configura√ß√£o de logging para queries lentas
# application.properties
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Logging de queries lentas (&gt; 1 segundo)
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# MySQL: log de queries lentas
slow_query_log=1
long_query_time=1
</code></pre>
<h4><strong>3. üîß Ferramentas de An√°lise</strong></h4>
<pre><code class="language-java">// Bean para monitorar performance
@Component
public class DatabasePerformanceMonitor {

    @EventListener
    public void handleQueryExecution(QueryExecutionEvent event) {
        if (event.getDuration() &gt; 1000) { // &gt; 1 segundo
            log.warn(&quot;Slow query detected: {} ms - {}&quot;, 
                event.getDuration(), event.getSql());
        }
    }
}
</code></pre>
<hr>
<h2>üåü Recursos Avan√ßados</h2>
<h3><strong>üîß Custom Repository Implementation</strong></h3>
<blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations">Custom Repository Implementations</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#specifications">Criteria API</a></p>
</blockquote>
<pre><code class="language-java">// Interface customizada
public interface DoadorRepositoryCustom {
    List&lt;Doador&gt; findWithComplexCriteria(String nome, String cidade, Integer minIdade);
    Page&lt;DoadorStatisticsDTO&gt; findStatisticsGroupedByCity(Pageable pageable);
}

// Implementa√ß√£o customizada
@Repository
public class DoadorRepositoryImpl implements DoadorRepositoryCustom {

    @PersistenceContext
    private EntityManager entityManager;

    @Override
    public List&lt;Doador&gt; findWithComplexCriteria(String nome, String cidade, Integer minIdade) {
        CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery&lt;Doador&gt; query = cb.createQuery(Doador.class);
        Root&lt;Doador&gt; root = query.from(Doador.class);

        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();

        if (nome != null &amp;&amp; !nome.trim().isEmpty()) {
            predicates.add(
                cb.like(cb.lower(root.get(&quot;fullName&quot;)), &quot;%&quot; + nome.toLowerCase() + &quot;%&quot;)
            );
        }

        if (cidade != null &amp;&amp; !cidade.trim().isEmpty()) {
            predicates.add(cb.equal(root.get(&quot;cidade&quot;), cidade));
        }

        if (minIdade != null) {
            predicates.add(cb.greaterThanOrEqualTo(root.get(&quot;idade&quot;), minIdade));
        }

        query.where(predicates.toArray(new Predicate[0]));
        query.orderBy(cb.asc(root.get(&quot;fullName&quot;)));

        return entityManager.createQuery(query).getResultList();
    }
}

// Repository principal herda da customizada
public interface DoadorRepository extends 
    JpaRepository&lt;Doador, Long&gt;, 
    DoadorRepositoryCustom {
    // M√©todos padr√£o + m√©todos customizados
}
</code></pre>
<h3><strong>üìä Proje√ß√µes e DTOs</strong></h3>
<pre><code class="language-java">// Interface de proje√ß√£o
public interface DoadorProjection {
    String getFullName();
    String getEmail();
    String getCidade();
    Integer getIdade();
}

// DTO de proje√ß√£o
public class DoadorSummaryDTO {
    private String nome;
    private String cidade;
    private String estado;
    
    // Construtores, getters, setters
}

// Uso no Repository
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // Proje√ß√£o com interface
    List&lt;DoadorProjection&gt; findProjectedByEstado(String estado);

    // Proje√ß√£o com DTO e construtor
    @Query(&quot;SELECT new com.faculdade.doesangue_api.dto.DoadorSummaryDTO(d.fullName, d.cidade, d.estado) &quot; +
           &quot;FROM Doador d WHERE d.ativo = true&quot;)
    List&lt;DoadorSummaryDTO&gt; findSummaryOfActiveDoadores();
}
</code></pre>
<hr>
<h2>üìö Documenta√ß√£o Oficial e Refer√™ncias</h2>
<h3><strong>üåü Spring Data JPA - Documenta√ß√£o Principal</strong></h3>
<h4><strong>üìñ Core Documentation:</strong></h4>
<ul>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Spring Data JPA Reference</a></strong> - Documenta√ß√£o completa oficial</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts">Repository Interfaces</a></strong> - Conceitos fundamentais</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods">Query Methods</a></strong> - Cria√ß√£o de consultas</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations">Custom Implementations</a></strong> - Implementa√ß√µes customizadas</li>
</ul>
<h4><strong>üìñ Query Creation:</strong></h4>
<ul>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords">Supported Keywords</a></strong> - Palavras-chave para queries</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-creation">Query Creation Examples</a></strong> - Exemplos pr√°ticos</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.named-queries">Named Queries</a></strong> - Queries nomeadas</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query">@Query Annotation</a></strong> - Queries customizadas</li>
</ul>
<h3><strong>üîß JPA e Hibernate - Core</strong></h3>
<h4><strong>üìñ JPA Specification:</strong></h4>
<ul>
<li><strong><a href="https://jakarta.ee/specifications/persistence/3.1/">Jakarta Persistence API</a></strong> - Especifica√ß√£o oficial JPA 3.1</li>
<li><strong><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-intro003.htm">Entity Relationships</a></strong> - Relacionamentos entre entidades</li>
<li><strong><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-querylanguage.htm">JPQL Guide</a></strong> - Java Persistence Query Language</li>
</ul>
<h4><strong>üìñ Hibernate Documentation:</strong></h4>
<ul>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html">Hibernate ORM User Guide</a></strong> - Guia completo</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#hql">HQL Reference</a></strong> - Hibernate Query Language</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#criteria">Criteria API</a></strong> - API de crit√©rios</li>
</ul>
<h3><strong>üöÄ Spring Framework - Base</strong></h3>
<h4><strong>üìñ Spring Framework Core:</strong></h4>
<ul>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/">Spring Framework Reference</a></strong> - Documenta√ß√£o completa</li>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#orm-jpa">Data Access with JPA</a></strong> - Integra√ß√£o JPA</li>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction">Transaction Management</a></strong> - Gerenciamento de transa√ß√µes</li>
</ul>
<h4><strong>üìñ Spring Boot:</strong></h4>
<ul>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.jpa-and-spring-data">Spring Boot Data JPA</a></strong> - Configura√ß√£o autom√°tica</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.data">Application Properties</a></strong> - Propriedades de configura√ß√£o</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/testing.html#testing.spring-boot-applications.testing-autoconfigured-jpa">Testing Data Layer</a></strong> - Testes com @DataJpaTest</li>
</ul>
<h3><strong>üìä Testing e Quality</strong></h3>
<h4><strong>üìñ Testing Frameworks:</strong></h4>
<ul>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html">@DataJpaTest</a></strong> - Testes de reposit√≥rio</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/TestEntityManager.html">TestEntityManager</a></strong> - Gerenciamento de entidades em testes</li>
<li><strong><a href="https://assertj.github.io/doc/">AssertJ</a></strong> - Assertions fluentes</li>
<li><strong><a href="https://www.testcontainers.org/modules/databases/">TestContainers</a></strong> - Testes com containers</li>
</ul>
<h3><strong>üìä Database Indexes e Performance</strong></h3>
<h4><strong>üìñ Database-Specific Documentation:</strong></h4>
<ul>
<li><strong><a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-indexes.html">MySQL Indexes Guide</a></strong> - Guia completo de √≠ndices MySQL</li>
<li><strong><a href="https://dev.mysql.com/doc/refman/8.0/en/optimization-indexes.html">MySQL Index Optimization</a></strong> - Otimiza√ß√£o de √≠ndices</li>
<li><strong><a href="https://www.postgresql.org/docs/current/indexes.html">PostgreSQL Indexes</a></strong> - Documenta√ß√£o oficial PostgreSQL</li>
<li><strong><a href="https://www.postgresql.org/docs/current/indexes-types.html">PostgreSQL Index Types</a></strong> - Tipos de √≠ndices dispon√≠veis</li>
<li><strong><a href="http://h2database.com/html/performance.html#indexes">H2 Database Indexes</a></strong> - √çndices em H2 (testes)</li>
</ul>
<h4><strong>üìñ JPA Index Annotations:</strong></h4>
<ul>
<li><strong><a href="https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/index">JPA Index Annotation</a></strong> - Especifica√ß√£o oficial @Index</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#schema-generation-database-objects">Hibernate Index Strategies</a></strong> - Estrat√©gias de cria√ß√£o de √≠ndices</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.datasource.initialization">Spring Boot Database Initialization</a></strong> - Inicializa√ß√£o de esquemas</li>
</ul>
<h4><strong>üìñ Performance e Monitoring:</strong></h4>
<ul>
<li><strong><a href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html">MySQL Performance Schema</a></strong> - Monitoramento de performance</li>
<li><strong><a href="https://www.postgresql.org/docs/current/using-explain.html">PostgreSQL Query Performance</a></strong> - EXPLAIN e an√°lise de queries</li>
<li><strong><a href="https://vladmihalcea.com/jpa-hibernate-performance-tuning/">JPA Performance Tuning</a></strong> - Blog Vlad Mihalcea sobre performance</li>
<li><strong><a href="https://use-the-index-luke.com/">Database Index Design</a></strong> - Guia completo sobre design de √≠ndices</li>
</ul>
<h4><strong>üìñ Tools e Profiling:</strong></h4>
<ul>
<li><strong><a href="https://dev.mysql.com/doc/workbench/en/wb-performance.html">MySQL Workbench</a></strong> - Ferramentas de performance</li>
<li><strong><a href="https://www.pgadmin.org/docs/pgadmin4/latest/query_tool.html">pgAdmin Query Tool</a></strong> - An√°lise de queries PostgreSQL</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.metrics">Spring Boot Actuator</a></strong> - M√©tricas de aplica√ß√£o</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#statistics">Hibernate Statistics</a></strong> - Estat√≠sticas do Hibernate</li>
</ul>
<h3><strong>üéØ Performance e Optimization</strong></h3>
<h4><strong>üìñ Performance Guides:</strong></h4>
<ul>
<li><strong><a href="https://vladmihalcea.com/jpa-hibernate-performance-tuning/">JPA Performance Best Practices</a></strong> - Blog Vlad Mihalcea</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#fetching-strategies">N+1 Query Problem</a></strong> - Estrat√©gias de fetch</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.datasource.connection-pool">Connection Pooling</a></strong> - Pool de conex√µes</li>
</ul>
<h3><strong>üéì Tutorials e Examples</strong></h3>
<h4><strong>üìñ Official Guides:</strong></h4>
<ul>
<li><strong><a href="https://spring.io/guides/gs/accessing-data-jpa/">Accessing Data with JPA</a></strong> - Tutorial b√°sico oficial</li>
<li><strong><a href="https://github.com/spring-projects/spring-data-examples/tree/main/jpa">Spring Data JPA Examples</a></strong> - Exemplos oficiais no GitHub</li>
</ul>
<h4><strong>üìñ Community Resources:</strong></h4>
<ul>
<li><strong><a href="https://www.baeldung.com/persistence-with-spring-series">Baeldung JPA Tutorials</a></strong> - S√©rie completa sobre persist√™ncia</li>
<li><strong><a href="https://thorben-janssen.com/">Thorben Janssen&#39;s JPA Tips</a></strong> - Blog especializado em JPA/Hibernate</li>
<li><strong><a href="https://www.petrikainulainen.net/spring-data-jpa-tutorial/">Spring Data JPA Query Methods</a></strong> - Tutorial detalhado</li>
</ul>
<h3><strong>‚ö° Quick References</strong></h3>
<h4><strong>üîñ Cheat Sheets:</strong></h4>
<ul>
<li><strong><a href="https://www.baeldung.com/jpa-annotations">JPA Annotations Reference</a></strong> - Anota√ß√µes JPA essenciais</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords">Spring Data Query Keywords</a></strong> - Keywords para query methods</li>
<li><strong><a href="https://docs.oracle.com/html/E13946_04/ejb3_langref.html">JPQL Syntax Reference</a></strong> - Sintaxe JPQL</li>
</ul>
<hr>
<h2>üéØ Conclus√£o</h2>
<p>O <strong>Repository Pattern</strong> com <strong>Spring Data JPA</strong> oferece uma abordagem poderosa e elegante para acesso a dados:</p>
<h3><strong><span class="badge success">‚úÖ</span> Benef√≠cios Principais:</strong></h3>
<ul>
<li><strong>ü§ñ Automa√ß√£o</strong> - Spring gera implementa√ß√µes automaticamente</li>
<li><strong>üìù Conven√ß√µes</strong> - Query methods por nomenclatura</li>
<li><strong>üîÑ Flexibilidade</strong> - Custom queries quando necess√°rio</li>
<li><strong>üß™ Testabilidade</strong> - F√°cil mock e teste unit√°rio</li>
<li><strong>üìä Performance</strong> - Otimiza√ß√µes autom√°ticas e manuais</li>
<li><strong>üõ°Ô∏è Manutenibilidade</strong> - C√≥digo limpo e organizado</li>
</ul>
<h3><strong>üöÄ Pr√≥ximos Passos:</strong></h3>
<ol>
<li><strong>Implementar</strong> repository b√°sico para suas entidades</li>
<li><strong>Explorar</strong> query methods por conven√ß√£o</li>
<li><strong>Adicionar</strong> queries customizadas conforme necess√°rio</li>
<li><strong>Testar</strong> com @DataJpaTest</li>
<li><strong>Evoluir</strong> para Specifications para filtros complexos</li>
</ol>
<hr>
<p><em>Este guia fornece uma base s√≥lida para compreender e implementar o Repository Pattern com Spring Data JPA no projeto DoeSangue.</em></p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>
