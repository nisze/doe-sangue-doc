
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèóÔ∏è Arquitetura do Sistema DoeSangue - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üèóÔ∏è Arquitetura do Sistema DoeSangue</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="../index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-arquitetura-do-sistema-doesangue">üèóÔ∏è Arquitetura do Sistema DoeSangue</h1><p><strong>Vers√£o:</strong> v1.0<br><strong>Data:</strong> 27 de Agosto de 2025  </p>
<h2 id="-viso-geral">üìã Vis√£o Geral</h2><p>Sistema de gest√£o completa para doa√ß√£o de sangue baseado em arquitetura em camadas, seguindo rigorosamente o schema de banco de dados MVP fornecido.</p>
<h2 id="-objetivos-arquiteturais">üéØ Objetivos Arquiteturais</h2><h3 id="princpios-de-design">Princ√≠pios de Design</h3><ul>
<li><strong>Holistic System Thinking</strong> - Cada componente integrado ao sistema maior</li>
<li><strong>User Experience Drives Architecture</strong> - Jornadas de usu√°rio orientam decis√µes</li>
<li><strong>Pragmatic Technology Selection</strong> - Spring Boot + JPA para rapidez e confiabilidade</li>
<li><strong>Progressive Complexity</strong> - Inicia simples, escala conforme necess√°rio</li>
<li><strong>Security at Every Layer</strong> - Defesa em profundidade</li>
<li><strong>Data-Centric Design</strong> - Modelo de dados orienta arquitetura</li>
</ul>
<h2 id="-arquitetura-de-alto-nvel">üè¢ Arquitetura de Alto N√≠vel</h2><h3 id="stack-tecnolgico">Stack Tecnol√≥gico</h3><pre><code>Frontend (Futuro)
‚îú‚îÄ‚îÄ React/Angular/Vue.js
‚îú‚îÄ‚îÄ REST API Integration
‚îî‚îÄ‚îÄ Material-UI/Bootstrap

Backend (Atual)
‚îú‚îÄ‚îÄ Spring Boot 3.x
‚îú‚îÄ‚îÄ Spring Security 6.x
‚îú‚îÄ‚îÄ Spring Data JPA
‚îú‚îÄ‚îÄ Hibernate ORM
‚îî‚îÄ‚îÄ Maven

Database
‚îú‚îÄ‚îÄ SQL Server (Produ√ß√£o)
‚îú‚îÄ‚îÄ H2 (Desenvolvimento)
‚îî‚îÄ‚îÄ Connection Pool (HikariCP)

Infrastructure
‚îú‚îÄ‚îÄ Docker containerization
‚îú‚îÄ‚îÄ Azure/AWS deployment
‚îî‚îÄ‚îÄ CI/CD pipelines
</code></pre>
<h2 id="-modelo-de-domnio">üìä Modelo de Dom√≠nio</h2><h3 id="agregados-principais">Agregados Principais</h3><h4 id="1-strongagregado-institutionalstrong">1. <strong>Agregado INSTITUTIONAL</strong></h4><pre><code>Hemocentro (Root)
‚îú‚îÄ‚îÄ SetorAtuacao
‚îú‚îÄ‚îÄ User
‚îú‚îÄ‚îÄ UserRole
‚îî‚îÄ‚îÄ UserSetor (Association)
</code></pre>
<h4 id="2-strongagregado-donorstrong">2. <strong>Agregado DONOR</strong></h4><pre><code>Doador (Root)
‚îú‚îÄ‚îÄ TipoSanguineo
‚îú‚îÄ‚îÄ DoadorDoenca (Association)
‚îú‚îÄ‚îÄ DoencaEspecifica
‚îî‚îÄ‚îÄ ConsentimentoLgpd
</code></pre>
<h4 id="3-strongagregado-donation_processstrong">3. <strong>Agregado DONATION_PROCESS</strong></h4><pre><code>Doacao (Root)
‚îú‚îÄ‚îÄ Agendamento
‚îú‚îÄ‚îÄ TriagemClinica
‚îî‚îÄ‚îÄ EstoqueSangue
</code></pre>
<h4 id="4-strongagregado-system_supportstrong">4. <strong>Agregado SYSTEM_SUPPORT</strong></h4><pre><code>ConfiguracaoSistema
‚îú‚îÄ‚îÄ Notificacao
‚îî‚îÄ‚îÄ LogAuditoriaLgpd
</code></pre>
<h2 id="-arquitetura-em-camadas">üèõÔ∏è Arquitetura em Camadas</h2><h3 id="layer-1-presentation-layer">Layer 1: Presentation Layer</h3><pre><code>üì± Controllers (REST API)
‚îú‚îÄ‚îÄ DoadorController
‚îú‚îÄ‚îÄ UserController  
‚îú‚îÄ‚îÄ HemocentroController
‚îú‚îÄ‚îÄ DoacaoController
‚îú‚îÄ‚îÄ TriagemController
‚îú‚îÄ‚îÄ EstoqueController
‚îî‚îÄ‚îÄ ConfigController
</code></pre>
<h3 id="layer-2-application-layer">Layer 2: Application Layer</h3><pre><code>üîß Services (Business Logic)
‚îú‚îÄ‚îÄ DoadorService
‚îú‚îÄ‚îÄ TriagemService
‚îú‚îÄ‚îÄ DoacaoService
‚îú‚îÄ‚îÄ EstoqueService
‚îú‚îÄ‚îÄ NotificacaoService
‚îú‚îÄ‚îÄ ElegibilidadeService
‚îî‚îÄ‚îÄ AuditoriaService
</code></pre>
<h3 id="layer-3-domain-layer">Layer 3: Domain Layer</h3><pre><code>üéØ Entities + Domain Services
‚îú‚îÄ‚îÄ Entities (17 entidades mapeadas)
‚îú‚îÄ‚îÄ Value Objects (Enums)
‚îú‚îÄ‚îÄ Domain Services
‚îÇ   ‚îú‚îÄ‚îÄ CompatibilidadeSanguineaService
‚îÇ   ‚îú‚îÄ‚îÄ ValidacaoMedicaService
‚îÇ   ‚îî‚îÄ‚îÄ ElegibilidadeDoadorService
‚îî‚îÄ‚îÄ Repositories (Interfaces)
</code></pre>
<h3 id="layer-4-infrastructure-layer">Layer 4: Infrastructure Layer</h3><pre><code>üóÑÔ∏è Data Access + External Services
‚îú‚îÄ‚îÄ JPA Repositories
‚îú‚îÄ‚îÄ Database Configuration
‚îú‚îÄ‚îÄ External APIs (Future)
‚îî‚îÄ‚îÄ File Storage
</code></pre>
<h2 id="-segurana-multi-camada">üîê Seguran√ßa Multi-Camada</h2><h3 id="autenticao-amp-autorizao">Autentica√ß√£o &amp; Autoriza√ß√£o</h3><pre><code class="language-java">@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    // Role-based Access Control
    ADMINISTRADOR (Level 4) - Full system access
    MEDICO (Level 3) - Medical validation + Clinical data
    ENFERMEIRO (Level 3) - Screening + Collection
    ATENDENTE (Level 2) - Basic registration + Scheduling
    
    // Multi-sector Support
    User -&gt; Multiple Sectors (TRIAGEM + COLETA simultaneously)
}
</code></pre>
<h3 id="lgpd-compliance-framework">LGPD Compliance Framework</h3><pre><code class="language-java">// Built-in Privacy Controls
‚îú‚îÄ‚îÄ ConsentimentoLgpd - Granular consent tracking
‚îú‚îÄ‚îÄ LogAuditoriaLgpd - Complete audit trail
‚îú‚îÄ‚îÄ Soft Delete - Data retention compliance
‚îî‚îÄ‚îÄ Data Minimization - Only necessary fields
</code></pre>
<h2 id="-fluxos-de-processo-crticos">ü©∏ Fluxos de Processo Cr√≠ticos</h2><h3 id="1-strongjornada-do-doadorstrong">1. <strong>Jornada do Doador</strong></h3><pre><code class="language-mermaid">graph LR
    A[Cadastro] --&gt; B[Agendamento]
    B --&gt; C[Triagem]
    C --&gt; D{Apto?}
    D --&gt;|Sim| E[Doa√ß√£o]
    D --&gt;|N√£o| F[Reagendamento]
    E --&gt; G[Estoque]
    F --&gt; B
</code></pre>
<h3 id="2-strongvalidao-mdica-de-doenasstrong">2. <strong>Valida√ß√£o M√©dica de Doen√ßas</strong></h3><pre><code class="language-mermaid">graph TD
    A[Doador declara doen√ßa] --&gt; B[DoadorDoenca criada]
    B --&gt; C[Status: Aguardando valida√ß√£o]
    C --&gt; D[M√©dico revisa]
    D --&gt; E[Valida√ß√£o m√©dica]
    E --&gt; F[Status: Validado]
</code></pre>
<h3 id="3-stronggesto-multi-setorstrong">3. <strong>Gest√£o Multi-Setor</strong></h3><pre><code class="language-mermaid">graph LR
    A[User] --&gt; B[UserSetor: TRIAGEM]
    A --&gt; C[UserSetor: COLETA]
    B --&gt; D[Setor Principal: TRIAGEM]
    C --&gt; E[Setor Secund√°rio: COLETA]
</code></pre>
<h2 id="-estrutura-de-dados-otimizada">üìä Estrutura de Dados Otimizada</h2><h3 id="relacionamentos-principais">Relacionamentos Principais</h3><pre><code class="language-sql">-- Hierarquia Institucional
Hemocentro 1:N User
User N:M SetorAtuacao (via UserSetor)

-- Dados do Doador
Doador N:1 TipoSanguineo
Doador N:M DoencaEspecifica (via DoadorDoenca)
Doador 1:N ConsentimentoLgpd

-- Processo de Doa√ß√£o
Doador 1:N Agendamento
Doador 1:N TriagemClinica
TriagemClinica 1:N Doacao
TipoSanguineo 1:1 EstoqueSangue
</code></pre>
<h3 id="ndices-estratgicos">√çndices Estrat√©gicos</h3><pre><code class="language-sql">-- Performance Cr√≠tica
CREATE INDEX IX_DOADORES_CPF ON DOADORES(CPF);
CREATE INDEX IX_DOACOES_DATA ON DOACOES(DATA_DOACAO DESC);
CREATE INDEX IX_DOADOR_DOENCAS_VALIDACAO ON DOADOR_DOENCAS(VALIDADO_POR_MEDICO);

-- Multi-Sector Queries
CREATE INDEX IX_USER_SETORES_ATIVO ON USER_SETORES(ID_USER, ATIVO);
CREATE INDEX IX_USER_SETORES_PRINCIPAL ON USER_SETORES(IS_SETOR_PRINCIPAL);
</code></pre>
<h2 id="-componentes-de-negcio">üîß Componentes de Neg√≥cio</h2><h3 id="domain-services-especializados">Domain Services Especializados</h3><h4 id="1-strongelegibilidadeservicestrong">1. <strong>ElegibilidadeService</strong></h4><pre><code class="language-java">@Service
public class ElegibilidadeService {
    
    // Verifica 95 doen√ßas impeditivas
    public ElegibilidadeResult verificarElegibilidade(Long doadorId);
    
    // Valida crit√©rios m√©dicos
    public boolean validarCriteriosMedicos(TriagemClinica triagem);
    
    // Calcula pr√≥xima doa√ß√£o permitida
    public LocalDate calcularProximaDoacaoPermitida(Doador doador);
}
</code></pre>
<h4 id="2-strongcompatibilidadesanguineaservicestrong">2. <strong>CompatibilidadeSanguineaService</strong></h4><pre><code class="language-java">@Service  
public class CompatibilidadeSanguineaService {
    
    // L√≥gica baseada em TipoSanguineo.podeDoarPara
    public List&lt;TipoSanguineo&gt; getReceptoresCompativeis(TipoSanguineo doador);
    
    // Dashboard de estoque cr√≠tico
    public EstoqueStatus avaliarEstoqueCritico();
}
</code></pre>
<h4 id="3-strongvalidacaomedicaservicestrong">3. <strong>ValidacaoMedicaService</strong></h4><pre><code class="language-java">@Service
public class ValidacaoMedicaService {
    
    // Workflow h√≠brido: Doador declara + M√©dico valida
    public void validarDoencaDeclarada(Long doadorDoencaId, User medico);
    
    // Detectar doen√ßas durante triagem
    public DoadorDoenca detectarDoencaTriagem(Long triagem, DoencaEspecifica doenca);
}
</code></pre>
<h2 id="-api-design-estratgico">üì± API Design Estrat√©gico</h2><h3 id="restful-endpoints">RESTful Endpoints</h3><pre><code class="language-java">// Doador Management
GET    /api/doadores                    // Lista paginada
POST   /api/doadores                    // Cadastro completo
GET    /api/doadores/{id}               // Detalhes + doen√ßas
PUT    /api/doadores/{id}               // Atualiza√ß√£o
DELETE /api/doadores/{id}               // Soft delete

// Medical Workflow
GET    /api/doadores/{id}/doencas       // Hist√≥rico m√©dico
POST   /api/doadores/{id}/doencas       // Adicionar doen√ßa
PUT    /api/doencas/{id}/validar        // Valida√ß√£o m√©dica

// Multi-Sector Management  
GET    /api/users/{id}/setores          // Setores do usu√°rio
POST   /api/users/{id}/setores          // Adicionar setor
PUT    /api/users/{id}/setores/{setorId} // Alterar setor principal

// Donation Process
POST   /api/agendamentos                // Agendar doa√ß√£o
GET    /api/triagem/{doadorId}          // Triagem pendente
POST   /api/triagem                     // Registrar triagem
POST   /api/doacoes                     // Registrar doa√ß√£o

// Blood Inventory
GET    /api/estoque                     // Status por tipo sangu√≠neo
PUT    /api/estoque/{tipoId}            // Atualizar estoque
GET    /api/estoque/criticos            // Tipos em n√≠vel cr√≠tico
</code></pre>
<h3 id="padres-de-response">Padr√µes de Response</h3><pre><code class="language-java">// Standard API Response
{
    &quot;success&quot;: true,
    &quot;data&quot;: { ... },
    &quot;message&quot;: &quot;Opera√ß√£o realizada com sucesso&quot;,
    &quot;timestamp&quot;: &quot;2025-08-27T10:30:00Z&quot;
}

// Error Response
{
    &quot;success&quot;: false,
    &quot;error&quot;: {
        &quot;code&quot;: &quot;DOADOR_NOT_ELIGIBLE&quot;,
        &quot;message&quot;: &quot;Doador apresenta doen√ßa impeditiva: Diabetes Tipo 1&quot;,
        &quot;details&quot;: [&quot;ID_DOENCA: 11&quot;, &quot;STATUS: ATIVO&quot;]
    },
    &quot;timestamp&quot;: &quot;2025-08-27T10:30:00Z&quot;
}
</code></pre>
<h2 id="-monitoring-amp-analytics">üìä Monitoring &amp; Analytics</h2><h3 id="dashboard-metrics">Dashboard Metrics</h3><pre><code class="language-java">// Real-time KPIs
‚îú‚îÄ‚îÄ Doadores ativos por tipo sangu√≠neo
‚îú‚îÄ‚îÄ Estoque cr√≠tico (&lt; n√≠vel m√≠nimo)
‚îú‚îÄ‚îÄ Doa√ß√µes por per√≠odo
‚îú‚îÄ‚îÄ Taxa de aprova√ß√£o em triagem
‚îú‚îÄ‚îÄ Doen√ßas mais prevalentes
‚îú‚îÄ‚îÄ Valida√ß√µes m√©dicas pendentes
‚îî‚îÄ‚îÄ Usu√°rios por setor (multi-sector view)
</code></pre>
<h3 id="lgpd-audit-trail">LGPD Audit Trail</h3><pre><code class="language-java">// Compliance Tracking
‚îú‚îÄ‚îÄ Todas as opera√ß√µes em dados pessoais
‚îú‚îÄ‚îÄ Finalidade de cada acesso
‚îú‚îÄ‚îÄ Origem IP e usu√°rio respons√°vel
‚îú‚îÄ‚îÄ Consentimentos ativos/revogados
‚îî‚îÄ‚îÄ Relat√≥rios de conformidade
</code></pre>
<h2 id="-deployment-strategy">üöÄ Deployment Strategy</h2><h3 id="environment-configuration">Environment Configuration</h3><pre><code class="language-yaml"># application-prod.yml
spring:
  datasource:
    url: jdbc:sqlserver://prod-db:1433;databaseName=DB_DOESANGUE_MVP
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: validate  # Never auto-create in prod
  security:
    require-ssl: true

# application-dev.yml  
spring:
  datasource:
    url: jdbc:h2:mem:testdb
  jpa:
    hibernate:
      ddl-auto: create-drop
  h2:
    console:
      enabled: true
</code></pre>
<h3 id="docker-configuration">Docker Configuration</h3><pre><code class="language-dockerfile">FROM openjdk:17-jdk-slim
COPY target/doesangue-backend.jar app.jar
EXPOSE 8080
ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]
</code></pre>
<h2 id="-migration-strategy">üîÑ Migration Strategy</h2><h3 id="implementao-faseada">Implementa√ß√£o Faseada</h3><pre><code>FASE 1 (2 semanas) - Core MVP
‚îú‚îÄ‚îÄ Entidades b√°sicas (User, Doador, TipoSanguineo, Hemocentro)
‚îú‚îÄ‚îÄ Autentica√ß√£o b√°sica
‚îî‚îÄ‚îÄ CRUD operations

FASE 2 (3 semanas) - Medical Workflow  
‚îú‚îÄ‚îÄ Setores m√∫ltiplos (UserSetor)
‚îú‚îÄ‚îÄ Doen√ßas e valida√ß√£o m√©dica
‚îú‚îÄ‚îÄ Triagem e agendamentos
‚îî‚îÄ‚îÄ Dashboard b√°sico

FASE 3 (2 semanas) - Advanced Features
‚îú‚îÄ‚îÄ Doa√ß√µes e estoque
‚îú‚îÄ‚îÄ LGPD compliance
‚îú‚îÄ‚îÄ Relat√≥rios e analytics
‚îî‚îÄ‚îÄ Notifica√ß√µes

FASE 4 (1 semana) - Production Ready
‚îú‚îÄ‚îÄ Performance optimization
‚îú‚îÄ‚îÄ Security hardening
‚îú‚îÄ‚îÄ Monitoring integration
‚îî‚îÄ‚îÄ Deployment automation
</code></pre>
<h2 id="-success-metrics">üéØ Success Metrics</h2><h3 id="technical-metrics">Technical Metrics</h3><ul>
<li><strong>Database Coverage:</strong> 100% (17/17 tabelas)</li>
<li><strong>API Response Time:</strong> &lt; 200ms (95th percentile)</li>
<li><strong>System Uptime:</strong> &gt; 99.5%</li>
<li><strong>LGPD Compliance:</strong> 100% audit coverage</li>
</ul>
<h3 id="business-metrics">Business Metrics</h3><ul>
<li><strong>User Adoption:</strong> Multi-sector usage tracking</li>
<li><strong>Process Efficiency:</strong> Triagem-to-donation conversion rate</li>
<li><strong>Data Quality:</strong> Medical validation completion rate</li>
<li><strong>Operational Excellence:</strong> Blood shortage prevention</li>
</ul>
<hr>
<h2 id="-technical-documentation">üìö Technical Documentation</h2><h3 id="code-standards">Code Standards</h3><ul>
<li><strong>Java 17+</strong> with modern features</li>
<li><strong>Spring Boot 3.x</strong> for rapid development</li>
<li><strong>JPA/Hibernate</strong> for ORM</li>
<li><strong>Maven</strong> for dependency management</li>
<li><strong>JUnit 5</strong> for testing</li>
<li><strong>SonarQube</strong> for code quality</li>
</ul>
<h3 id="database-standards">Database Standards</h3><ul>
<li><strong>Foreign Keys</strong> enforced for referential integrity</li>
<li><strong>Indexes</strong> optimized for query patterns</li>
<li><strong>Audit Columns</strong> for all entities</li>
<li><strong>Soft Delete</strong> for LGPD compliance</li>
</ul>
<hr>
<p><em>Esta arquitetura estabelece uma base s√≥lida e escal√°vel para o Sistema DoeSangue, respeitando totalmente o modelo de dados fornecido e preparando o terreno para crescimento futuro.</em></p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Documenta√ß√£o Detalhada - DoadorController - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üìö Documenta√ß√£o Detalhada - DoadorController</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-documentao-detalhada-doadorcontroller">üìö Documenta√ß√£o Detalhada - DoadorController</h1><p><strong>Data:</strong> 27 de Agosto de 2025<br><strong>Autor:</strong> Winston (Dev Agent)<br><strong>Finalidade:</strong> Estudo de caso para desenvolvimento de controllers REST</p>
<hr>
<h2 id="-objetivo-deste-controller">üéØ Objetivo deste Controller</h2><p>O <code>DoadorController</code> foi criado como um <strong>exemplo completo</strong> demonstrando as melhores pr√°ticas para desenvolvimento de APIs REST no Spring Boot com documenta√ß√£o Swagger profissional. Este controller serve como <strong>template de refer√™ncia</strong> para implementa√ß√£o de outros controllers no sistema.</p>
<hr>
<h2 id="-estrutura-do-controller">üìã Estrutura do Controller</h2><h3 id="strong-arquivos-criadosstrong"><strong>üóÇÔ∏è Arquivos Criados:</strong></h3><pre><code>src/main/java/com/faculdade/doesangue_api/
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îî‚îÄ‚îÄ DoadorController.java           # Controller principal
‚îî‚îÄ‚îÄ dtos/
    ‚îú‚îÄ‚îÄ DoadorCreateDTO.java           # DTO para cria√ß√£o
    ‚îú‚îÄ‚îÄ DoadorDTO.java                 # DTO para resposta
    ‚îî‚îÄ‚îÄ DoadorFiltroDTO.java           # DTO para filtros
</code></pre>
<h3 id="strong-estatsticas-do-cdigostrong"><strong>üìä Estat√≠sticas do C√≥digo:</strong></h3><ul>
<li><strong>700+ linhas</strong> de c√≥digo documentado</li>
<li><strong>6 endpoints</strong> REST completos</li>
<li><strong>50+ anota√ß√µes</strong> Swagger</li>
<li><strong>15+ valida√ß√µes</strong> Bean Validation</li>
<li><strong>100+ exemplos</strong> JSON</li>
<li><strong>Documenta√ß√£o multil√≠ngue</strong> (PT/EN)</li>
</ul>
<hr>
<h2 id="-funcionalidades-implementadas">üöÄ Funcionalidades Implementadas</h2><h3 id="strong1-listagem-paginada-com-filtrosstrong"><strong>1. üìã Listagem Paginada com Filtros</strong></h3><pre><code class="language-java">GET /api/doadores?page=0&amp;size=20&amp;nome=Jo√£o&amp;tipoSanguineo=O+
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Pagina√ß√£o</strong> configur√°vel (p√°gina, tamanho)</li>
<li><span class="badge success">‚úÖ</span> <strong>Ordena√ß√£o</strong> por m√∫ltiplos campos</li>
<li><span class="badge success">‚úÖ</span> <strong>Filtros avan√ßados</strong> (nome, CPF, tipo sangu√≠neo, idade, etc.)</li>
<li><span class="badge success">‚úÖ</span> <strong>Performance</strong> otimizada</li>
<li><span class="badge success">‚úÖ</span> <strong>Documenta√ß√£o completa</strong> com exemplos</li>
</ul>
<p><strong>Filtros Dispon√≠veis:</strong></p>
<ul>
<li><code>nome</code> - Busca parcial por nome</li>
<li><code>cpf</code> - CPF completo</li>
<li><code>tipoSanguineo</code> - A+, A-, B+, B-, AB+, AB-, O+, O-</li>
<li><code>gender</code> - M ou F</li>
<li><code>hemocentroId</code> - ID do hemocentro</li>
<li><code>idadeMinima/idadeMaxima</code> - Faixa et√°ria</li>
<li><code>apenasAptos</code> - Apenas doadores aptos</li>
</ul>
<h3 id="strong2-busca-por-idstrong"><strong>2. üîç Busca por ID</strong></h3><pre><code class="language-java">GET /api/doadores/{id}
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Dados completos</strong> do doador</li>
<li><span class="badge success">‚úÖ</span> <strong>CPF mascarado</strong> para seguran√ßa</li>
<li><span class="badge success">‚úÖ</span> <strong>Informa√ß√µes calculadas</strong> (idade, aptid√£o)</li>
<li><span class="badge success">‚úÖ</span> <strong>Hist√≥rico resumido</strong> de doa√ß√µes</li>
<li><span class="badge success">‚úÖ</span> <strong>Tratamento de erro 404</strong></li>
</ul>
<h3 id="strong3-cadastro-de-novo-doadorstrong"><strong>3. ‚ûï Cadastro de Novo Doador</strong></h3><pre><code class="language-java">POST /api/doadores
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Valida√ß√µes completas</strong> (20+ regras)</li>
<li><span class="badge success">‚úÖ</span> <strong>CPF √∫nico</strong> no sistema</li>
<li><span class="badge success">‚úÖ</span> <strong>Compliance LGPD</strong> obrigat√≥rio</li>
<li><span class="badge success">‚úÖ</span> <strong>Dados obrigat√≥rios</strong> validados</li>
<li><span class="badge success">‚úÖ</span> <strong>Resposta detalhada</strong> com status 201</li>
</ul>
<p><strong>Valida√ß√µes Implementadas:</strong></p>
<ul>
<li>Nome: 2-100 caracteres, obrigat√≥rio</li>
<li>CPF: exatamente 11 d√≠gitos, √∫nico</li>
<li>Email: formato v√°lido, √∫nico</li>
<li>Data nascimento: no passado, idade 16-69</li>
<li>Telefone: 10-15 d√≠gitos</li>
<li>Endere√ßo: campos obrigat√≥rios</li>
<li>Consentimento LGPD: obrigat√≥rio (true)</li>
</ul>
<h3 id="strong4-atualizao-de-dadosstrong"><strong>4. üîÑ Atualiza√ß√£o de Dados</strong></h3><pre><code class="language-java">PUT /api/doadores/{id}
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Campos atualiz√°veis</strong> definidos</li>
<li><span class="badge success">‚úÖ</span> <strong>Campos protegidos</strong> (CPF, nascimento)</li>
<li><span class="badge success">‚úÖ</span> <strong>Auditoria autom√°tica</strong> (updatedAt)</li>
<li><span class="badge success">‚úÖ</span> <strong>Valida√ß√µes mantidas</strong></li>
</ul>
<h3 id="strong5-verificao-de-aptidostrong"><strong>5. ü©∫ Verifica√ß√£o de Aptid√£o</strong></h3><pre><code class="language-java">GET /api/doadores/{id}/aptidao
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Regras m√©dicas</strong> aplicadas</li>
<li><span class="badge success">‚úÖ</span> <strong>Intervalos por g√™nero</strong> (60d M, 90d F)</li>
<li><span class="badge success">‚úÖ</span> <strong>Motivos detalhados</strong> se inapto</li>
<li><span class="badge success">‚úÖ</span> <strong>Pr√≥xima data permitida</strong></li>
<li><span class="badge success">‚úÖ</span> <strong>Recomenda√ß√µes m√©dicas</strong></li>
</ul>
<h3 id="strong6-estatsticas-detalhadasstrong"><strong>6. üìä Estat√≠sticas Detalhadas</strong></h3><pre><code class="language-java">GET /api/doadores/{id}/estatisticas
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Hist√≥rico completo</strong> de doa√ß√µes</li>
<li><span class="badge success">‚úÖ</span> <strong>M√©tricas calculadas</strong> (frequ√™ncia, volume)</li>
<li><span class="badge success">‚úÖ</span> <strong>Gamifica√ß√£o</strong> (status fidelidade, metas)</li>
<li><span class="badge success">‚úÖ</span> <strong>Impacto social</strong> (vidas ajudadas)</li>
</ul>
<hr>
<h2 id="-arquitetura-dos-dtos">üèóÔ∏è Arquitetura dos DTOs</h2><h3 id="strong-doadorcreatedto-para-criaostrong"><strong>üî® DoadorCreateDTO - Para Cria√ß√£o</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>20 campos</strong> com valida√ß√µes espec√≠ficas</li>
<li><strong>Anota√ß√µes Swagger</strong> detalhadas</li>
<li><strong>Exemplos pr√°ticos</strong> para cada campo</li>
<li><strong>Valida√ß√µes Bean Validation</strong></li>
<li><strong>Documenta√ß√£o dos requisitos</strong></li>
</ul>
<p><strong>Principais Valida√ß√µes:</strong></p>
<pre><code class="language-java">@NotBlank(message = &quot;Nome completo √© obrigat√≥rio&quot;)
@Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
private String fullName;

@Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;)
private String cpf;

@Email(message = &quot;Email deve ter formato v√°lido&quot;)
private String email;

@AssertTrue(message = &quot;Consentimento LGPD deve ser verdadeiro para prosseguir&quot;)
private Boolean consentimentoLgpd;
</code></pre>
<h3 id="strong-doadordto-para-respostastrong"><strong>üì§ DoadorDTO - Para Resposta</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Dados calculados</strong> (idade, aptid√£o)</li>
<li><strong>Campos mascarados</strong> (CPF para privacidade)</li>
<li><strong>Informa√ß√µes agregadas</strong> (total doa√ß√µes, √∫ltima doa√ß√£o)</li>
<li><strong>Status em tempo real</strong> (pode doar)</li>
<li><strong>Timestamps de auditoria</strong></li>
</ul>
<p><strong>Campos Especiais:</strong></p>
<pre><code class="language-java">@Schema(description = &quot;CPF mascarado para privacidade&quot;, example = &quot;123.***.***-01&quot;)
private String cpfMasked;

@Schema(description = &quot;Idade calculada&quot;, accessMode = Schema.AccessMode.READ_ONLY)
private Integer idade;

@Schema(description = &quot;Indica se pode doar no momento&quot;, accessMode = Schema.AccessMode.READ_ONLY)
private Boolean podeDoar;
</code></pre>
<h3 id="strong-doadorfiltrodto-para-filtrosstrong"><strong>üîç DoadorFiltroDTO - Para Filtros</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Filtros opcionais</strong> todos</li>
<li><strong>Ranges de valores</strong> (idade, datas)</li>
<li><strong>Flags booleanas</strong> (apenas aptos)</li>
<li><strong>Campos de localiza√ß√£o</strong> (estado, cidade)</li>
</ul>
<hr>
<h2 id="-strongpublic-recordstrong-vs-strongpublic-classstrong-para-dtos">üîç <strong>public record</strong> vs <strong>public class</strong> para DTOs</h2><h3 id="strong-public-record-moderna-e-concisa-java-14strong"><strong>üìù public record - Moderna e Concisa (Java 14+)</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Imut√°vel por padr√£o</strong> - Todos os campos s√£o <code>final</code></li>
<li><strong>C√≥digo mais limpo</strong> - Sem boilerplate de getters/setters</li>
<li><strong>Equals/hashCode autom√°tico</strong> - Implementados automaticamente</li>
<li><strong>toString() √∫til</strong> - Mostra todos os campos</li>
<li><strong>Construtor autom√°tico</strong> - Com todos os par√¢metros</li>
</ul>
<p><strong>Exemplo pr√°tico:</strong></p>
<pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de doador&quot;)
public record DoadorCreateDTO(
    @Schema(description = &quot;Nome completo&quot;, example = &quot;Jo√£o Silva&quot;)
    @NotBlank(message = &quot;Nome completo √© obrigat√≥rio&quot;)
    @Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
    String fullName,
    
    @Schema(description = &quot;CPF sem formata√ß√£o&quot;, example = &quot;12345678901&quot;)
    @Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;)
    String cpf,
    
    @Schema(description = &quot;Email para contato&quot;, example = &quot;joao.silva@email.com&quot;)
    @Email(message = &quot;Email deve ter formato v√°lido&quot;)
    String email,
    
    @Schema(description = &quot;Consentimento LGPD&quot;, example = &quot;true&quot;)
    @AssertTrue(message = &quot;Consentimento LGPD deve ser verdadeiro para prosseguir&quot;)
    Boolean consentimentoLgpd
) {}
</code></pre>
<p><strong><span class="badge success">‚úÖ</span> Vantagens:</strong></p>
<ul>
<li><strong>Menos c√≥digo</strong> - Reduz significativamente o boilerplate</li>
<li><strong>Imutabilidade</strong> - Mais seguro para transfer√™ncia de dados</li>
<li><strong>Modernidade</strong> - Padr√£o atual do Java para DTOs</li>
<li><strong>Performance</strong> - Ligeiramente mais eficiente</li>
</ul>
<h3 id="strong-public-class-tradicional-e-flexvelstrong"><strong>üèóÔ∏è public class - Tradicional e Flex√≠vel</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Mut√°vel por padr√£o</strong> - Campos podem ser modificados</li>
<li><strong>C√≥digo verbose</strong> - Requer getters/setters manuais ou Lombok</li>
<li><strong>Flexibilidade total</strong> - Permite customiza√ß√£o de comportamentos</li>
<li><strong>Compatibilidade</strong> - Funciona em todas as vers√µes do Java</li>
</ul>
<p><strong>Exemplo pr√°tico:</strong></p>
<pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de doador&quot;)
@Getter @Setter
@NoArgsConstructor @AllArgsConstructor
public class DoadorCreateDTO {
    
    @Schema(description = &quot;Nome completo&quot;, example = &quot;Jo√£o Silva&quot;)
    @NotBlank(message = &quot;Nome completo √© obrigat√≥rio&quot;)
    @Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
    private String fullName;
    
    @Schema(description = &quot;CPF sem formata√ß√£o&quot;, example = &quot;12345678901&quot;)
    @Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;)
    private String cpf;
    
    @Schema(description = &quot;Email para contato&quot;, example = &quot;joao.silva@email.com&quot;)
    @Email(message = &quot;Email deve ter formato v√°lido&quot;)
    private String email;
    
    @Schema(description = &quot;Consentimento LGPD&quot;, example = &quot;true&quot;)
    @AssertTrue(message = &quot;Consentimento LGPD deve ser verdadeiro para prosseguir&quot;)
    private Boolean consentimentoLgpd;
    
    // Lombok gera getters, setters, construtores
}
</code></pre>
<p><strong><span class="badge success">‚úÖ</span> Vantagens:</strong></p>
<ul>
<li><strong>Flexibilidade</strong> - Permite valida√ß√µes customizadas</li>
<li><strong>Compatibilidade</strong> - Funciona com bibliotecas mais antigas</li>
<li><strong>Lombok</strong> - Reduz boilerplate com anota√ß√µes</li>
<li><strong>Debugging</strong> - Mais f√°cil para debug em algumas IDEs</li>
</ul>
<h3 id="strong-quando-usar-cada-umstrong"><strong>üéØ Quando Usar Cada Um</strong></h3><table>
<thead>
<tr>
<th><strong>Cen√°rio</strong></th>
<th><strong>Record</strong></th>
<th><strong>Class</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>DTOs simples de transfer√™ncia</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Prefer√≠vel</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Adequado</td>
</tr>
<tr>
<td><strong>Dados imut√°veis</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Ideal</strong></td>
<td><span class="badge danger">‚ùå</span> Requer esfor√ßo extra</td>
</tr>
<tr>
<td><strong>APIs REST modernas</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Recomendado</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Tradicional</td>
</tr>
<tr>
<td><strong>Valida√ß√µes complexas</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Limitado</td>
<td><span class="badge success">‚úÖ</span> <strong>Melhor</strong></td>
</tr>
<tr>
<td><strong>Heran√ßa necess√°ria</strong></td>
<td><span class="badge danger">‚ùå</span> N√£o suporta</td>
<td><span class="badge success">‚úÖ</span> <strong>Necess√°rio</strong></td>
</tr>
<tr>
<td><strong>Java &lt; 14</strong></td>
<td><span class="badge danger">‚ùå</span> N√£o dispon√≠vel</td>
<td><span class="badge success">‚úÖ</span> <strong>√önica op√ß√£o</strong></td>
</tr>
<tr>
<td><strong>Frameworks antigos</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Pode ter problemas</td>
<td><span class="badge success">‚úÖ</span> <strong>Compat√≠vel</strong></td>
</tr>
</tbody></table>
<h3 id="strong-recomendao-para-o-projeto-doesanguestrong"><strong>üí° Recomenda√ß√£o para o Projeto DoeSangue</strong></h3><p><strong>Para DTOs de Entrada/Sa√≠da:</strong></p>
<pre><code class="language-java">// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; RECOMENDADO - Record para dados simples
public record DoadorCreateDTO(
    @NotBlank String fullName,
    @Pattern(regexp = &quot;\\d{11}&quot;) String cpf,
    @Email String email
) {}

// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; ALTERNATIVO - Class quando precisar de flexibilidade
@Getter @Setter
public class DoadorUpdateDTO {
    private String fullName;
    private String email;
    
    // M√©todos customizados de valida√ß√£o
    @AssertTrue
    public boolean isValidUpdate() {
        return fullName != null || email != null;
    }
}
</code></pre>
<p><strong>üìö Conclus√£o:</strong></p>
<ul>
<li><strong>Records</strong> s√£o ideais para DTOs simples e modernos</li>
<li><strong>Classes</strong> oferecem mais flexibilidade quando necess√°rio</li>
<li><strong>Ambos funcionam</strong> com Spring Boot e valida√ß√µes</li>
<li><strong>Escolha baseada</strong> na complexidade e requisitos do projeto</li>
</ul>
<hr>
<h2 id="-documentao-swagger-avanada">üìñ Documenta√ß√£o Swagger Avan√ßada</h2><h3 id="strong-recursos-utilizadosstrong"><strong>üé® Recursos Utilizados:</strong></h3><h4 id="strong1-anotaes-de-operaostrong"><strong>1. Anota√ß√µes de Opera√ß√£o</strong></h4><pre><code class="language-java">@Operation(
    summary = &quot;üìã Listar doadores com filtros avan√ßados&quot;,
    description = &quot;&quot;&quot;
        Descri√ß√£o detalhada em markdown...
        
        **Funcionalidades:**
        - Item 1
        - Item 2
        
        **Casos de Uso:**
        - Caso 1
        - Caso 2
        &quot;&quot;&quot;,
    tags = {&quot;Doadores&quot;}
)
</code></pre>
<h4 id="strong2-exemplos-json-completosstrong"><strong>2. Exemplos JSON Completos</strong></h4><pre><code class="language-java">@ExampleObject(
    name = &quot;Exemplo completo de cadastro&quot;,
    value = &quot;&quot;&quot;
        {
            &quot;fullName&quot;: &quot;Maria Oliveira Silva&quot;,
            &quot;cpf&quot;: &quot;98765432101&quot;,
            &quot;email&quot;: &quot;maria.oliveira@email.com&quot;,
            // ... JSON completo
        }
        &quot;&quot;&quot;
)
</code></pre>
<h4 id="strong3-respostas-detalhadasstrong"><strong>3. Respostas Detalhadas</strong></h4><pre><code class="language-java">@ApiResponse(
    responseCode = &quot;400&quot;, 
    description = &quot;&lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; Dados inv√°lidos fornecidos&quot;,
    content = @Content(
        schema = @Schema(implementation = Map.class),
        examples = @ExampleObject(
            value = &quot;&quot;&quot;
                {
                    &quot;error&quot;: &quot;Bad Request&quot;,
                    &quot;message&quot;: &quot;Dados inv√°lidos&quot;,
                    &quot;details&quot;: {
                        &quot;fullName&quot;: &quot;Nome completo √© obrigat√≥rio&quot;,
                        &quot;cpf&quot;: &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;
                    }
                }
                &quot;&quot;&quot;
        )
    )
)
</code></pre>
<h4 id="strong4-parmetros-documentadosstrong"><strong>4. Par√¢metros Documentados</strong></h4><pre><code class="language-java">@Parameter(
    description = &quot;N√∫mero da p√°gina (iniciando em 0)&quot;, 
    example = &quot;0&quot;,
    schema = @Schema(minimum = &quot;0&quot;, defaultValue = &quot;0&quot;)
)
@RequestParam(defaultValue = &quot;0&quot;) int page
</code></pre>
<h3 id="strong-benefcios-da-documentaostrong"><strong>üéØ Benef√≠cios da Documenta√ß√£o:</strong></h3><ol>
<li><strong>Auto-explicativa</strong> - Desenvolvedores entendem sem explica√ß√£o</li>
<li><strong>Test√°vel</strong> - Todos os endpoints test√°veis via Swagger UI</li>
<li><strong>Exemplos reais</strong> - JSON examples que funcionam</li>
<li><strong>Tratamento de erros</strong> - Todos os c√≥digos HTTP documentados</li>
<li><strong>Valida√ß√µes claras</strong> - Regras expl√≠citas para cada campo</li>
</ol>
<hr>
<h2 id="-como-testar-o-controller">üß™ Como Testar o Controller</h2><h3 id="strong1-iniciar-a-aplicaostrong"><strong>1. Iniciar a Aplica√ß√£o</strong></h3><pre><code class="language-bash">cd doesangue_backend
./mvnw spring-boot:run
</code></pre>
<h3 id="strong2-acessar-swagger-uistrong"><strong>2. Acessar Swagger UI</strong></h3><pre><code>http://localhost:8080/swagger-ui.html
</code></pre>
<h3 id="strong3-testar-endpointsstrong"><strong>3. Testar Endpoints</strong></h3><h4 id="stronglistar-doadoresstrong"><strong>Listar Doadores:</strong></h4><pre><code>GET /api/doadores?page=0&amp;size=5&amp;nome=Jo√£o
</code></pre>
<h4 id="strongbuscar-por-idstrong"><strong>Buscar por ID:</strong></h4><pre><code>GET /api/doadores/1
</code></pre>
<h4 id="strongcadastrar-doadorstrong"><strong>Cadastrar Doador:</strong></h4><pre><code>POST /api/doadores
{
    &quot;fullName&quot;: &quot;Novo Doador Teste&quot;,
    &quot;cpf&quot;: &quot;99999999999&quot;,
    &quot;email&quot;: &quot;teste@email.com&quot;,
    &quot;birthDate&quot;: &quot;1990-01-01&quot;,
    &quot;gender&quot;: &quot;M&quot;,
    &quot;telefonePrincipal&quot;: &quot;11999999999&quot;,
    &quot;logradouro&quot;: &quot;Rua Teste&quot;,
    &quot;numero&quot;: &quot;123&quot;,
    &quot;cidade&quot;: &quot;S√£o Paulo&quot;,
    &quot;estado&quot;: &quot;SP&quot;,
    &quot;cep&quot;: &quot;01234567&quot;,
    &quot;tipoSanguineoId&quot;: 1,
    &quot;hemocentroId&quot;: 1,
    &quot;cadastradoPorId&quot;: 1,
    &quot;consentimentoLgpd&quot;: true
}
</code></pre>
<h4 id="strongverificar-aptidostrong"><strong>Verificar Aptid√£o:</strong></h4><pre><code>GET /api/doadores/1/aptidao
</code></pre>
<h3 id="strong4-testar-validaesstrong"><strong>4. Testar Valida√ß√µes</strong></h3><h4 id="strongcpf-duplicadostrong"><strong>CPF Duplicado:</strong></h4><pre><code>POST /api/doadores
{
    &quot;cpf&quot;: &quot;12345678901&quot;,  // CPF que j√° existe
    // outros campos...
}
</code></pre>
<p><strong>Resultado esperado:</strong> 409 Conflict</p>
<h4 id="strongdados-invlidosstrong"><strong>Dados Inv√°lidos:</strong></h4><pre><code>POST /api/doadores
{
    &quot;fullName&quot;: &quot;&quot;,           // Nome vazio
    &quot;cpf&quot;: &quot;123&quot;,            // CPF inv√°lido
    &quot;email&quot;: &quot;email-inv√°lido&quot;, // Email inv√°lido
    &quot;consentimentoLgpd&quot;: false // LGPD n√£o aceito
}
</code></pre>
<p><strong>Resultado esperado:</strong> 400 Bad Request com detalhes</p>
<hr>
<h2 id="-conceitos-demonstrados">üéì Conceitos Demonstrados</h2><h3 id="strong1-spring-boot-spring-webstrong"><strong>1. Spring Boot / Spring Web</strong></h3><ul>
<li><code>@RestController</code> - Marca classe como controller REST</li>
<li><code>@RequestMapping</code> - Define base path da API</li>
<li><code>@GetMapping/@PostMapping/@PutMapping</code> - Mapeia HTTP methods</li>
<li><code>@PathVariable</code> - Captura vari√°veis da URL</li>
<li><code>@RequestParam</code> - Captura query parameters</li>
<li><code>@RequestBody</code> - Mapeia body do request para objeto</li>
<li><code>@Valid</code> - Ativa valida√ß√µes Bean Validation</li>
</ul>
<h3 id="strong2-bean-validationstrong"><strong>2. Bean Validation</strong></h3><ul>
<li><code>@NotNull/@NotBlank</code> - Valida√ß√µes de nulidade</li>
<li><code>@Size</code> - Valida√ß√£o de tamanho</li>
<li><code>@Pattern</code> - Valida√ß√£o com regex</li>
<li><code>@Email</code> - Valida√ß√£o de formato de email</li>
<li><code>@Past</code> - Data deve ser no passado</li>
<li><code>@Positive</code> - N√∫mero deve ser positivo</li>
<li><code>@AssertTrue</code> - Booleano deve ser verdadeiro</li>
</ul>
<h3 id="strong3-swaggeropenapi-3strong"><strong>3. Swagger/OpenAPI 3</strong></h3><ul>
<li><code>@Tag</code> - Agrupa endpoints por categoria</li>
<li><code>@Operation</code> - Documenta opera√ß√£o</li>
<li><code>@ApiResponse/@ApiResponses</code> - Documenta respostas</li>
<li><code>@Parameter</code> - Documenta par√¢metros</li>
<li><code>@Schema</code> - Documenta estrutura de dados</li>
<li><code>@ExampleObject</code> - Fornece exemplos</li>
<li><code>@SecurityRequirement</code> - Define requisitos de seguran√ßa</li>
</ul>
<h3 id="strong4-dtos-data-transfer-objectsstrong"><strong>4. DTOs (Data Transfer Objects)</strong></h3><ul>
<li><strong>Separa√ß√£o de responsabilidades</strong> - DTOs diferentes para diferentes opera√ß√µes</li>
<li><strong>Valida√ß√µes espec√≠ficas</strong> - Cada DTO com suas valida√ß√µes</li>
<li><strong>Documenta√ß√£o integrada</strong> - Schema documentado no DTO</li>
<li><strong>Transforma√ß√£o de dados</strong> - Entre entity e DTO</li>
</ul>
<h3 id="strong5-paginaostrong"><strong>5. Pagina√ß√£o</strong></h3><ul>
<li><code>Page&lt;T&gt;</code> - Interface padr√£o Spring Data</li>
<li><code>PageRequest</code> - Requisi√ß√£o de p√°gina</li>
<li><code>PageImpl</code> - Implementa√ß√£o de p√°gina</li>
<li>Query parameters padr√£o (page, size, sort)</li>
</ul>
<h3 id="strong6-tratamento-de-errosstrong"><strong>6. Tratamento de Erros</strong></h3><ul>
<li>Status HTTP apropriados (200, 201, 400, 404, 409)</li>
<li>Respostas estruturadas para erros</li>
<li>Mensagens descritivas</li>
<li>Detalhes de valida√ß√£o</li>
</ul>
<hr>
<h2 id="-prximos-passos">üéØ Pr√≥ximos Passos</h2><h3 id="strongpara-este-controllerstrong"><strong>Para Este Controller:</strong></h3><ol>
<li><strong>Implementar Service layer</strong> - DoadorService com regras de neg√≥cio</li>
<li><strong>Implementar Repository</strong> - DoadorRepository com queries customizadas</li>
<li><strong>Integrar com entidades JPA</strong> - Mapear para Doador entity</li>
<li><strong>Adicionar testes</strong> - Unit e integration tests</li>
<li><strong>Implementar seguran√ßa</strong> - JWT authentication</li>
</ol>
<h3 id="strongpara-outros-controllersstrong"><strong>Para Outros Controllers:</strong></h3><ol>
<li><strong>UserController</strong> - Gest√£o de usu√°rios</li>
<li><strong>HemocentroController</strong> - Gest√£o de hemocentros</li>
<li><strong>AuthController</strong> - Autentica√ß√£o JWT</li>
<li><strong>TriagemController</strong> - Triagem cl√≠nica</li>
<li><strong>AgendamentoController</strong> - Agendamentos</li>
</ol>
<h3 id="strongmelhorias-arquiteturaisstrong"><strong>Melhorias Arquiteturais:</strong></h3><ol>
<li><strong>Exception Handler global</strong> - Tratamento centralizado de erros</li>
<li><strong>Audit logs</strong> - Auditoria autom√°tica de opera√ß√µes</li>
<li><strong>Cache</strong> - Cache para consultas frequentes</li>
<li><strong>Metrics</strong> - M√©tricas de performance</li>
<li><strong>Rate limiting</strong> - Controle de taxa de requisi√ß√µes</li>
</ol>
<hr>
<h2 id="-recursos-de-aprendizado">üìö Recursos de Aprendizado</h2><h3 id="strongconceitos-aplicadosstrong"><strong>Conceitos Aplicados:</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>REST API Design</strong> - Padr√µes RESTful</li>
<li><span class="badge success">‚úÖ</span> <strong>OpenAPI 3.0</strong> - Documenta√ß√£o autom√°tica</li>
<li><span class="badge success">‚úÖ</span> <strong>Bean Validation</strong> - Valida√ß√µes declarativas</li>
<li><span class="badge success">‚úÖ</span> <strong>DTO Pattern</strong> - Transfer√™ncia de dados</li>
<li><span class="badge success">‚úÖ</span> <strong>Pagina√ß√£o</strong> - Listagens eficientes</li>
<li><span class="badge success">‚úÖ</span> <strong>Error Handling</strong> - Tratamento de erros</li>
<li><span class="badge success">‚úÖ</span> <strong>Security</strong> - Autentica√ß√£o JWT</li>
<li><span class="badge success">‚úÖ</span> <strong>Documentation</strong> - C√≥digo autodocumentado</li>
</ul>
<h3 id="strongboas-prticas-demonstradasstrong"><strong>Boas Pr√°ticas Demonstradas:</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>Single Responsibility</strong> - Cada m√©todo uma responsabilidade</li>
<li><span class="badge success">‚úÖ</span> <strong>Separation of Concerns</strong> - DTOs separados por fun√ß√£o</li>
<li><span class="badge success">‚úÖ</span> <strong>DRY Principle</strong> - Reutiliza√ß√£o de valida√ß√µes</li>
<li><span class="badge success">‚úÖ</span> <strong>Clean Code</strong> - C√≥digo leg√≠vel e bem estruturado</li>
<li><span class="badge success">‚úÖ</span> <strong>API First</strong> - Documenta√ß√£o guiando implementa√ß√£o</li>
<li><span class="badge success">‚úÖ</span> <strong>Security by Design</strong> - Seguran√ßa desde o in√≠cio</li>
</ul>
<hr>
<p><strong>üéØ Conclus√£o:</strong> Este controller serve como um <strong>template completo</strong> para desenvolvimento de APIs REST profissionais no Spring Boot, demonstrando desde valida√ß√µes b√°sicas at√© documenta√ß√£o avan√ßada e tratamento de erros. √â um exemplo pr√°tico de como implementar APIs de qualidade industrial.</p>
<p><strong>üìà Valor para Aprendizado:</strong> Estudar este c√≥digo fornece uma base s√≥lida para desenvolvimento de APIs REST modernas, com foco em qualidade, documenta√ß√£o e manutenibilidade.</p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Documenta√ß√£o Completa das Entidades - Sistema DoeSangue - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üìö Documenta√ß√£o Completa das Entidades - Sistema DoeSangue</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-documentao-completa-das-entidades-sistema-doesangue">üìö Documenta√ß√£o Completa das Entidades - Sistema DoeSangue</h1><p><strong>Vers√£o:</strong> v2.0<br><strong>Data:</strong> 27 de Agosto de 2025<br><strong>Desenvolvedor:</strong> Dev Team</p>
<hr>
<h2 id="-ndice">üìã √çndice</h2><ol>
<li><a href="#vis%C3%A3o-geral-do-sistema">Vis√£o Geral do Sistema</a></li>
<li><a href="#agregados-de-dom%C3%ADnio">Agregados de Dom√≠nio</a></li>
<li><a href="#entidades-detalhadas">Entidades Detalhadas</a></li>
<li><a href="#enums-e-value-objects">Enums e Value Objects</a></li>
<li><a href="#anota%C3%A7%C3%B5es-jpa-explicadas">Anota√ß√µes JPA Explicadas</a></li>
<li><a href="#relacionamentos-e-estrat%C3%A9gias">Relacionamentos e Estrat√©gias</a></li>
<li><a href="#padr%C3%B5es-de-design">Padr√µes de Design</a></li>
<li><a href="#guia-de-boas-pr%C3%A1ticas">Guia de Boas Pr√°ticas</a></li>
</ol>
<hr>
<h2 id="-viso-geral-do-sistema">üéØ Vis√£o Geral do Sistema</h2><p>O Sistema DoeSangue √© arquitetado em <strong>4 agregados principais</strong> seguindo padr√µes DDD (Domain-Driven Design), com <strong>17 entidades</strong> que cobrem todo o ciclo de doa√ß√£o de sangue.</p>
<h3 id="strong-estatsticas-do-sistemastrong"><strong>üìä Estat√≠sticas do Sistema:</strong></h3><ul>
<li><strong>17 Entidades JPA</strong> mapeadas</li>
<li><strong>4 Agregados</strong> de dom√≠nio</li>
<li><strong>6 Enums</strong> para type safety</li>
<li><strong>100% Cobertura</strong> do schema SQL</li>
<li><strong>Multi-setor</strong> e <strong>Workflow m√©dico</strong> implementados</li>
</ul>
<h3 id="strong-arquitetura-geralstrong"><strong>üèóÔ∏è Arquitetura Geral:</strong></h3><pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   INSTITUTIONAL ‚îÇ    ‚îÇ      DONOR      ‚îÇ    ‚îÇ DONATION_PROCESS‚îÇ    ‚îÇ SYSTEM_SUPPORT  ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ ‚Ä¢ Hemocentro    ‚îÇ    ‚îÇ ‚Ä¢ Doador        ‚îÇ    ‚îÇ ‚Ä¢ TriagemClinica‚îÇ    ‚îÇ ‚Ä¢ ConfigSistema ‚îÇ
‚îÇ ‚Ä¢ User          ‚îÇ    ‚îÇ ‚Ä¢ TipoSanguineo ‚îÇ    ‚îÇ ‚Ä¢ Agendamento   ‚îÇ    ‚îÇ ‚Ä¢ Notificacao   ‚îÇ
‚îÇ ‚Ä¢ UserRole      ‚îÇ    ‚îÇ ‚Ä¢ DoencaEspecif ‚îÇ    ‚îÇ ‚Ä¢ Doacao        ‚îÇ    ‚îÇ ‚Ä¢ LogAuditoria  ‚îÇ
‚îÇ ‚Ä¢ SetorAtuacao  ‚îÇ    ‚îÇ ‚Ä¢ DoadorDoenca  ‚îÇ    ‚îÇ ‚Ä¢ EstoqueSangue ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ ‚Ä¢ UserSetor     ‚îÇ    ‚îÇ ‚Ä¢ ConsentLGPD   ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre>
<hr>
<h2 id="-agregados-de-domnio">üè¢ Agregados de Dom√≠nio</h2><h3 id="strong1-agregado-institutionalstrong"><strong>1. Agregado INSTITUTIONAL</strong></h3><p><strong>Responsabilidade:</strong> Gest√£o de usu√°rios, hemocentros e estrutura organizacional</p>
<pre><code class="language-java">Hemocentro (Aggregate Root)
‚îú‚îÄ‚îÄ User (Entity)
‚îÇ   ‚îî‚îÄ‚îÄ UserSetor (Association Entity)
‚îú‚îÄ‚îÄ UserRole (Entity)  
‚îî‚îÄ‚îÄ SetorAtuacao (Entity)
</code></pre>
<h3 id="strong2-agregado-donorstrong"><strong>2. Agregado DONOR</strong></h3><p><strong>Responsabilidade:</strong> Gest√£o de doadores, tipos sangu√≠neos e hist√≥rico m√©dico</p>
<pre><code class="language-java">Doador (Aggregate Root)
‚îú‚îÄ‚îÄ TipoSanguineo (Entity)
‚îú‚îÄ‚îÄ DoadorDoenca (Association Entity)
‚îú‚îÄ‚îÄ DoencaEspecifica (Entity)
‚îî‚îÄ‚îÄ ConsentimentoLgpd (Entity)
</code></pre>
<h3 id="strong3-agregado-donation_processstrong"><strong>3. Agregado DONATION_PROCESS</strong></h3><p><strong>Responsabilidade:</strong> Processo completo de doa√ß√£o desde agendamento at√© estoque</p>
<pre><code class="language-java">Doacao (Aggregate Root)
‚îú‚îÄ‚îÄ Agendamento (Entity)
‚îú‚îÄ‚îÄ TriagemClinica (Entity)
‚îî‚îÄ‚îÄ EstoqueSangue (Entity)
</code></pre>
<h3 id="strong4-agregado-system_supportstrong"><strong>4. Agregado SYSTEM_SUPPORT</strong></h3><p><strong>Responsabilidade:</strong> Configura√ß√µes, notifica√ß√µes e auditoria</p>
<pre><code class="language-java">ConfiguracaoSistema (Aggregate Root)
‚îú‚îÄ‚îÄ Notificacao (Entity)
‚îî‚îÄ‚îÄ LogAuditoriaLgpd (Entity)
</code></pre>
<hr>
<h2 id="-entidades-detalhadas">üèõÔ∏è Entidades Detalhadas</h2><h3 id="strongagregado-institutionalstrong-"><strong>AGREGADO INSTITUTIONAL</strong> üè¢</h3><hr>
<h4 id="strong1-hemocentrostrong-instituies-de-sade"><strong>1. Hemocentro</strong> - üè• Institui√ß√µes de Sa√∫de</h4><pre><code class="language-java">@Entity
@Table(name = &quot;HEMOCENTROS&quot;)
public class Hemocentro {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_HEMOCENTRO&quot;)
    private Long idHemocentro;
    // ... demais campos
}
</code></pre>
<h5 id="strong-estrutura-completastrong"><strong>üìä Estrutura Completa:</strong></h5><table>
<thead>
<tr>
<th><strong>Categoria</strong></th>
<th><strong>Campo</strong></th>
<th><strong>Tipo</strong></th>
<th><strong>Constraint</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Identifica√ß√£o</strong></td>
<td><code>codigoHemocentro</code></td>
<td><code>String(20)</code></td>
<td><code>UNIQUE, NOT NULL</code></td>
<td>C√≥digo oficial ANVISA/MS</td>
</tr>
<tr>
<td></td>
<td><code>nomeHemocentro</code></td>
<td><code>String(100)</code></td>
<td><code>NOT NULL</code></td>
<td>Nome institucional</td>
</tr>
<tr>
<td></td>
<td><code>razaoSocial</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Raz√£o social da entidade</td>
</tr>
<tr>
<td></td>
<td><code>cnpj</code></td>
<td><code>String(14)</code></td>
<td><code>UNIQUE</code></td>
<td>CNPJ da institui√ß√£o</td>
</tr>
<tr>
<td><strong>Classifica√ß√£o</strong></td>
<td><code>tipoHemocentro</code></td>
<td><code>String(30)</code></td>
<td><code>NOT NULL</code></td>
<td>COORDENADOR/REGIONAL/LOCAL</td>
</tr>
<tr>
<td></td>
<td><code>nivelAtencao</code></td>
<td><code>String(20)</code></td>
<td></td>
<td>PRIMARIO/MEDIO/ALTO</td>
</tr>
<tr>
<td><strong>Endere√ßo</strong></td>
<td><code>logradouro</code></td>
<td><code>String(100)</code></td>
<td><code>NOT NULL</code></td>
<td>Endere√ßo completo</td>
</tr>
<tr>
<td></td>
<td><code>numero</code></td>
<td><code>String(10)</code></td>
<td><code>NOT NULL</code></td>
<td>N√∫mero do endere√ßo</td>
</tr>
<tr>
<td></td>
<td><code>cidade</code></td>
<td><code>String(50)</code></td>
<td><code>NOT NULL</code></td>
<td>Cidade</td>
</tr>
<tr>
<td></td>
<td><code>estado</code></td>
<td><code>String(2)</code></td>
<td><code>NOT NULL</code></td>
<td>UF</td>
</tr>
<tr>
<td></td>
<td><code>cep</code></td>
<td><code>String(10)</code></td>
<td><code>NOT NULL</code></td>
<td>CEP</td>
</tr>
<tr>
<td><strong>Contatos</strong></td>
<td><code>telefonePrincipal</code></td>
<td><code>String(15)</code></td>
<td><code>NOT NULL</code></td>
<td>Telefone principal</td>
</tr>
<tr>
<td></td>
<td><code>emailInstitucional</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Email oficial</td>
</tr>
<tr>
<td></td>
<td><code>siteWeb</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Site institucional</td>
</tr>
<tr>
<td><strong>Responsabilidade</strong></td>
<td><code>diretorTecnico</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Nome do diretor t√©cnico</td>
</tr>
<tr>
<td></td>
<td><code>crmDiretor</code></td>
<td><code>String(20)</code></td>
<td></td>
<td>CRM do diretor</td>
</tr>
<tr>
<td></td>
<td><code>responsavelTecnico</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Respons√°vel t√©cnico</td>
</tr>
<tr>
<td><strong>Operacional</strong></td>
<td><code>capacidadeColetasDia</code></td>
<td><code>Integer</code></td>
<td></td>
<td>Doa√ß√µes por dia</td>
</tr>
<tr>
<td></td>
<td><code>horarioFuncionamento</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Ex: &quot;07:00-17:00&quot;</td>
</tr>
<tr>
<td></td>
<td><code>funcionaFeriados</code></td>
<td><code>Boolean</code></td>
<td></td>
<td>Funciona em feriados</td>
</tr>
<tr>
<td><strong>Licenciamento</strong></td>
<td><code>dataLicenciamento</code></td>
<td><code>LocalDate</code></td>
<td></td>
<td>Data da licen√ßa</td>
</tr>
<tr>
<td></td>
<td><code>numeroLicenca</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>N√∫mero da licen√ßa</td>
</tr>
<tr>
<td></td>
<td><code>orgaoLicenciador</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>ANVISA (padr√£o)</td>
</tr>
</tbody></table>
<h5 id="strong-caractersticas-especiaisstrong"><strong>üéØ Caracter√≠sticas Especiais:</strong></h5><ul>
<li><strong>Hierarquia Institucional:</strong> Suporta rede de hemocentros</li>
<li><strong>Compliance Regulat√≥rio:</strong> Dados ANVISA completos</li>
<li><strong>Gest√£o Operacional:</strong> Capacidade e hor√°rios</li>
<li><strong>Responsabilidade M√©dica:</strong> CRM obrigat√≥rio</li>
</ul>
<h5 id="strong-relacionamentosstrong"><strong>üîó Relacionamentos:</strong></h5><pre><code class="language-java">// 1:N com Users (hemocentro principal dos usu√°rios)
@OneToMany(mappedBy = &quot;hemocentroPrincipal&quot;)
private List&lt;User&gt; usuarios;

// 1:N com Doadores (hemocentro de cadastro)  
@OneToMany(mappedBy = &quot;hemocentroCadastro&quot;)
private List&lt;Doador&gt; doadores;
</code></pre>
<hr>
<h4 id="strong2-userstrong-usurios-do-sistema"><strong>2. User</strong> - üë§ Usu√°rios do Sistema</h4><pre><code class="language-java">@Entity
@Table(name = &quot;USERS&quot;)
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY) 
    @Column(name = &quot;ID_USER&quot;)
    private Long idUser;
    // ... demais campos
}
</code></pre>
<h5 id="strong-estrutura-completastrong"><strong>üìä Estrutura Completa:</strong></h5><table>
<thead>
<tr>
<th><strong>Categoria</strong></th>
<th><strong>Campo</strong></th>
<th><strong>Tipo</strong></th>
<th><strong>Constraint</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Identifica√ß√£o</strong></td>
<td><code>fullName</code></td>
<td><code>String(100)</code></td>
<td><code>NOT NULL</code></td>
<td>Nome completo</td>
</tr>
<tr>
<td></td>
<td><code>cpf</code></td>
<td><code>String(11)</code></td>
<td><code>UNIQUE, NOT NULL</code></td>
<td>CPF √∫nico</td>
</tr>
<tr>
<td></td>
<td><code>email</code></td>
<td><code>String(100)</code></td>
<td><code>UNIQUE, NOT NULL</code></td>
<td>Email para login</td>
</tr>
<tr>
<td><strong>Seguran√ßa</strong></td>
<td><code>senhaHash</code></td>
<td><code>String(255)</code></td>
<td><code>NOT NULL</code></td>
<td>Senha criptografada</td>
</tr>
<tr>
<td><strong>Profissional</strong></td>
<td><code>registroProfissional</code></td>
<td><code>String(20)</code></td>
<td></td>
<td>CRM, COREN, CRF</td>
</tr>
<tr>
<td></td>
<td><code>conselhoClasse</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>CRM, COREN, CRF</td>
</tr>
<tr>
<td></td>
<td><code>ufRegistro</code></td>
<td><code>String(2)</code></td>
<td></td>
<td>Estado do registro</td>
</tr>
<tr>
<td><strong>Contato</strong></td>
<td><code>telefonePrincipal</code></td>
<td><code>String(15)</code></td>
<td></td>
<td>Telefone principal</td>
</tr>
<tr>
<td></td>
<td><code>telefoneSecundario</code></td>
<td><code>String(15)</code></td>
<td></td>
<td>Telefone secund√°rio</td>
</tr>
<tr>
<td><strong>Endere√ßo</strong></td>
<td><code>logradouro</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Endere√ßo residencial</td>
</tr>
<tr>
<td></td>
<td><code>numero</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>N√∫mero</td>
</tr>
<tr>
<td></td>
<td><code>cidade</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>Cidade</td>
</tr>
<tr>
<td></td>
<td><code>estado</code></td>
<td><code>String(2)</code></td>
<td></td>
<td>UF</td>
</tr>
<tr>
<td></td>
<td><code>cep</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>CEP</td>
</tr>
<tr>
<td><strong>Sistema</strong></td>
<td><code>contaAtiva</code></td>
<td><code>Boolean</code></td>
<td></td>
<td>Conta ativa/inativa</td>
</tr>
<tr>
<td></td>
<td><code>lastLogin</code></td>
<td><code>LocalDateTime</code></td>
<td></td>
<td>√öltimo acesso</td>
</tr>
<tr>
<td><strong>Auditoria</strong></td>
<td><code>createdAt</code></td>
<td><code>LocalDateTime</code></td>
<td></td>
<td>Data de cria√ß√£o</td>
</tr>
<tr>
<td></td>
<td><code>updatedAt</code></td>
<td><code>LocalDateTime</code></td>
<td></td>
<td>√öltima atualiza√ß√£o</td>
</tr>
</tbody></table>
<h5 id="strong-relacionamentosstrong"><strong>üîó Relacionamentos:</strong></h5><pre><code class="language-java">// N:1 com UserRole (EAGER - sempre precisa para autoriza√ß√£o)
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = &quot;ID_ROLE&quot;, nullable = false)
private UserRole userRole;

// N:1 com Hemocentro (LAZY - carrega sob demanda)
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_HEMOCENTRO_PRINCIPAL&quot;)
private Hemocentro hemocentroPrincipal;

// 1:N com UserSetor (LAZY - pode ser lista grande)
@OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private List&lt;UserSetor&gt; setores = new ArrayList&lt;&gt;();
</code></pre>
<h5 id="strong-caractersticas-especiaisstrong"><strong>üéØ Caracter√≠sticas Especiais:</strong></h5><ul>
<li><strong>Multi-Setor:</strong> Um usu√°rio pode atuar em v√°rios setores</li>
<li><strong>Rastreabilidade Profissional:</strong> CRM/COREN obrigat√≥rio para m√©dicos</li>
<li><strong>Seguran√ßa:</strong> Senha hash + auditoria de acesso</li>
<li><strong>Flexibilidade:</strong> Endere√ßo e contatos opcionais</li>
</ul>
<hr>
<h4 id="strong3-userrolestrong-perfis-de-acesso"><strong>3. UserRole</strong> - üîê Perfis de Acesso</h4><pre><code class="language-java">@Entity
@Table(name = &quot;USER_ROLES&quot;)
public class UserRole {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_ROLE&quot;)
    private Long idRole;
    
    @Column(name = &quot;NOME_ROLE&quot;, nullable = false, unique = true, length = 50)
    private String nomeRole;
    
    @Column(name = &quot;NIVEL_ACESSO&quot;, nullable = false)
    private Integer nivelAcesso;
    
    @Column(name = &quot;ATIVO&quot;, nullable = false)
    private Boolean ativo = true;
}
</code></pre>
<h5 id="strong-hierarquia-rbacstrong"><strong>üìä Hierarquia RBAC:</strong></h5><table>
<thead>
<tr>
<th><strong>Role</strong></th>
<th><strong>N√≠vel</strong></th>
<th><strong>Permiss√µes</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ADMINISTRADOR</code></td>
<td>4</td>
<td>Acesso total</td>
<td>Gest√£o completa do sistema</td>
</tr>
<tr>
<td><code>MEDICO</code></td>
<td>3</td>
<td>Valida√ß√£o m√©dica + dados cl√≠nicos</td>
<td>Triagem, valida√ß√£o de doen√ßas</td>
</tr>
<tr>
<td><code>ENFERMEIRO</code></td>
<td>3</td>
<td>Triagem + coleta</td>
<td>Procedimentos de enfermagem</td>
</tr>
<tr>
<td><code>ATENDENTE</code></td>
<td>2</td>
<td>Cadastro + agendamento</td>
<td>Atendimento ao p√∫blico</td>
</tr>
</tbody></table>
<h5 id="strong-caractersticasstrong"><strong>üéØ Caracter√≠sticas:</strong></h5><ul>
<li><strong>Hier√°rquico:</strong> N√≠veis num√©ricos para f√°cil compara√ß√£o</li>
<li><strong>Extens√≠vel:</strong> Novos roles facilmente adicionados</li>
<li><strong>Ativa√ß√£o:</strong> Controle de ativo/inativo</li>
<li><strong>√önico:</strong> Nome do role √∫nico no sistema</li>
</ul>
<hr>
<h4 id="strong4-setoratuacaostrong-setores-de-trabalho"><strong>4. SetorAtuacao</strong> - üè¢ Setores de Trabalho</h4><pre><code class="language-java">@Entity
@Table(name = &quot;SETORES_ATUACAO&quot;)
public class SetorAtuacao {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_SETOR&quot;)
    private Long idSetor;

    @Column(name = &quot;NOME_SETOR&quot;, length = 50, nullable = false, unique = true)
    private String nomeSetor;

    @Column(name = &quot;DESCRICAO&quot;, length = 200)
    private String descricao;

    @Column(name = &quot;ATIVO&quot;)
    private Boolean ativo = true;
}
</code></pre>
<h5 id="strong-setores-padrostrong"><strong>üìã Setores Padr√£o:</strong></h5><table>
<thead>
<tr>
<th><strong>Setor</strong></th>
<th><strong>Descri√ß√£o</strong></th>
<th><strong>Exemplo de Atividade</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>TRIAGEM</code></td>
<td>Triagem cl√≠nica e entrevista</td>
<td>Avalia√ß√£o de doadores</td>
</tr>
<tr>
<td><code>COLETA</code></td>
<td>Coleta de sangue</td>
<td>Procedimentos de doa√ß√£o</td>
</tr>
<tr>
<td><code>LABORATORIO</code></td>
<td>An√°lises laboratoriais</td>
<td>Testes de sangue</td>
</tr>
<tr>
<td><code>ADMINISTRACAO</code></td>
<td>Gest√£o administrativa</td>
<td>Controle de sistemas</td>
</tr>
<tr>
<td><code>ESTOQUE</code></td>
<td>Controle de bolsas</td>
<td>Gest√£o de inventory</td>
</tr>
<tr>
<td><code>ATENDIMENTO</code></td>
<td>Recep√ß√£o e atendimento</td>
<td>Atendimento ao p√∫blico</td>
</tr>
<tr>
<td><code>ENFERMAGEM</code></td>
<td>Supervis√£o de enfermagem</td>
<td>Cuidados gerais</td>
</tr>
<tr>
<td><code>DIRECAO_TECNICA</code></td>
<td>Dire√ß√£o t√©cnica</td>
<td>Responsabilidade m√©dica</td>
</tr>
</tbody></table>
<h5 id="strong-caractersticasstrong"><strong>üéØ Caracter√≠sticas:</strong></h5><ul>
<li><strong>Flex√≠vel:</strong> Novos setores facilmente adicionados</li>
<li><strong>√önico:</strong> Nome do setor √∫nico</li>
<li><strong>Soft Delete:</strong> Campo ativo para hist√≥rico</li>
<li><strong>Descritivo:</strong> Descri√ß√£o opcional para documenta√ß√£o</li>
</ul>
<hr>
<h4 id="strong5-usersetorstrong-relacionamento-multi-setor"><strong>5. UserSetor</strong> - üîÑ Relacionamento Multi-Setor</h4><pre><code class="language-java">@Entity
@Table(name = &quot;USER_SETORES&quot;, 
       uniqueConstraints = @UniqueConstraint(columnNames = {&quot;ID_USER&quot;, &quot;ID_SETOR&quot;, &quot;ATIVO&quot;}))
public class UserSetor {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_USER_SETOR&quot;)
    private Long idUserSetor;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_USER&quot;, nullable = false)
    private User user;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_SETOR&quot;, nullable = false)
    private SetorAtuacao setor;

    @Column(name = &quot;IS_SETOR_PRINCIPAL&quot;)
    private Boolean setorPrincipal = false;

    @Column(name = &quot;DATA_INICIO&quot;)
    private LocalDate dataInicio;

    @Column(name = &quot;DATA_FIM&quot;)
    private LocalDate dataFim;

    @Column(name = &quot;OBSERVACOES&quot;, length = 255)
    private String observacoes;

    @Column(name = &quot;ATIVO&quot;)
    private Boolean ativo = true;

    @Column(name = &quot;CREATED_AT&quot;)
    private LocalDateTime createdAt;

    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
        if (dataInicio == null) {
            dataInicio = LocalDate.now();
        }
    }
}
</code></pre>
<h5 id="strong-caractersticas-avanadasstrong"><strong>üéØ Caracter√≠sticas Avan√ßadas:</strong></h5><p><strong>Multi-Setor Simult√¢neo:</strong></p>
<pre><code class="language-java">// Exemplo: Enfermeira Maria
// TRIAGEM (principal) - manh√£
// COLETA (secund√°rio) - tarde  
// EMERGENCIA (eventual) - quando necess√°rio
</code></pre>
<p><strong>Controle Temporal:</strong></p>
<ul>
<li><code>dataInicio</code>: Quando come√ßou no setor</li>
<li><code>dataFim</code>: Quando saiu (para hist√≥rico)</li>
<li><code>ativo</code>: Status atual</li>
</ul>
<p><strong>Setor Principal:</strong></p>
<ul>
<li>Apenas um setor pode ser principal por usu√°rio</li>
<li>Business rule aplicada no service</li>
</ul>
<p><strong>Unique Constraint:</strong></p>
<pre><code class="language-java">@UniqueConstraint(columnNames = {&quot;ID_USER&quot;, &quot;ID_SETOR&quot;, &quot;ATIVO&quot;})
// Impede duplica√ß√£o de usu√°rio no mesmo setor ativo
</code></pre>
<h5 id="strong-relacionamentosstrong"><strong>üîó Relacionamentos:</strong></h5><pre><code class="language-java">// N:1 com User (LAZY - carrega sob demanda)
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_USER&quot;, nullable = false)
private User user;

// N:1 com SetorAtuacao (LAZY - carrega sob demanda)  
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_SETOR&quot;, nullable = false)
private SetorAtuacao setor;
</code></pre>
<hr>
<h3 id="strongagregado-donorstrong-"><strong>AGREGADO DONOR</strong> ü©∏</h3><hr>
<h4 id="strong6-doadorstrong-doadores-de-sangue"><strong>6. Doador</strong> - üë§ Doadores de Sangue</h4><pre><code class="language-java">@Entity
@Table(name = &quot;DOADORES&quot;)
public class Doador {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_DOADOR&quot;)
    private Long idDoador;
    // ... campos extensos
}
</code></pre>
<h5 id="strong-estrutura-completastrong"><strong>üìä Estrutura Completa:</strong></h5><table>
<thead>
<tr>
<th><strong>Categoria</strong></th>
<th><strong>Campo</strong></th>
<th><strong>Tipo</strong></th>
<th><strong>Constraint</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Identifica√ß√£o</strong></td>
<td><code>fullName</code></td>
<td><code>String(100)</code></td>
<td><code>NOT NULL</code></td>
<td>Nome completo</td>
</tr>
<tr>
<td></td>
<td><code>cpf</code></td>
<td><code>String(11)</code></td>
<td><code>UNIQUE, NOT NULL</code></td>
<td>CPF √∫nico</td>
</tr>
<tr>
<td></td>
<td><code>rg</code></td>
<td><code>String(20)</code></td>
<td></td>
<td>RG</td>
</tr>
<tr>
<td></td>
<td><code>orgaoEmissorRg</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>√ìrg√£o emissor</td>
</tr>
<tr>
<td></td>
<td><code>ufRg</code></td>
<td><code>String(2)</code></td>
<td></td>
<td>UF do RG</td>
</tr>
<tr>
<td></td>
<td><code>birthDate</code></td>
<td><code>LocalDate</code></td>
<td><code>NOT NULL</code></td>
<td>Data de nascimento</td>
</tr>
<tr>
<td></td>
<td><code>gender</code></td>
<td><code>String(1)</code></td>
<td><code>NOT NULL</code></td>
<td>M/F/O</td>
</tr>
<tr>
<td><strong>Contato</strong></td>
<td><code>email</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Email pessoal</td>
</tr>
<tr>
<td></td>
<td><code>telefonePrincipal</code></td>
<td><code>String(15)</code></td>
<td></td>
<td>Telefone principal</td>
</tr>
<tr>
<td></td>
<td><code>telefoneSecundario</code></td>
<td><code>String(15)</code></td>
<td></td>
<td>Telefone secund√°rio</td>
</tr>
<tr>
<td></td>
<td><code>preferenciaContato</code></td>
<td><code>String(20)</code></td>
<td></td>
<td>EMAIL/TELEFONE/SMS/WHATSAPP</td>
</tr>
<tr>
<td><strong>Endere√ßo Residencial</strong></td>
<td><code>logradouro</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Rua/Av</td>
</tr>
<tr>
<td></td>
<td><code>numero</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>N√∫mero</td>
</tr>
<tr>
<td></td>
<td><code>complemento</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>Apto/Casa</td>
</tr>
<tr>
<td></td>
<td><code>bairro</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>Bairro</td>
</tr>
<tr>
<td></td>
<td><code>cidade</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>Cidade</td>
</tr>
<tr>
<td></td>
<td><code>estado</code></td>
<td><code>String(2)</code></td>
<td></td>
<td>UF</td>
</tr>
<tr>
<td></td>
<td><code>cep</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>CEP</td>
</tr>
<tr>
<td></td>
<td><code>pontoReferencia</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Ponto de refer√™ncia</td>
</tr>
<tr>
<td><strong>Endere√ßo Profissional</strong></td>
<td><code>empresa</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Nome da empresa</td>
</tr>
<tr>
<td></td>
<td><code>logradouroTrabalho</code></td>
<td><code>String(100)</code></td>
<td></td>
<td>Endere√ßo do trabalho</td>
</tr>
<tr>
<td></td>
<td><code>numeroTrabalho</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>N√∫mero</td>
</tr>
<tr>
<td></td>
<td><code>bairroTrabalho</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>Bairro</td>
</tr>
<tr>
<td></td>
<td><code>cidadeTrabalho</code></td>
<td><code>String(50)</code></td>
<td></td>
<td>Cidade</td>
</tr>
<tr>
<td></td>
<td><code>estadoTrabalho</code></td>
<td><code>String(2)</code></td>
<td></td>
<td>UF</td>
</tr>
<tr>
<td></td>
<td><code>cepTrabalho</code></td>
<td><code>String(10)</code></td>
<td></td>
<td>CEP</td>
</tr>
<tr>
<td><strong>Dados M√©dicos</strong></td>
<td><code>tipoSanguineo</code></td>
<td><code>TipoSanguineo</code></td>
<td><code>NOT NULL</code></td>
<td>Tipo sangu√≠neo</td>
</tr>
<tr>
<td></td>
<td><code>pesoKg</code></td>
<td><code>BigDecimal(5,2)</code></td>
<td></td>
<td>Peso em kg</td>
</tr>
<tr>
<td></td>
<td><code>alturaCm</code></td>
<td><code>Integer</code></td>
<td></td>
<td>Altura em cm</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td><code>statusDoador</code></td>
<td><code>String(20)</code></td>
<td></td>
<td>ATIVO/INATIVO/INAPTO</td>
</tr>
<tr>
<td></td>
<td><code>primeiraDoacao</code></td>
<td><code>Boolean</code></td>
<td></td>
<td>Primeira doa√ß√£o</td>
</tr>
<tr>
<td></td>
<td><code>doadorHabitual</code></td>
<td><code>Boolean</code></td>
<td></td>
<td>3+ doa√ß√µes em 2 anos</td>
</tr>
<tr>
<td><strong>Compliance LGPD</strong></td>
<td><code>aceitaContatoCampanhas</code></td>
<td><code>Boolean</code></td>
<td></td>
<td>Campanhas de doa√ß√£o</td>
</tr>
<tr>
<td></td>
<td><code>aceitaContatoEmergencia</code></td>
<td><code>Boolean</code></td>
<td></td>
<td>Contato emergencial</td>
</tr>
<tr>
<td></td>
<td><code>aceitaPesquisasCientificas</code></td>
<td><code>Boolean</code></td>
<td></td>
<td>Pesquisas cient√≠ficas</td>
</tr>
<tr>
<td><strong>Auditoria</strong></td>
<td><code>createdAt</code></td>
<td><code>LocalDateTime</code></td>
<td></td>
<td>Data de cria√ß√£o</td>
</tr>
<tr>
<td></td>
<td><code>updatedAt</code></td>
<td><code>LocalDateTime</code></td>
<td></td>
<td>√öltima atualiza√ß√£o</td>
</tr>
<tr>
<td></td>
<td><code>cadastradoPor</code></td>
<td><code>User</code></td>
<td><code>NOT NULL</code></td>
<td>Usu√°rio que cadastrou</td>
</tr>
<tr>
<td></td>
<td><code>deletedAt</code></td>
<td><code>LocalDateTime</code></td>
<td></td>
<td>Soft delete</td>
</tr>
</tbody></table>
<h5 id="strong-caractersticas-especiaisstrong"><strong>üéØ Caracter√≠sticas Especiais:</strong></h5><p><strong>Endere√ßamento Dual:</strong></p>
<ul>
<li>Endere√ßo residencial completo</li>
<li>Endere√ßo profissional opcional</li>
<li>Flexibilidade para diferentes cen√°rios de contato</li>
</ul>
<p><strong>Compliance LGPD:</strong></p>
<pre><code class="language-java">@Column(name = &quot;ACEITA_CONTATO_CAMPANHAS&quot;)
private Boolean aceitaContatoCampanhas; // Campanhas de doa√ß√£o

@Column(name = &quot;ACEITA_CONTATO_EMERGENCIA&quot;)  
private Boolean aceitaContatoEmergencia; // Emerg√™ncias m√©dicas

@Column(name = &quot;ACEITA_PESQUISAS_CIENTIFICAS&quot;)
private Boolean aceitaPesquisasCientificas; // Pesquisas
</code></pre>
<p><strong>Dados M√©dicos Precisos:</strong></p>
<pre><code class="language-java">@Column(name = &quot;PESO_KG&quot;, precision = 5, scale = 2)
private BigDecimal pesoKg; // Ex: 070.50 kg

@ManyToOne
@JoinColumn(name = &quot;ID_TIPO_SANGUINEO&quot;, nullable = false)
private TipoSanguineo tipoSanguineo; // Relacionamento obrigat√≥rio
</code></pre>
<h5 id="strong-relacionamentosstrong"><strong>üîó Relacionamentos:</strong></h5><pre><code class="language-java">// N:1 com TipoSanguineo (EAGER - sempre necess√°rio)
@ManyToOne
@JoinColumn(name = &quot;ID_TIPO_SANGUINEO&quot;, nullable = false)
private TipoSanguineo tipoSanguineo;

// N:1 com Hemocentro (LAZY - carrega sob demanda)
@ManyToOne
@JoinColumn(name = &quot;ID_HEMOCENTRO_CADASTRO&quot;)
private Hemocentro hemocentroCadastro;

// N:1 com User para auditoria (LAZY)
@ManyToOne
@JoinColumn(name = &quot;CADASTRADO_POR&quot;, nullable = false)
private User cadastradoPor;

// 1:N com DoadorDoenca (LAZY - pode ser lista grande)
@OneToMany(mappedBy = &quot;doador&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private List&lt;DoadorDoenca&gt; doencas = new ArrayList&lt;&gt;();
</code></pre>
<hr>
<h4 id="strong7-tiposanguineostrong-tipos-sanguneos"><strong>7. TipoSanguineo</strong> - üß¨ Tipos Sangu√≠neos</h4><pre><code class="language-java">@Entity
@Table(name = &quot;TIPOS_SANGUINEOS&quot;)
public class TipoSanguineo {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_TIPO&quot;)
    private Long idTipoSanguineo;

    @Column(name = &quot;TIPO_ABO&quot;, length = 2, nullable = false)
    private String tipoAbo; // A, B, AB, O

    @Column(name = &quot;FATOR_RH&quot;, length = 1, nullable = false)
    private String fatorRh; // +, -

    @Column(name = &quot;DESCRICAO_COMPLETA&quot;, length = 5, nullable = false, unique = true)
    private String descricaoCompleta; // A+, O-, etc.

    @Column(name = &quot;PODE_DOAR_PARA&quot;, length = 100)
    private String podeDoarPara; // Lista de tipos compat√≠veis

    @Column(name = &quot;PODE_RECEBER_DE&quot;, length = 100)
    private String podeReceberDe; // Lista de tipos compat√≠veis

    @Column(name = &quot;PREVALENCIA_PERCENTUAL&quot;, precision = 5, scale = 2)
    private BigDecimal prevalenciaPercentual; // % na popula√ß√£o

    @Column(name = &quot;ATIVO&quot;)
    private Boolean ativo;

    @Column(name = &quot;CREATED_AT&quot;)
    private LocalDateTime createdAt;

    @Column(name = &quot;UPDATED_AT&quot;)
    private LocalDateTime updatedAt;
}
</code></pre>
<h5 id="strong-tipos-sanguneos-e-compatibilidadestrong"><strong>üìä Tipos Sangu√≠neos e Compatibilidade:</strong></h5><table>
<thead>
<tr>
<th><strong>Tipo</strong></th>
<th><strong>Pode Doar Para</strong></th>
<th><strong>Pode Receber De</strong></th>
<th><strong>Preval√™ncia (%)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>O-</code></td>
<td>Todos</td>
<td>O-</td>
<td>6.6%</td>
</tr>
<tr>
<td><code>O+</code></td>
<td>O+, A+, B+, AB+</td>
<td>O-, O+</td>
<td>36.0%</td>
</tr>
<tr>
<td><code>A-</code></td>
<td>A-, A+, AB-, AB+</td>
<td>O-, A-</td>
<td>6.2%</td>
</tr>
<tr>
<td><code>A+</code></td>
<td>A+, AB+</td>
<td>O-, O+, A-, A+</td>
<td>34.4%</td>
</tr>
<tr>
<td><code>B-</code></td>
<td>B-, B+, AB-, AB+</td>
<td>O-, B-</td>
<td>1.4%</td>
</tr>
<tr>
<td><code>B+</code></td>
<td>B+, AB+</td>
<td>O-, O+, B-, B+</td>
<td>8.5%</td>
</tr>
<tr>
<td><code>AB-</code></td>
<td>AB-, AB+</td>
<td>O-, A-, B-, AB-</td>
<td>0.6%</td>
</tr>
<tr>
<td><code>AB+</code></td>
<td>AB+</td>
<td>Todos</td>
<td>2.5%</td>
</tr>
</tbody></table>
<h5 id="strong-caractersticas-especiaisstrong"><strong>üéØ Caracter√≠sticas Especiais:</strong></h5><p><strong>Modelagem Cient√≠fica:</strong></p>
<pre><code class="language-java">// Constraints do banco de dados
CHECK (TIPO_ABO IN (&#39;A&#39;, &#39;B&#39;, &#39;AB&#39;, &#39;O&#39;))
CHECK (FATOR_RH IN (&#39;+&#39;, &#39;-&#39;))
</code></pre>
<p><strong>Business Logic Integrada:</strong></p>
<pre><code class="language-java">// Strings permitem l√≥gica flex√≠vel
private String podeDoarPara; // &quot;O+,A+,B+,AB+&quot;
private String podeReceberDe; // &quot;O-,O+&quot;

// Dados epidemiol√≥gicos para dashboard
private BigDecimal prevalenciaPercentual; // 36.0 para O+
</code></pre>
<p><strong>Unique Constraint:</strong></p>
<pre><code class="language-java">@Column(unique = true)
private String descricaoCompleta; // Impede duplica√ß√£o (A+, A+)
</code></pre>
<hr>
<h4 id="strong8-doencaespecificastrong-catlogo-de-doenas"><strong>8. DoencaEspecifica</strong> - üè• Cat√°logo de Doen√ßas</h4><pre><code class="language-java">@Entity
@Table(name = &quot;DOENCAS_ESPECIFICAS&quot;)
public class DoencaEspecifica {
    @Id
    @Column(name = &quot;ID_DOENCA&quot;)
    private Integer idDoenca; // ID FIXO para controle estat√≠stico
    
    @Column(name = &quot;NOME_DOENCA&quot;, length = 100, nullable = false)
    private String nomeDoenca;
    
    @Column(name = &quot;CATEGORIA&quot;, length = 50, nullable = false)
    private String categoria;
    
    @Column(name = &quot;IMPEDE_DOACAO&quot;, nullable = false)
    private Boolean impedeDoacao;
    
    @Column(name = &quot;OBSERVACOES&quot;, length = 255)
    private String observacoes;
    
    @Column(name = &quot;ATIVO&quot;)
    private Boolean ativo = true;
}
</code></pre>
<h5 id="strong-categorizao-por-ids-fixosstrong"><strong>üìã Categoriza√ß√£o por IDs Fixos:</strong></h5><table>
<thead>
<tr>
<th><strong>Categoria</strong></th>
<th><strong>Range IDs</strong></th>
<th><strong>Exemplos</strong></th>
<th><strong>Caracter√≠sticas</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>CARDIOVASCULAR</strong></td>
<td>1-10</td>
<td>Hipertens√£o (1), Infarto (2)</td>
<td>Doen√ßas do cora√ß√£o</td>
</tr>
<tr>
<td><strong>METABOLICA</strong></td>
<td>11-20</td>
<td>Diabetes Tipo 1 (11), Tipo 2 (12)</td>
<td>Dist√∫rbios metab√≥licos</td>
</tr>
<tr>
<td><strong>HEMATOLOGICA</strong></td>
<td>21-30</td>
<td>Anemia (21), Hemofilia (24)</td>
<td>Doen√ßas do sangue</td>
</tr>
<tr>
<td><strong>INFECCIOSA</strong></td>
<td>31-50</td>
<td>Hepatite B (31), HIV (33)</td>
<td>Doen√ßas transmiss√≠veis</td>
</tr>
<tr>
<td><strong>RESPIRATORIA</strong></td>
<td>51-60</td>
<td>Asma (51), DPOC (52)</td>
<td>Sistema respirat√≥rio</td>
</tr>
<tr>
<td><strong>NEUROLOGICA</strong></td>
<td>61-70</td>
<td>Epilepsia (61)</td>
<td>Sistema nervoso</td>
</tr>
<tr>
<td><strong>AUTOIMUNE</strong></td>
<td>71-80</td>
<td>L√∫pus (71)</td>
<td>Doen√ßas autoimunes</td>
</tr>
<tr>
<td><strong>PSIQUIATRICA</strong></td>
<td>81-90</td>
<td>Depress√£o (81)</td>
<td>Sa√∫de mental</td>
</tr>
<tr>
<td><strong>OUTRAS</strong></td>
<td>91-100</td>
<td>C√¢ncer (91)</td>
<td>Outras condi√ß√µes</td>
</tr>
</tbody></table>
<h5 id="strong-design-estratgicostrong"><strong>üéØ Design Estrat√©gico:</strong></h5><p><strong>IDs Fixos para Estat√≠sticas:</strong></p>
<pre><code class="language-java">@Id
@Column(name = &quot;ID_DOENCA&quot;)
private Integer idDoenca; // SEM @GeneratedValue
</code></pre>
<p><strong>Vantagem:</strong> Dashboard pode fazer estat√≠sticas consistentes por doen√ßa espec√≠fica.</p>
<p><strong>Categoriza√ß√£o Flex√≠vel:</strong></p>
<pre><code class="language-java">@Column(name = &quot;CATEGORIA&quot;, length = 50, nullable = false)
private String categoria; // CARDIOVASCULAR, METABOLICA, etc.
</code></pre>
<p><strong>Decis√£o Autom√°tica:</strong></p>
<pre><code class="language-java">@Column(name = &quot;IMPEDE_DOACAO&quot;, nullable = false)
private Boolean impedeDoacao; // true = impede, false = permite com avalia√ß√£o
</code></pre>
<h5 id="strong-exemplos-de-doenasstrong"><strong>üìä Exemplos de Doen√ßas:</strong></h5><pre><code class="language-java">// Diabetes Tipo 1 - Impede doa√ß√£o
ID: 11, Nome: &quot;Diabetes Mellitus Tipo 1&quot;, Categoria: &quot;METABOLICA&quot;, 
Impede: true, Obs: &quot;Impede doa√ß√£o definitivamente&quot;

// Hipertens√£o - Permite com controle
ID: 1, Nome: &quot;Hipertens√£o Arterial&quot;, Categoria: &quot;CARDIOVASCULAR&quot;, 
Impede: false, Obs: &quot;Permitido se controlada sem medica√ß√£o incompat√≠vel&quot;

// HIV - Impede doa√ß√£o
ID: 33, Nome: &quot;HIV/AIDS&quot;, Categoria: &quot;INFECCIOSA&quot;, 
Impede: true, Obs: &quot;Impede doa√ß√£o definitivamente&quot;
</code></pre>
<hr>
<h4 id="strong9-doadordoencastrong-histrico-mdico-com-validao"><strong>9. DoadorDoenca</strong> - ü©∫ Hist√≥rico M√©dico com Valida√ß√£o</h4><pre><code class="language-java">@Entity
@Table(name = &quot;DOADOR_DOENCAS&quot;,
       uniqueConstraints = @UniqueConstraint(columnNames = {&quot;ID_DOADOR&quot;, &quot;ID_DOENCA&quot;}))
public class DoadorDoenca {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_DOADOR_DOENCA&quot;)
    private Long idDoadorDoenca;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_DOADOR&quot;, nullable = false)
    private Doador doador;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_DOENCA&quot;, nullable = false)
    private DoencaEspecifica doenca;

    @Column(name = &quot;DATA_DIAGNOSTICO&quot;)
    private LocalDate dataDiagnostico;

    @Enumerated(EnumType.STRING)
    @Column(name = &quot;STATUS_ATUAL&quot;, length = 20)
    private StatusDoenca statusAtual = StatusDoenca.ATIVO;

    @Enumerated(EnumType.STRING)
    @Column(name = &quot;ORIGEM_DETECCAO&quot;, length = 20, nullable = false)
    private OrigemDeteccao origemDeteccao = OrigemDeteccao.DECLARADA_DOADOR;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_PROFISSIONAL_DETECTOR&quot;)
    private User profissionalDetector;

    @Column(name = &quot;VALIDADO_POR_MEDICO&quot;)
    private Boolean validadoPorMedico = false;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_MEDICO_VALIDADOR&quot;)
    private User medicoValidador;

    @Column(name = &quot;DATA_VALIDACAO_MEDICA&quot;)
    private LocalDateTime dataValidacaoMedica;

    @Column(name = &quot;OBSERVACOES&quot;, length = 255)
    private String observacoes;

    @Column(name = &quot;OBSERVACOES_MEDICAS&quot;, length = 500)
    private String observacoesMedicas;

    @Column(name = &quot;CADASTRADO_EM&quot;)
    private LocalDateTime cadastradoEm;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;CADASTRADO_POR&quot;, nullable = false)
    private User cadastradoPor;

    @PrePersist
    protected void onCreate() {
        cadastradoEm = LocalDateTime.now();
    }
}
</code></pre>
<h5 id="strong-workflow-mdico-hbridostrong"><strong>üéØ Workflow M√©dico H√≠brido:</strong></h5><p><strong>Cen√°rio 1 - Doador Declara:</strong></p>
<pre><code class="language-java">// 1. Doador informa que tem diabetes
DoadorDoenca diabetes = new DoadorDoenca();
diabetes.setOrigemDeteccao(DECLARADA_DOADOR);
diabetes.setValidadoPorMedico(false); // Aguarda valida√ß√£o
diabetes.setCadastradoPor(atendente);

// 2. M√©dico valida depois
diabetes.setValidadoPorMedico(true);
diabetes.setMedicoValidador(medico);
diabetes.setDataValidacaoMedica(LocalDateTime.now());
</code></pre>
<p><strong>Cen√°rio 2 - M√©dico Detecta:</strong></p>
<pre><code class="language-java">// M√©dico detecta hipertens√£o durante triagem
DoadorDoenca hipertensao = new DoadorDoenca();
hipertensao.setOrigemDeteccao(DETECTADA_MEDICO);
hipertensao.setProfissionalDetector(medico);
hipertensao.setValidadoPorMedico(true); // J√° validado
hipertensao.setMedicoValidador(medico);
</code></pre>
<p><strong>Cen√°rio 3 - Exame Laboratorial:</strong></p>
<pre><code class="language-java">// Resultado de exame detecta doen√ßa
DoadorDoenca hepatite = new DoadorDoenca();
hepatite.setOrigemDeteccao(EXAME_LABORATORIAL);
hepatite.setValidadoPorMedico(false); // M√©dico deve avaliar resultado
</code></pre>
<h5 id="strong-estados-da-doenastrong"><strong>üìä Estados da Doen√ßa:</strong></h5><pre><code class="language-java">public enum StatusDoenca {
    ATIVO,      // Doen√ßa ativa/presente
    CURADO,     // Doen√ßa curada/superada  
    CONTROLADO  // Doen√ßa controlada com tratamento
}

public enum OrigemDeteccao {
    DECLARADA_DOADOR,      // Doador informou
    DETECTADA_MEDICO,      // M√©dico detectou
    EXAME_LABORATORIAL     // Resultado de exame
}
</code></pre>
<h5 id="strong-integridade-de-dadosstrong"><strong>üîí Integridade de Dados:</strong></h5><p><strong>Unique Constraint:</strong></p>
<pre><code class="language-java">@UniqueConstraint(columnNames = {&quot;ID_DOADOR&quot;, &quot;ID_DOENCA&quot;})
// Um doador n√£o pode ter a mesma doen√ßa duplicada
</code></pre>
<p><strong>Relacionamentos Obrigat√≥rios:</strong></p>
<pre><code class="language-java">@JoinColumn(name = &quot;ID_DOADOR&quot;, nullable = false)   // Doador obrigat√≥rio
@JoinColumn(name = &quot;ID_DOENCA&quot;, nullable = false)   // Doen√ßa obrigat√≥ria  
@JoinColumn(name = &quot;CADASTRADO_POR&quot;, nullable = false) // Auditoria obrigat√≥ria
</code></pre>
<h5 id="strong-rastreabilidade-completastrong"><strong>üìà Rastreabilidade Completa:</strong></h5><pre><code class="language-java">// Quem cadastrou
private User cadastradoPor;          // Usu√°rio que registrou
private LocalDateTime cadastradoEm;  // Quando foi registrado

// Quem detectou (se aplic√°vel)
private User profissionalDetector;   // M√©dico que detectou

// Quem validou
private User medicoValidador;           // M√©dico que validou
private LocalDateTime dataValidacaoMedica; // Quando foi validado
private Boolean validadoPorMedico;      // Status de valida√ß√£o
</code></pre>
<hr>
<h4 id="strong10-consentimentolgpdstrong-compliance-de-privacidade"><strong>10. ConsentimentoLgpd</strong> - üîí Compliance de Privacidade</h4><pre><code class="language-java">@Entity
@Table(name = &quot;CONSENTIMENTOS_LGPD&quot;)
public class ConsentimentoLgpd {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_CONSENTIMENTO&quot;)
    private Long idConsentimento;
    
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_DOADOR&quot;, nullable = false)
    private Doador doador;
    
    @Column(name = &quot;TIPO_CONSENTIMENTO&quot;, length = 50, nullable = false)
    private String tipoConsentimento; // CADASTRO, CONTATO, PESQUISA
    
    @Column(name = &quot;CONSENTIMENTO_DADO&quot;, nullable = false)
    private Boolean consentimentoDado;
    
    @Column(name = &quot;FINALIDADE&quot;, length = 255, nullable = false)
    private String finalidade;
    
    @Column(name = &quot;DATA_CONSENTIMENTO&quot;)
    private LocalDateTime dataConsentimento;
    
    @Column(name = &quot;DATA_REVOGACAO&quot;)
    private LocalDateTime dataRevogacao;
}
</code></pre>
<h5 id="strong-tipos-de-consentimentostrong"><strong>üìã Tipos de Consentimento:</strong></h5><table>
<thead>
<tr>
<th><strong>Tipo</strong></th>
<th><strong>Finalidade</strong></th>
<th><strong>Exemplo</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>CADASTRO</code></td>
<td>Armazenamento de dados pessoais</td>
<td>&quot;Autorizo armazenamento dos meus dados para doa√ß√£o&quot;</td>
</tr>
<tr>
<td><code>CONTATO</code></td>
<td>Comunica√ß√£o para campanhas</td>
<td>&quot;Aceito receber contatos sobre campanhas de doa√ß√£o&quot;</td>
</tr>
<tr>
<td><code>EMERGENCIA</code></td>
<td>Contato em emerg√™ncias</td>
<td>&quot;Autorizo contato em situa√ß√µes de emerg√™ncia m√©dica&quot;</td>
</tr>
<tr>
<td><code>PESQUISA</code></td>
<td>Participa√ß√£o em pesquisas</td>
<td>&quot;Aceito participar de pesquisas cient√≠ficas&quot;</td>
</tr>
<tr>
<td><code>MARKETING</code></td>
<td>Comunica√ß√µes promocionais</td>
<td>&quot;Aceito receber newsletters e materiais informativos&quot;</td>
</tr>
</tbody></table>
<h5 id="strong-caractersticas-lgpdstrong"><strong>üéØ Caracter√≠sticas LGPD:</strong></h5><p><strong>Granularidade:</strong></p>
<ul>
<li>Consentimentos espec√≠ficos por finalidade</li>
<li>Possibilidade de aceitar uns e recusar outros</li>
</ul>
<p><strong>Rastreabilidade:</strong></p>
<pre><code class="language-java">private LocalDateTime dataConsentimento; // Quando foi dado
private LocalDateTime dataRevogacao;     // Quando foi revogado (se aplic√°vel)
</code></pre>
<p><strong>Flexibilidade:</strong></p>
<pre><code class="language-java">private Boolean consentimentoDado; // true = aceito, false = recusado
// Permite hist√≥rico de mudan√ßas de opini√£o
</code></pre>
<hr>
<h3 id="1-stronguserstrong-usurios-do-sistema">1. <strong>User</strong> - Usu√°rios do Sistema</h3><pre><code class="language-java">@Entity
@Table(name=&quot;USERS&quot;)
public class User {
    // Campos e relacionamentos...
}
</code></pre>
<h4 id="strong-campos-principaisstrong"><strong>üìä Campos Principais:</strong></h4><table>
<thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Anota√ß√£o</th>
<th>Descri√ß√£o</th>
</tr>
</thead>
<tbody><tr>
<td><code>idUser</code></td>
<td><code>Long</code></td>
<td><code>@Id @GeneratedValue</code></td>
<td>PK auto-incremento</td>
</tr>
<tr>
<td><code>fullName</code></td>
<td><code>String(100)</code></td>
<td><code>@Column(nullable=false)</code></td>
<td>Nome completo obrigat√≥rio</td>
</tr>
<tr>
<td><code>cpf</code></td>
<td><code>String(11)</code></td>
<td><code>@Column(unique=true)</code></td>
<td>CPF √∫nico no sistema</td>
</tr>
<tr>
<td><code>email</code></td>
<td><code>String(100)</code></td>
<td><code>@Column(unique=true)</code></td>
<td>Email √∫nico para login</td>
</tr>
<tr>
<td><code>senhaHash</code></td>
<td><code>String(255)</code></td>
<td><code>@Column(nullable=false)</code></td>
<td>Senha criptografada</td>
</tr>
</tbody></table>
<h4 id="strong-dados-profissionaisstrong"><strong>üè• Dados Profissionais:</strong></h4><pre><code class="language-java">@Column(name = &quot;REGISTRO_PROFISSIONAL&quot;, length = 20)
private String registroProfissional; // CRM, COREN, CRF, etc.

@Column(name = &quot;CONSELHO_CLASSE&quot;, length = 10) 
private String conselhoClasse; // CRM, COREN, CRF

@Column(name = &quot;UF_REGISTRO&quot;, length = 2)
private String ufRegistro; // Estado do registro
</code></pre>
<p><strong>üí° Explica√ß√£o:</strong> Permite rastreabilidade profissional completa, essencial para responsabilidade m√©dica e auditoria.</p>
<h4 id="strong-endereo-completostrong"><strong>üè† Endere√ßo Completo:</strong></h4><pre><code class="language-java">@Column(name = &quot;LOGRADOURO&quot;, length = 100)
private String logradouro;
// ... demais campos de endere√ßo
</code></pre>
<p><strong>üí° Explica√ß√£o:</strong> Endere√ßo completo para contato e documenta√ß√£o institucional.</p>
<h4 id="strong-relacionamentosstrong"><strong>üîó Relacionamentos:</strong></h4><pre><code class="language-java">// Relacionamento com Role (N:1)
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = &quot;ID_ROLE&quot;, nullable = false)
private UserRole userRole;

// Relacionamento com Hemocentro (N:1)
@ManyToOne(fetch = FetchType.LAZY)  
@JoinColumn(name = &quot;ID_HEMOCENTRO_PRINCIPAL&quot;)
private Hemocentro hemocentroPrincipal;

// Relacionamento com Setores (1:N) - NOVO FASE 1
@OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private List&lt;UserSetor&gt; setores = new ArrayList&lt;&gt;();
</code></pre>
<p><strong>üéØ Estrat√©gias de Fetch:</strong></p>
<ul>
<li><strong>EAGER</strong> para <code>userRole</code>: Sempre necess√°rio para autoriza√ß√£o</li>
<li><strong>LAZY</strong> para <code>hemocentroPrincipal</code>: Carregado sob demanda</li>
<li><strong>LAZY</strong> para <code>setores</code>: Lista pode ser grande, carrega quando necess√°rio</li>
</ul>
<hr>
<h3 id="2-stronguserrolestrong-perfis-de-acesso">2. <strong>UserRole</strong> - Perfis de Acesso</h3><pre><code class="language-java">@Entity
@Table(name = &quot;USER_ROLES&quot;)
public class UserRole {
    // Implementa√ß√£o...
}
</code></pre>
<h4 id="strong-estrutura-rbac-role-based-access-controlstrong"><strong>üìä Estrutura RBAC (Role-Based Access Control):</strong></h4><pre><code class="language-java">@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = &quot;ID_ROLE&quot;)
private Long idRole;

@Column(name = &quot;NOME_ROLE&quot;, nullable = false, unique = true, length = 50)
private String nomeRole; // ADMINISTRADOR, MEDICO, ENFERMEIRO, ATENDENTE

@Column(name = &quot;NIVEL_ACESSO&quot;, nullable = false)
private Integer nivelAcesso; // 1=B√°sico, 2=Intermedi√°rio, 3=Avan√ßado, 4=Admin

@Column(name = &quot;ATIVO&quot;, nullable = false)
private Boolean ativo = true;
</code></pre>
<p><strong>üí° Hierarquia de Acesso:</strong></p>
<ul>
<li><strong>N√≠vel 4 (ADMINISTRADOR):</strong> Acesso total ao sistema</li>
<li><strong>N√≠vel 3 (MEDICO/ENFERMEIRO):</strong> Valida√ß√£o m√©dica + dados cl√≠nicos</li>
<li><strong>N√≠vel 2 (ATENDENTE):</strong> Cadastro b√°sico + agendamentos</li>
<li><strong>N√≠vel 1 (Futuro):</strong> Consulta limitada</li>
</ul>
<hr>
<h3 id="3-strongdoadorstrong-doadores-de-sangue">3. <strong>Doador</strong> - Doadores de Sangue</h3><pre><code class="language-java">@Entity
@Table(name = &quot;DOADORES&quot;)
public class Doador {
    // Implementa√ß√£o completa...
}
</code></pre>
<h4 id="strong-dados-pessoais-bsicosstrong"><strong>üë§ Dados Pessoais B√°sicos:</strong></h4><pre><code class="language-java">@Column(name = &quot;FULL_NAME&quot;, length = 100, nullable = false)
private String fullName;

@Column(name = &quot;CPF&quot;, length = 11, nullable = false, unique = true)
private String cpf;

@Column(name = &quot;RG&quot;, length = 20)
private String rg;

@Column(name = &quot;BIRTH_DATE&quot;, nullable = false)
private LocalDate birthDate;

@Column(name = &quot;GENDER&quot;, length = 1, nullable = false)
private String gender; // M, F, O
</code></pre>
<p><strong>üí° Constraint Check:</strong> O banco implementa <code>CHECK (GENDER IN (&#39;M&#39;,&#39;F&#39;,&#39;O&#39;))</code> para valida√ß√£o.</p>
<h4 id="strong-sistema-de-endereos-dualstrong"><strong>üè† Sistema de Endere√ßos Dual:</strong></h4><pre><code class="language-java">// Endere√ßo Residencial
@Column(name = &quot;LOGRADOURO&quot;, length = 100)
private String logradouro;
// ... campos residenciais

// Endere√ßo Profissional  
@Column(name = &quot;LOGRADOURO_TRABALHO&quot;, length = 100)
private String logradouroTrabalho;
// ... campos profissionais
</code></pre>
<p><strong>üí° Design Avan√ßado:</strong> Suporta dois endere√ßos completos para maior flexibilidade de contato.</p>
<h4 id="strong-dados-mdicosstrong"><strong>ü©∏ Dados M√©dicos:</strong></h4><pre><code class="language-java">@ManyToOne
@JoinColumn(name = &quot;ID_TIPO_SANGUINEO&quot;, nullable = false)
private TipoSanguineo tipoSanguineo;

@Column(name = &quot;PESO_KG&quot;, precision = 5, scale = 2)
private BigDecimal pesoKg; // Precis√£o decimal para peso

@Column(name = &quot;ALTURA_CM&quot;)
private Integer alturaCm;
</code></pre>
<p><strong>üí° Tipos de Dados:</strong> <code>BigDecimal</code> para peso garante precis√£o em c√°lculos m√©dicos.</p>
<h4 id="strong-compliance-lgpdstrong"><strong>üîí Compliance LGPD:</strong></h4><pre><code class="language-java">@Column(name = &quot;ACEITA_CONTATO_CAMPANHAS&quot;)
private Boolean aceitaContatoCampanhas;

@Column(name = &quot;ACEITA_CONTATO_EMERGENCIA&quot;) 
private Boolean aceitaContatoEmergencia;

@Column(name = &quot;ACEITA_PESQUISAS_CIENTIFICAS&quot;)
private Boolean aceitaPesquisasCientificas;
</code></pre>
<p><strong>üí° Privacidade:</strong> Consentimentos granulares para diferentes finalidades.</p>
<h4 id="strong-relacionamentosstrong"><strong>üîó Relacionamentos:</strong></h4><pre><code class="language-java">// Relacionamento com Doen√ßas (1:N) - NOVO FASE 1
@OneToMany(mappedBy = &quot;doador&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private List&lt;DoadorDoenca&gt; doencas = new ArrayList&lt;&gt;();

// Auditoria
@ManyToOne
@JoinColumn(name = &quot;CADASTRADO_POR&quot;, nullable = false)
private User cadastradoPor;

// Soft Delete
@Column(name = &quot;DELETED_AT&quot;)
private LocalDateTime deletedAt;
</code></pre>
<p><strong>üí° Cascade ALL:</strong> Doen√ßas s√£o removidas automaticamente se doador for exclu√≠do.</p>
<hr>
<h3 id="4-strongtiposanguineostrong-tipos-sanguneos-aborh">4. <strong>TipoSanguineo</strong> - Tipos Sangu√≠neos ABO/RH</h3><pre><code class="language-java">@Entity
@Table(name = &quot;TIPOS_SANGUINEOS&quot;)
public class TipoSanguineo {
    // Implementa√ß√£o cient√≠fica...
}
</code></pre>
<h4 id="strong-modelagem-cientficastrong"><strong>üß¨ Modelagem Cient√≠fica:</strong></h4><pre><code class="language-java">@Column(name = &quot;TIPO_ABO&quot;, length = 2, nullable = false)
private String tipoAbo; // A, B, AB, O

@Column(name = &quot;FATOR_RH&quot;, length = 1, nullable = false)  
private String fatorRh; // +, -

@Column(name = &quot;DESCRICAO_COMPLETA&quot;, length = 5, nullable = false, unique = true)
private String descricaoCompleta; // A+, O-, etc.
</code></pre>
<p><strong>üí° Constraint:</strong> Banco valida <code>CHECK (TIPO_ABO IN (&#39;A&#39;, &#39;B&#39;, &#39;AB&#39;, &#39;O&#39;))</code> e <code>CHECK (FATOR_RH IN (&#39;+&#39;, &#39;-&#39;))</code>.</p>
<h4 id="strong-regras-de-compatibilidadestrong"><strong>üîÑ Regras de Compatibilidade:</strong></h4><pre><code class="language-java">@Column(name = &quot;PODE_DOAR_PARA&quot;, length = 100)
private String podeDoarPara; // &quot;O+,A+,B+,AB+&quot;

@Column(name = &quot;PODE_RECEBER_DE&quot;, length = 100) 
private String podeReceberDe; // &quot;O-,O+&quot;

@Column(name = &quot;PREVALENCIA_PERCENTUAL&quot;, precision = 5, scale = 2)
private BigDecimal prevalenciaPercentual; // 36.0 para O+
</code></pre>
<p><strong>üí° Business Logic:</strong> Strings permitem l√≥gica flex√≠vel de compatibilidade + dados epidemiol√≥gicos.</p>
<hr>
<h3 id="5-stronghemocentrostrong-instituies-de-sade">5. <strong>Hemocentro</strong> - Institui√ß√µes de Sa√∫de</h3><pre><code class="language-java">@Entity
@Table(name = &quot;HEMOCENTROS&quot;)
public class Hemocentro {
    // Implementa√ß√£o institucional...
}
</code></pre>
<h4 id="strong-dados-institucionaisstrong"><strong>üè• Dados Institucionais:</strong></h4><pre><code class="language-java">@Column(name = &quot;CODIGO_HEMOCENTRO&quot;, length = 20, nullable = false, unique = true)
private String codigoHemocentro; // C√≥digo ANVISA/MS

@Column(name = &quot;CNPJ&quot;, length = 14, unique = true)
private String cnpj;

@Column(name = &quot;TIPO_HEMOCENTRO&quot;, length = 30, nullable = false)
private String tipoHemocentro; // COORDENADOR, REGIONAL, LOCAL, NUCLEO
</code></pre>
<p><strong>üí° Classifica√ß√£o:</strong> Suporta hierarquia completa da rede de hemocentros.</p>
<h4 id="strong-responsabilidade-tcnicastrong"><strong>üë®‚Äç‚öïÔ∏è Responsabilidade T√©cnica:</strong></h4><pre><code class="language-java">@Column(name = &quot;DIRETOR_TECNICO&quot;, length = 100)
private String diretorTecnico;

@Column(name = &quot;CRM_DIRETOR&quot;, length = 20)
private String crmDiretor;

@Column(name = &quot;RESPONSAVEL_TECNICO&quot;, length = 100)
private String responsavelTecnico;
</code></pre>
<p><strong>üí° Compliance:</strong> Atende exig√™ncias legais de responsabilidade m√©dica.</p>
<h4 id="strong-dados-operacionaisstrong"><strong>‚öôÔ∏è Dados Operacionais:</strong></h4><pre><code class="language-java">@Column(name = &quot;CAPACIDADE_COLETAS_DIA&quot;)
private Integer capacidadeColetasDia;

@Column(name = &quot;HORARIO_FUNCIONAMENTO&quot;, length = 100)
private String horarioFuncionamento; // &quot;07:00-17:00&quot;

@Column(name = &quot;FUNCIONA_FERIADOS&quot;)
private Boolean funcionaFeriados;
</code></pre>
<p><strong>üí° Planejamento:</strong> Suporta gest√£o operacional e agendamentos.</p>
<hr>
<h2 id="-entidades-fase-1-implementadas">üöÄ Entidades FASE 1 (Implementadas)</h2><h3 id="6-strongsetoratuacaostrong-setores-de-trabalho">6. <strong>SetorAtuacao</strong> - Setores de Trabalho</h3><pre><code class="language-java">@Entity
@Table(name = &quot;SETORES_ATUACAO&quot;)
public class SetorAtuacao {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_SETOR&quot;)
    private Long idSetor;

    @Column(name = &quot;NOME_SETOR&quot;, length = 50, nullable = false, unique = true)
    private String nomeSetor;

    @Column(name = &quot;DESCRICAO&quot;, length = 200)
    private String descricao;

    @Column(name = &quot;ATIVO&quot;)
    private Boolean ativo = true;
}
</code></pre>
<h4 id="strong-caractersticasstrong"><strong>üéØ Caracter√≠sticas:</strong></h4><ul>
<li><strong>Unique Constraint:</strong> <code>nomeSetor</code> √∫nico previne duplicatas</li>
<li><strong>Soft Delete:</strong> Campo <code>ativo</code> para desativa√ß√£o sem perder hist√≥rico</li>
<li><strong>Descri√ß√£o Opcional:</strong> Flexibilidade para documentar cada setor</li>
</ul>
<h4 id="strong-setores-padrostrong"><strong>üìã Setores Padr√£o:</strong></h4><ol>
<li><strong>TRIAGEM</strong> - Triagem cl√≠nica e entrevista</li>
<li><strong>COLETA</strong> - Coleta de sangue e procedimentos</li>
<li><strong>LABORATORIO</strong> - An√°lises laboratoriais</li>
<li><strong>ADMINISTRACAO</strong> - Gest√£o administrativa</li>
<li><strong>ESTOQUE</strong> - Controle de bolsas</li>
<li><strong>ATENDIMENTO</strong> - Recep√ß√£o e atendimento</li>
<li><strong>ENFERMAGEM</strong> - Supervis√£o de enfermagem</li>
<li><strong>DIRECAO_TECNICA</strong> - Dire√ß√£o t√©cnica</li>
</ol>
<hr>
<h3 id="7-strongusersetorstrong-relacionamento-multi-setor">7. <strong>UserSetor</strong> - Relacionamento Multi-Setor</h3><pre><code class="language-java">@Entity
@Table(name = &quot;USER_SETORES&quot;, 
       uniqueConstraints = @UniqueConstraint(columnNames = {&quot;ID_USER&quot;, &quot;ID_SETOR&quot;, &quot;ATIVO&quot;}))
public class UserSetor {
    // Implementa√ß√£o N:N...
}
</code></pre>
<h4 id="strong-relacionamentos-nnstrong"><strong>üîó Relacionamentos N:N:</strong></h4><pre><code class="language-java">@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_USER&quot;, nullable = false)
private User user;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_SETOR&quot;, nullable = false)
private SetorAtuacao setor;
</code></pre>
<p><strong>üí° Fetch LAZY:</strong> Otimiza√ß√£o para n√£o carregar objetos relacionados desnecessariamente.</p>
<h4 id="strong-setor-principalstrong"><strong>‚≠ê Setor Principal:</strong></h4><pre><code class="language-java">@Column(name = &quot;IS_SETOR_PRINCIPAL&quot;)
private Boolean setorPrincipal = false;
</code></pre>
<p><strong>üí° Business Rule:</strong> Apenas um setor pode ser principal por usu√°rio ativo.</p>
<h4 id="strong-controle-temporalstrong"><strong>üìÖ Controle Temporal:</strong></h4><pre><code class="language-java">@Column(name = &quot;DATA_INICIO&quot;)
private LocalDate dataInicio;

@Column(name = &quot;DATA_FIM&quot;)
private LocalDate dataFim;

@Column(name = &quot;ATIVO&quot;)
private Boolean ativo = true;
</code></pre>
<p><strong>üí° Hist√≥rico:</strong> Permite rastrear per√≠odos de atua√ß√£o em cada setor.</p>
<h4 id="strong-unique-constraintstrong"><strong>üîí Unique Constraint:</strong></h4><pre><code class="language-java">@UniqueConstraint(columnNames = {&quot;ID_USER&quot;, &quot;ID_SETOR&quot;, &quot;ATIVO&quot;})
</code></pre>
<p><strong>üí° Integridade:</strong> Impede que usu√°rio tenha v√≠nculo duplicado ativo com mesmo setor.</p>
<h4 id="strong-auto-preenchimentostrong"><strong>üï∞Ô∏è Auto-Preenchimento:</strong></h4><pre><code class="language-java">@PrePersist
protected void onCreate() {
    createdAt = LocalDateTime.now();
    if (dataInicio == null) {
        dataInicio = LocalDate.now();
    }
}
</code></pre>
<p><strong>üí° JPA Lifecycle:</strong> <code>@PrePersist</code> executa antes de salvar no banco.</p>
<hr>
<h3 id="8-strongdoencaespecificastrong-catlogo-de-doenas">8. <strong>DoencaEspecifica</strong> - Cat√°logo de Doen√ßas</h3><pre><code class="language-java">@Entity
@Table(name = &quot;DOENCAS_ESPECIFICAS&quot;)
public class DoencaEspecifica {
    @Id
    @Column(name = &quot;ID_DOENCA&quot;)
    private Integer idDoenca; // ID FIXO para controle estat√≠stico
    
    // Campos...
}
</code></pre>
<h4 id="strong-id-fixo-estratgicostrong"><strong>üî¢ ID Fixo Estrat√©gico:</strong></h4><p><strong>üí° Design Decision:</strong> <code>@Id</code> sem <code>@GeneratedValue</code> permite IDs fixos para controle estat√≠stico:</p>
<ul>
<li><strong>IDs 1-10:</strong> Doen√ßas cardiovasculares</li>
<li><strong>IDs 11-20:</strong> Doen√ßas metab√≥licas/end√≥crinas  </li>
<li><strong>IDs 21-30:</strong> Doen√ßas hematol√≥gicas</li>
<li><strong>IDs 31-50:</strong> Doen√ßas infecciosas</li>
<li><strong>IDs 51-60:</strong> Doen√ßas respirat√≥rias</li>
<li><strong>IDs 61-70:</strong> Doen√ßas neurol√≥gicas</li>
<li><strong>IDs 71-80:</strong> Doen√ßas autoimunes</li>
<li><strong>IDs 81-90:</strong> Doen√ßas psiqui√°tricas</li>
<li><strong>IDs 91-100:</strong> Outras doen√ßas</li>
</ul>
<h4 id="strong-categorizaostrong"><strong>üìä Categoriza√ß√£o:</strong></h4><pre><code class="language-java">@Column(name = &quot;CATEGORIA&quot;, length = 50, nullable = false)
private String categoria; // CARDIOVASCULAR, METABOLICA, INFECCIOSA, etc.

@Column(name = &quot;IMPEDE_DOACAO&quot;, nullable = false)
private Boolean impedeDoacao; // true = impede doa√ß√£o
</code></pre>
<p><strong>üí° Business Logic:</strong> Permite filtros por categoria e decis√µes autom√°ticas de elegibilidade.</p>
<hr>
<h3 id="9-strongdoadordoencastrong-histrico-mdico-com-validao">9. <strong>DoadorDoenca</strong> - Hist√≥rico M√©dico com Valida√ß√£o</h3><pre><code class="language-java">@Entity
@Table(name = &quot;DOADOR_DOENCAS&quot;,
       uniqueConstraints = @UniqueConstraint(columnNames = {&quot;ID_DOADOR&quot;, &quot;ID_DOENCA&quot;}))
public class DoadorDoenca {
    // Implementa√ß√£o complexa...
}
</code></pre>
<h4 id="strong-relacionamentos-principaisstrong"><strong>üîó Relacionamentos Principais:</strong></h4><pre><code class="language-java">@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_DOADOR&quot;, nullable = false)
private Doador doador;

@ManyToOne(fetch = FetchType.LAZY)  
@JoinColumn(name = &quot;ID_DOENCA&quot;, nullable = false)
private DoencaEspecifica doenca;
</code></pre>
<h4 id="strong-status-e-origemstrong"><strong>üìä Status e Origem:</strong></h4><pre><code class="language-java">@Enumerated(EnumType.STRING)
@Column(name = &quot;STATUS_ATUAL&quot;, length = 20)
private StatusDoenca statusAtual = StatusDoenca.ATIVO;

@Enumerated(EnumType.STRING)
@Column(name = &quot;ORIGEM_DETECCAO&quot;, length = 20, nullable = false)
private OrigemDeteccao origemDeteccao = OrigemDeteccao.DECLARADA_DOADOR;
</code></pre>
<p><strong>üí° Enum Strategy:</strong> <code>EnumType.STRING</code> armazena texto leg√≠vel no banco (vs. ordinais).</p>
<h4 id="strong-workflow-de-validao-mdicastrong"><strong>üë®‚Äç‚öïÔ∏è Workflow de Valida√ß√£o M√©dica:</strong></h4><pre><code class="language-java">@Column(name = &quot;VALIDADO_POR_MEDICO&quot;)
private Boolean validadoPorMedico = false;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_MEDICO_VALIDADOR&quot;)
private User medicoValidador;

@Column(name = &quot;DATA_VALIDACAO_MEDICA&quot;)
private LocalDateTime dataValidacaoMedica;
</code></pre>
<p><strong>üí° Workflow H√≠brido:</strong></p>
<ol>
<li><strong>Doador declara</strong> ‚Üí <code>validadoPorMedico = false</code></li>
<li><strong>M√©dico valida</strong> ‚Üí <code>validadoPorMedico = true</code> + timestamp</li>
<li><strong>Rastreabilidade completa</strong> preservada</li>
</ol>
<h4 id="strong-unique-constraintstrong"><strong>üîí Unique Constraint:</strong></h4><pre><code class="language-java">@UniqueConstraint(columnNames = {&quot;ID_DOADOR&quot;, &quot;ID_DOENCA&quot;})
</code></pre>
<p><strong>üí° Integridade:</strong> Um doador n√£o pode ter a mesma doen√ßa duplicada.</p>
<hr>
<h3 id="strongagregado-donation_processstrong-"><strong>AGREGADO DONATION_PROCESS</strong> ü©∏</h3><hr>
<h4 id="strong11-triagemclinicastrong-avaliao-clnica"><strong>11. TriagemClinica</strong> - üè• Avalia√ß√£o Cl√≠nica</h4><pre><code class="language-java">@Entity
@Table(name = &quot;TRIAGEM_CLINICA&quot;)
public class TriagemClinica {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_TRIAGEM&quot;)
    private Long idTriagem;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_DOADOR&quot;, nullable = false)
    private Doador doador;

    @Column(name = &quot;DATA_TRIAGEM&quot;, nullable = false)
    private LocalDateTime dataTriagem;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_PROFISSIONAL&quot;, nullable = false)
    private User profissional;

    @Column(name = &quot;PESO_KG&quot;, precision = 5, scale = 2, nullable = false)
    private BigDecimal pesoKg;

    @Column(name = &quot;PRESSAO_ARTERIAL&quot;, length = 20)
    private String pressaoArterial; // &quot;120/80&quot;

    @Column(name = &quot;HEMOGLOBINA&quot;, precision = 4, scale = 2)
    private BigDecimal hemoglobina; // g/dL

    @Column(name = &quot;APTO_DOACAO&quot;, nullable = false)
    private Boolean aptoDoacao;

    @Column(name = &quot;MOTIVO_INAPTIDAO&quot;, length = 255)
    private String motivoInaptidao;

    @Column(name = &quot;OBSERVACOES&quot;, length = 500)
    private String observacoes;
}
</code></pre>
<h5 id="strong-critrios-de-triagemstrong"><strong>üìä Crit√©rios de Triagem:</strong></h5><table>
<thead>
<tr>
<th><strong>Par√¢metro</strong></th>
<th><strong>Tipo</strong></th>
<th><strong>Valores Normais</strong></th>
<th><strong>Observa√ß√µes</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Peso</strong></td>
<td><code>BigDecimal(5,2)</code></td>
<td>‚â• 50kg</td>
<td>Peso m√≠nimo obrigat√≥rio</td>
</tr>
<tr>
<td><strong>Press√£o Arterial</strong></td>
<td><code>String(20)</code></td>
<td>90/60 - 180/100</td>
<td>Formato: &quot;120/80&quot;</td>
</tr>
<tr>
<td><strong>Hemoglobina</strong></td>
<td><code>BigDecimal(4,2)</code></td>
<td>‚ôÇ‚â•13g/dL, ‚ôÄ‚â•12g/dL</td>
<td>Valores por g√™nero</td>
</tr>
<tr>
<td><strong>Idade</strong></td>
<td>Calculado</td>
<td>16-69 anos</td>
<td>Calculado via birthDate</td>
</tr>
</tbody></table>
<h5 id="strong-workflow-de-triagemstrong"><strong>üéØ Workflow de Triagem:</strong></h5><p><strong>Processo Completo:</strong></p>
<pre><code class="language-java">// 1. Enfermeiro/M√©dico realiza triagem
TriagemClinica triagem = new TriagemClinica();
triagem.setDoador(doador);
triagem.setProfissional(enfermeiro);
triagem.setPesoKg(new BigDecimal(&quot;70.5&quot;));
triagem.setPressaoArterial(&quot;120/80&quot;);
triagem.setHemoglobina(new BigDecimal(&quot;14.2&quot;));

// 2. Sistema avalia crit√©rios automaticamente
boolean aptoIdade = calcularIdade(doador.getBirthDate()) &gt;= 16;
boolean aptoPeso = triagem.getPesoKg().compareTo(new BigDecimal(&quot;50&quot;)) &gt;= 0;
boolean aptoHemoglobina = validarHemoglobina(triagem.getHemoglobina(), doador.getGender());

// 3. Decis√£o final
triagem.setAptoDoacao(aptoIdade &amp;&amp; aptoPeso &amp;&amp; aptoHemoglobina);
if (!triagem.getAptoDoacao()) {
    triagem.setMotivoInaptidao(&quot;Hemoglobina abaixo do limite m√≠nimo&quot;);
}
</code></pre>
<p><strong>Estados Poss√≠veis:</strong></p>
<ul>
<li><code>aptoDoacao = true</code>: Pode prosseguir para doa√ß√£o</li>
<li><code>aptoDoacao = false</code>: Inapto tempor√°ria ou definitivamente</li>
</ul>
<hr>
<h4 id="strong12-agendamentostrong-sistema-de-agendas"><strong>12. Agendamento</strong> - üìÖ Sistema de Agendas</h4><pre><code class="language-java">@Entity
@Table(name = &quot;AGENDAMENTOS&quot;)
public class Agendamento {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_AGENDAMENTO&quot;)
    private Long idAgendamento;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_DOADOR&quot;, nullable = false)
    private Doador doador;

    @Column(name = &quot;DATA_AGENDADA&quot;, nullable = false)
    private LocalDateTime dataAgendada;

    @Enumerated(EnumType.STRING)
    @Column(name = &quot;STATUS&quot;, length = 20)
    private StatusAgendamento status = StatusAgendamento.AGENDADO;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;AGENDADO_POR&quot;, nullable = false)
    private User agendadoPor;

    @Column(name = &quot;DATA_AGENDAMENTO&quot;)
    private LocalDateTime dataAgendamento;

    @Column(name = &quot;OBSERVACOES&quot;, length = 255)
    private String observacoes;
}
</code></pre>
<h5 id="strong-status-do-agendamentostrong"><strong>üìã Status do Agendamento:</strong></h5><pre><code class="language-java">public enum StatusAgendamento {
    AGENDADO,       // Agendamento confirmado
    COMPARECEU,     // Doador compareceu
    NAO_COMPARECEU, // Doador faltou
    CANCELADO       // Agendamento cancelado
}
</code></pre>
<h5 id="strong-ciclo-de-vida-do-agendamentostrong"><strong>üéØ Ciclo de Vida do Agendamento:</strong></h5><pre><code>AGENDADO ‚Üí COMPARECEU ‚Üí [Triagem] ‚Üí [Doa√ß√£o]
    ‚Üì
CANCELADO
    ‚Üì
NAO_COMPARECEU
</code></pre>
<p><strong>Workflow T√≠pico:</strong></p>
<pre><code class="language-java">// 1. Atendente agenda doa√ß√£o
Agendamento agendamento = new Agendamento();
agendamento.setDoador(doador);
agendamento.setDataAgendada(LocalDateTime.of(2025, 8, 30, 9, 0)); // 30/08 √†s 9h
agendamento.setAgendadoPor(atendente);
agendamento.setStatus(AGENDADO);

// 2. No dia do agendamento
if (doadorCompareceu) {
    agendamento.setStatus(COMPARECEU);
    // Prosseguir para triagem
} else {
    agendamento.setStatus(NAO_COMPARECEU);
    // Reagendar se necess√°rio
}
</code></pre>
<hr>
<h4 id="strong13-doacaostrong-registro-de-doaes"><strong>13. Doacao</strong> - üíâ Registro de Doa√ß√µes</h4><pre><code class="language-java">@Entity
@Table(name = &quot;DOACOES&quot;)
public class Doacao {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_DOACAO&quot;)
    private Long idDoacao;

    @Column(name = &quot;NUMERO_BOLSA&quot;, length = 20, nullable = false, unique = true)
    private String numeroBolsa; // C√≥digo √∫nico da bolsa

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_DOADOR&quot;, nullable = false)
    private Doador doador;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_TRIAGEM&quot;, nullable = false)
    private TriagemClinica triagem; // Toda doa√ß√£o precisa de triagem

    @Column(name = &quot;DATA_DOACAO&quot;, nullable = false)
    private LocalDate dataDoacao;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_RESPONSAVEL&quot;, nullable = false)
    private User responsavel; // Profissional que conduziu

    @Column(name = &quot;QUANTIDADE_ML&quot;, nullable = false)
    private Integer quantidadeMl = 450; // Volume padr√£o

    @Enumerated(EnumType.STRING)
    @Column(name = &quot;STATUS_BOLSA&quot;, length = 30)
    private StatusBolsa statusBolsa = StatusBolsa.COLETADA;

    @Column(name = &quot;TEVE_INTERCORRENCIA&quot;)
    private Boolean teveIntercorrencia = false;

    @Column(name = &quot;OBSERVACOES_INTERCORRENCIA&quot;, length = 500)
    private String observacoesIntercorrencia;

    @Column(name = &quot;CREATED_AT&quot;)
    private LocalDateTime createdAt;
}
</code></pre>
<h5 id="strong-status-da-bolsastrong"><strong>üìã Status da Bolsa:</strong></h5><pre><code class="language-java">public enum StatusBolsa {
    COLETADA,     // Sangue coletado
    APROVADA,     // Aprovada nos testes
    REJEITADA,    // Rejeitada nos testes
    TRANSFUNDIDA  // Utilizada em transfus√£o
}
</code></pre>
<h5 id="strong-workflow-da-doaostrong"><strong>üéØ Workflow da Doa√ß√£o:</strong></h5><pre><code>Triagem APROVADA ‚Üí Coleta ‚Üí Testes ‚Üí Estoque ‚Üí Transfus√£o
                     ‚Üì        ‚Üì        ‚Üì         ‚Üì
                 COLETADA ‚Üí APROVADA ‚Üí Dispon√≠vel ‚Üí TRANSFUNDIDA
                            ‚Üì
                         REJEITADA ‚Üí Descarte
</code></pre>
<p><strong>Processo Completo:</strong></p>
<pre><code class="language-java">// 1. Ap√≥s triagem aprovada
Doacao doacao = new Doacao();
doacao.setDoador(doador);
doacao.setTriagem(triagemAprovada);
doacao.setNumeroBolsa(gerarNumeroBolsa()); // Ex: &quot;DOA-2025-001234&quot;
doacao.setResponsavel(enfermeiro);
doacao.setQuantidadeMl(450); // Volume padr√£o
doacao.setStatusBolsa(COLETADA);

// 2. Se houve intercorr√™ncia
if (houveProblema) {
    doacao.setTeveIntercorrencia(true);
    doacao.setObservacoesIntercorrencia(&quot;Doador sentiu mal-estar durante coleta&quot;);
}

// 3. Ap√≥s testes laboratoriais
if (testesAprovados) {
    doacao.setStatusBolsa(APROVADA);
    // Adicionar ao estoque
} else {
    doacao.setStatusBolsa(REJEITADA);
    // Descartar bolsa
}
</code></pre>
<h5 id="strong-relacionamentos-crticosstrong"><strong>üîó Relacionamentos Cr√≠ticos:</strong></h5><pre><code class="language-java">// Triagem obrigat√≥ria antes da doa√ß√£o
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_TRIAGEM&quot;, nullable = false)
private TriagemClinica triagem;

// Rastreabilidade do respons√°vel
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_RESPONSAVEL&quot;, nullable = false)
private User responsavel;
</code></pre>
<p><strong>Business Rule:</strong> Toda doa√ß√£o DEVE ter uma triagem aprovada associada.</p>
<hr>
<h4 id="strong14-estoquesanguestrong-controle-de-inventory"><strong>14. EstoqueSangue</strong> - üì¶ Controle de Inventory</h4><pre><code class="language-java">@Entity
@Table(name = &quot;ESTOQUE_SANGUE&quot;)
public class EstoqueSangue {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_ESTOQUE&quot;)
    private Long idEstoque;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_TIPO_SANGUINEO&quot;, nullable = false)
    private TipoSanguineo tipoSanguineo;

    @Column(name = &quot;QUANTIDADE_BOLSAS&quot;, nullable = false)
    private Integer quantidadeBolsas = 0;

    @Column(name = &quot;NIVEL_MINIMO&quot;)
    private Integer nivelMinimo = 10;

    @Column(name = &quot;NIVEL_IDEAL&quot;)
    private Integer nivelIdeal = 30;

    @Enumerated(EnumType.STRING)
    @Column(name = &quot;STATUS_ESTOQUE&quot;, length = 20)
    private StatusEstoque statusEstoque = StatusEstoque.ADEQUADO;

    @Column(name = &quot;ULTIMA_ATUALIZACAO&quot;)
    private LocalDateTime ultimaAtualizacao;
}
</code></pre>
<h5 id="strong-nveis-de-estoquestrong"><strong>üìä N√≠veis de Estoque:</strong></h5><pre><code class="language-java">public enum StatusEstoque {
    CRITICO,  // &lt; n√≠vel m√≠nimo
    BAIXO,    // &gt;= m√≠nimo e &lt; 50% do ideal
    ADEQUADO, // &gt;= 50% do ideal e &lt; ideal
    ALTO      // &gt;= ideal
}
</code></pre>
<h5 id="strong-gesto-inteligentestrong"><strong>üéØ Gest√£o Inteligente:</strong></h5><p><strong>C√°lculo Autom√°tico de Status:</strong></p>
<pre><code class="language-java">public StatusEstoque calcularStatus() {
    if (quantidadeBolsas &lt; nivelMinimo) {
        return CRITICO;
    } else if (quantidadeBolsas &lt; (nivelIdeal * 0.5)) {
        return BAIXO;
    } else if (quantidadeBolsas &lt; nivelIdeal) {
        return ADEQUADO;
    } else {
        return ALTO;
    }
}
</code></pre>
<p><strong>Dashboard de Estoque:</strong></p>
<pre><code class="language-java">// Exemplo de estoque por tipo sangu√≠neo
O- : 5 bolsas  (CRITICO - Doador universal!)
O+ : 45 bolsas (ALTO - Tipo mais comum)
A+ : 15 bolsas (ADEQUADO)
B- : 2 bolsas  (CRITICO - Tipo raro!)
AB+: 25 bolsas (ADEQUADO - Receptor universal)
</code></pre>
<p><strong>Prioriza√ß√£o por Impacto:</strong></p>
<pre><code class="language-java">// O- e B- cr√≠ticos s√£o mais urgentes que outros tipos
// Baseado na compatibilidade e raridade
</code></pre>
<hr>
<h3 id="strongagregado-system_supportstrong-"><strong>AGREGADO SYSTEM_SUPPORT</strong> ‚öôÔ∏è</h3><hr>
<h4 id="strong15-configuracaosistemastrong-configuraes-dinmicas"><strong>15. ConfiguracaoSistema</strong> - ‚öôÔ∏è Configura√ß√µes Din√¢micas</h4><pre><code class="language-java">@Entity
@Table(name = &quot;CONFIGURACOES_SISTEMA&quot;)
public class ConfiguracaoSistema {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_CONFIG&quot;)
    private Long idConfig;

    @Column(name = &quot;CHAVE&quot;, length = 100, nullable = false, unique = true)
    private String chave;

    @Column(name = &quot;VALOR&quot;, length = 500, nullable = false)
    private String valor;

    @Column(name = &quot;DESCRICAO&quot;, length = 255)
    private String descricao;

    @Column(name = &quot;UPDATED_AT&quot;)
    private LocalDateTime updatedAt;
}
</code></pre>
<h5 id="strong-configuraes-tpicasstrong"><strong>üìã Configura√ß√µes T√≠picas:</strong></h5><table>
<thead>
<tr>
<th><strong>Chave</strong></th>
<th><strong>Valor</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>SISTEMA_NOME</code></td>
<td>&quot;HemoGest MVP&quot;</td>
<td>Nome do sistema</td>
</tr>
<tr>
<td><code>HEMOCENTRO_NOME</code></td>
<td>&quot;Hemocentro Regional&quot;</td>
<td>Nome do hemocentro</td>
</tr>
<tr>
<td><code>VOLUME_PADRAO_DOACAO</code></td>
<td>&quot;450&quot;</td>
<td>Volume padr√£o em ML</td>
</tr>
<tr>
<td><code>IDADE_MINIMA_DOACAO</code></td>
<td>&quot;16&quot;</td>
<td>Idade m√≠nima para doa√ß√£o</td>
</tr>
<tr>
<td><code>IDADE_MAXIMA_DOACAO</code></td>
<td>&quot;69&quot;</td>
<td>Idade m√°xima para doa√ß√£o</td>
</tr>
<tr>
<td><code>PESO_MINIMO_DOACAO</code></td>
<td>&quot;50&quot;</td>
<td>Peso m√≠nimo em KG</td>
</tr>
<tr>
<td><code>INTERVALO_DOACAO_HOMENS</code></td>
<td>&quot;60&quot;</td>
<td>Dias entre doa√ß√µes (homens)</td>
</tr>
<tr>
<td><code>INTERVALO_DOACAO_MULHERES</code></td>
<td>&quot;90&quot;</td>
<td>Dias entre doa√ß√µes (mulheres)</td>
</tr>
<tr>
<td><code>HEMOGLOBINA_MIN_HOMENS</code></td>
<td>&quot;13.0&quot;</td>
<td>g/dL m√≠nimo homens</td>
</tr>
<tr>
<td><code>HEMOGLOBINA_MIN_MULHERES</code></td>
<td>&quot;12.0&quot;</td>
<td>g/dL m√≠nimo mulheres</td>
</tr>
</tbody></table>
<h5 id="strong-vantagensstrong"><strong>üéØ Vantagens:</strong></h5><ul>
<li><strong>Flexibilidade:</strong> Alterar regras sem redeploy</li>
<li><strong>Auditoria:</strong> Controle de quando foi alterado</li>
<li><strong>Centraliza√ß√£o:</strong> Todas as configs em um lugar</li>
<li><strong>Tipagem:</strong> Convers√£o autom√°tica de string para tipo necess√°rio</li>
</ul>
<p><strong>Exemplo de Uso:</strong></p>
<pre><code class="language-java">@Service
public class ConfigService {
    
    public Integer getIdadeMinimaDoacao() {
        String valor = configRepository.findByChave(&quot;IDADE_MINIMA_DOACAO&quot;).getValor();
        return Integer.parseInt(valor);
    }
    
    public BigDecimal getPesoMinimoDoacao() {
        String valor = configRepository.findByChave(&quot;PESO_MINIMO_DOACAO&quot;).getValor();
        return new BigDecimal(valor);
    }
}
</code></pre>
<hr>
<h4 id="strong16-notificacaostrong-sistema-de-alertas"><strong>16. Notificacao</strong> - üîî Sistema de Alertas</h4><pre><code class="language-java">@Entity
@Table(name = &quot;NOTIFICACOES&quot;)
public class Notificacao {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_NOTIFICACAO&quot;)
    private Long idNotificacao;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_USUARIO&quot;)
    private User usuario; // NULL = notifica√ß√£o geral

    @Column(name = &quot;TITULO&quot;, length = 100, nullable = false)
    private String titulo;

    @Column(name = &quot;MENSAGEM&quot;, length = 500, nullable = false)
    private String mensagem;

    @Enumerated(EnumType.STRING)
    @Column(name = &quot;TIPO&quot;, length = 20)
    private TipoNotificacao tipo = TipoNotificacao.INFO;

    @Column(name = &quot;LIDA&quot;)
    private Boolean lida = false;

    @Column(name = &quot;CRIADA_EM&quot;)
    private LocalDateTime criadaEm;
}
</code></pre>
<h5 id="strong-tipos-de-notificaostrong"><strong>üìã Tipos de Notifica√ß√£o:</strong></h5><pre><code class="language-java">public enum TipoNotificacao {
    INFO,     // Informa√ß√£o geral
    WARNING,  // Aviso/aten√ß√£o
    ERROR,    // Erro/problema
    SUCCESS   // Sucesso/confirma√ß√£o
}
</code></pre>
<h5 id="strong-casos-de-usostrong"><strong>üéØ Casos de Uso:</strong></h5><p><strong>Notifica√ß√µes de Estoque:</strong></p>
<pre><code class="language-java">// Estoque cr√≠tico
Notificacao notif = new Notificacao();
notif.setTitulo(&quot;Estoque Cr√≠tico: O-&quot;);
notif.setMensagem(&quot;Estoque de O- com apenas 3 bolsas. A√ß√£o urgente necess√°ria!&quot;);
notif.setTipo(ERROR);
notif.setUsuario(null); // Para todos os usu√°rios
</code></pre>
<p><strong>Notifica√ß√µes M√©dicas:</strong></p>
<pre><code class="language-java">// Valida√ß√£o pendente
Notificacao notif = new Notificacao();
notif.setTitulo(&quot;Valida√ß√£o M√©dica Pendente&quot;);
notif.setMensagem(&quot;5 doen√ßas aguardando valida√ß√£o m√©dica&quot;);
notif.setTipo(WARNING);
notif.setUsuario(medico); // Espec√≠fico para m√©dicos
</code></pre>
<p><strong>Notifica√ß√µes de Sistema:</strong></p>
<pre><code class="language-java">// Sucesso em opera√ß√£o
Notificacao notif = new Notificacao();
notif.setTitulo(&quot;Doa√ß√£o Registrada&quot;);
notif.setMensagem(&quot;Doa√ß√£o do usu√°rio Jo√£o Silva registrada com sucesso&quot;);
notif.setTipo(SUCCESS);
notif.setUsuario(enfermeiro);
</code></pre>
<hr>
<h4 id="strong17-logauditorialgpdstrong-auditoria-lgpd"><strong>17. LogAuditoriaLgpd</strong> - üìã Auditoria LGPD</h4><pre><code class="language-java">@Entity
@Table(name = &quot;LOG_AUDITORIA_LGPD&quot;)
public class LogAuditoriaLgpd {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = &quot;ID_AUDIT&quot;)
    private Long idAudit;

    @Column(name = &quot;TABELA&quot;, length = 50, nullable = false)
    private String tabela;

    @Column(name = &quot;ID_REGISTRO&quot;, nullable = false)
    private Integer idRegistro;

    @Enumerated(EnumType.STRING)
    @Column(name = &quot;OPERACAO&quot;, length = 20, nullable = false)
    private TipoOperacao operacao;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;ID_USUARIO&quot;, nullable = false)
    private User usuario;

    @Column(name = &quot;IP_ORIGEM&quot;, length = 45)
    private String ipOrigem;

    @Column(name = &quot;DATA_OPERACAO&quot;)
    private LocalDateTime dataOperacao;

    @Column(name = &quot;FINALIDADE_ACESSO&quot;, length = 255)
    private String finalidadeAcesso;
}
</code></pre>
<h5 id="strong-tipos-de-operaostrong"><strong>üìã Tipos de Opera√ß√£o:</strong></h5><pre><code class="language-java">public enum TipoOperacao {
    SELECT, // Consulta de dados
    INSERT, // Cria√ß√£o de registro
    UPDATE, // Atualiza√ß√£o de dados
    DELETE  // Exclus√£o de dados
}
</code></pre>
<h5 id="strong-compliance-lgpdstrong"><strong>üéØ Compliance LGPD:</strong></h5><p><strong>Auditoria Autom√°tica:</strong></p>
<pre><code class="language-java">// Exemplo de log autom√°tico
LogAuditoriaLgpd log = new LogAuditoriaLgpd();
log.setTabela(&quot;DOADORES&quot;);
log.setIdRegistro(doador.getId());
log.setOperacao(SELECT);
log.setUsuario(usuarioLogado);
log.setIpOrigem(&quot;192.168.1.100&quot;);
log.setDataOperacao(LocalDateTime.now());
log.setFinalidadeAcesso(&quot;Consulta para agendamento de doa√ß√£o&quot;);
</code></pre>
<p><strong>Relat√≥rios de Compliance:</strong></p>
<pre><code class="language-java">// Todas as opera√ß√µes em dados de um doador espec√≠fico
List&lt;LogAuditoriaLgpd&gt; historico = auditRepository.findByTabelaAndIdRegistro(&quot;DOADORES&quot;, doadorId);

// Acessos por usu√°rio em per√≠odo
List&lt;LogAuditoriaLgpd&gt; acessos = auditRepository.findByUsuarioAndDataBetween(
    usuario, inicio, fim
);

// Opera√ß√µes por finalidade
List&lt;LogAuditoriaLgpd&gt; campanhas = auditRepository.findByFinalidadeContaining(&quot;campanha&quot;);
</code></pre>
<p><strong>Requisitos LGPD Atendidos:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Registro de acesso:</strong> Quem, quando, onde, por qu√™</li>
<li><span class="badge success">‚úÖ</span> <strong>Finalidade:</strong> Motivo do acesso aos dados</li>
<li><span class="badge success">‚úÖ</span> <strong>Rastreabilidade:</strong> Hist√≥rico completo de opera√ß√µes</li>
<li><span class="badge success">‚úÖ</span> <strong>Relat√≥rios:</strong> Base para relat√≥rios de conformidade</li>
</ul>
<hr>
<h2 id="-anotaes-jpa-explicadas">üè∑Ô∏è Anota√ß√µes JPA Explicadas</h2><h3 id="strong-anotaes-de-entidadestrong"><strong>üìä Anota√ß√µes de Entidade:</strong></h3><h4 id="strongentitystrong"><strong>@Entity</strong></h4><pre><code class="language-java">@Entity
public class User { }
</code></pre>
<p><strong>O que faz:</strong> Marca a classe como uma entidade JPA que ser√° mapeada para uma tabela no banco de dados.
<strong>Quando usar:</strong> Sempre que criar uma classe que representa uma tabela.</p>
<h4 id="strongtablestrong"><strong>@Table</strong></h4><pre><code class="language-java">@Table(name = &quot;USERS&quot;)
public class User { }
</code></pre>
<p><strong>O que faz:</strong> Define o nome da tabela no banco. Se omitido, usa o nome da classe.
<strong>Quando usar:</strong> Quando o nome da tabela for diferente do nome da classe.</p>
<h4 id="strongnoargsconstructor-allargsconstructor-lombokstrong"><strong>@NoArgsConstructor / @AllArgsConstructor (Lombok)</strong></h4><pre><code class="language-java">@NoArgsConstructor  // Cria construtor vazio: User()
@AllArgsConstructor // Cria construtor com todos os campos: User(id, name, email...)
public class User { }
</code></pre>
<p><strong>O que faz:</strong> Gera automaticamente construtores durante a compila√ß√£o.
<strong>Quando usar:</strong> Sempre. JPA precisa do construtor vazio, e o completo facilita testes.</p>
<h4 id="stronggetter-setter-lombokstrong"><strong>@Getter / @Setter (Lombok)</strong></h4><pre><code class="language-java">@Getter @Setter // Gera todos os getters e setters automaticamente
public class User { }
</code></pre>
<p><strong>O que faz:</strong> Cria m√©todos <code>getName()</code>, <code>setName()</code>, etc. para todos os campos.
<strong>Quando usar:</strong> Sempre, para evitar c√≥digo repetitivo.</p>
<hr>
<h3 id="strong-anotaes-de-campochave-primriastrong"><strong>üîë Anota√ß√µes de Campo/Chave Prim√°ria:</strong></h3><h4 id="strongidstrong"><strong>@Id</strong></h4><pre><code class="language-java">@Id
private Long idUser;
</code></pre>
<p><strong>O que faz:</strong> Marca o campo como chave prim√°ria da tabela.
<strong>Quando usar:</strong> Sempre, toda entidade precisa de uma chave prim√°ria.</p>
<h4 id="stronggeneratedvaluestrong"><strong>@GeneratedValue</strong></h4><pre><code class="language-java">@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long idUser;
</code></pre>
<p><strong>O que faz:</strong> Define como o valor da chave prim√°ria ser√° gerado.</p>
<ul>
<li><code>IDENTITY</code>: Auto-incremento do banco (recomendado para SQL Server/MySQL)</li>
<li><code>SEQUENCE</code>: Usa sequ√™ncia do banco (Oracle/PostgreSQL)</li>
<li><code>AUTO</code>: JPA escolhe automaticamente
<strong>Quando usar:</strong> Sempre com @Id, exceto quando voc√™ define o ID manualmente.</li>
</ul>
<h4 id="strongcolumnstrong"><strong>@Column</strong></h4><pre><code class="language-java">@Column(name = &quot;FULL_NAME&quot;, length = 100, nullable = false, unique = true)
private String fullName;
</code></pre>
<p><strong>O que faz:</strong> Configura como o campo ser√° mapeado para a coluna no banco.</p>
<ul>
<li><code>name</code>: Nome da coluna (se diferente do campo)</li>
<li><code>length</code>: Tamanho m√°ximo (para VARCHAR)</li>
<li><code>nullable</code>: Se permite NULL (padr√£o: true)</li>
<li><code>unique</code>: Se valor deve ser √∫nico (padr√£o: false)
<strong>Quando usar:</strong> Para customizar o mapeamento ou adicionar constraints.</li>
</ul>
<hr>
<h3 id="strong-anotaes-de-relacionamentostrong"><strong>üîó Anota√ß√µes de Relacionamento:</strong></h3><h4 id="strongmanytoonestrong-muitos-para-um"><strong>@ManyToOne</strong> (Muitos para Um)</h4><pre><code class="language-java">@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = &quot;ID_ROLE&quot;)
private UserRole userRole;
</code></pre>
<p><strong>O que faz:</strong> Define relacionamento N:1. Muitos usu√°rios podem ter o mesmo role.
<strong>Quando usar:</strong> Quando muitas entidades referenciam uma √∫nica entidade (FK no lado &quot;many&quot;).</p>
<h4 id="strongonetomanystrong-um-para-muitos"><strong>@OneToMany</strong> (Um para Muitos)</h4><pre><code class="language-java">@OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private List&lt;UserSetor&gt; setores;
</code></pre>
<p><strong>O que faz:</strong> Define relacionamento 1:N. Um usu√°rio pode ter muitos setores.</p>
<ul>
<li><code>mappedBy</code>: Nome do campo na entidade filha que referencia esta</li>
<li><code>cascade</code>: Que opera√ß√µes propagar para filhos</li>
<li><code>fetch</code>: Quando carregar os filhos
<strong>Quando usar:</strong> Para acessar entidades filhas a partir da entidade pai.</li>
</ul>
<h4 id="strongmanytomanystrong-muitos-para-muitos"><strong>@ManyToMany</strong> (Muitos para Muitos)</h4><pre><code class="language-java">@ManyToMany
@JoinTable(name = &quot;USER_ROLES&quot;,
    joinColumns = @JoinColumn(name = &quot;user_id&quot;),
    inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))
private List&lt;Role&gt; roles;
</code></pre>
<p><strong>O que faz:</strong> Define relacionamento N:N atrav√©s de tabela intermedi√°ria.
<strong>Quando usar:</strong> Quando ambas as entidades podem ter m√∫ltiplas refer√™ncias entre si.
<strong><span class="badge warning">‚ö†Ô∏è</span> Nota:</strong> No nosso projeto, preferimos tabela intermedi√°ria expl√≠cita (UserSetor) para campos extras.</p>
<h4 id="strongjoincolumnstrong"><strong>@JoinColumn</strong></h4><pre><code class="language-java">@JoinColumn(name = &quot;ID_ROLE&quot;, nullable = false)
private UserRole userRole;
</code></pre>
<p><strong>O que faz:</strong> Define o nome da coluna de chave estrangeira.
<strong>Quando usar:</strong> Em relacionamentos @ManyToOne e @OneToOne para customizar a FK.</p>
<hr>
<h3 id="strong-estratgias-de-fetch-carregamentostrong"><strong>‚ö° Estrat√©gias de Fetch (Carregamento):</strong></h3><h4 id="strongfetchtypelazystrong"><strong>FetchType.LAZY</strong></h4><pre><code class="language-java">@ManyToOne(fetch = FetchType.LAZY)
private Hemocentro hemocentro;
</code></pre>
<p><strong>O que faz:</strong> Carrega o relacionamento apenas quando acessado (proxy).
<strong>Vantagem:</strong> Performance - n√£o carrega dados desnecess√°rios.
<strong>Desvantagem:</strong> Pode causar LazyInitializationException se sess√£o estiver fechada.
<strong>Quando usar:</strong> Padr√£o recomendado, especialmente para relacionamentos grandes.</p>
<h4 id="strongfetchtypeeagerstrong"><strong>FetchType.EAGER</strong></h4><pre><code class="language-java">@ManyToOne(fetch = FetchType.EAGER)
private UserRole userRole;
</code></pre>
<p><strong>O que faz:</strong> Carrega o relacionamento imediatamente junto com a entidade principal.
<strong>Vantagem:</strong> Dados sempre dispon√≠veis, sem exce√ß√µes de lazy.
<strong>Desvantagem:</strong> Pode causar problemas de performance e N+1 queries.
<strong>Quando usar:</strong> Apenas para relacionamentos pequenos e sempre necess√°rios.</p>
<hr>
<h3 id="strong-estratgias-de-cascade-propagaostrong"><strong>üîÑ Estrat√©gias de Cascade (Propaga√ß√£o):</strong></h3><h4 id="strongcascadetypeallstrong"><strong>CascadeType.ALL</strong></h4><pre><code class="language-java">@OneToMany(mappedBy = &quot;doador&quot;, cascade = CascadeType.ALL)
private List&lt;DoadorDoenca&gt; doencas;
</code></pre>
<p><strong>O que faz:</strong> Propaga TODAS as opera√ß√µes (persist, merge, remove, refresh, detach).
<strong>Quando usar:</strong> Relacionamentos pai-filho onde filhos n√£o existem sem o pai.</p>
<h4 id="strongcascadetypepersiststrong"><strong>CascadeType.PERSIST</strong></h4><pre><code class="language-java">@OneToMany(cascade = CascadeType.PERSIST)
private List&lt;UserSetor&gt; setores;
</code></pre>
<p><strong>O que faz:</strong> Propaga apenas opera√ß√µes de cria√ß√£o (save).
<strong>Quando usar:</strong> Quando quer salvar filhos automaticamente, mas n√£o deletar.</p>
<h4 id="strongcascadetypemergestrong"><strong>CascadeType.MERGE</strong></h4><pre><code class="language-java">@OneToMany(cascade = CascadeType.MERGE)
private List&lt;UserSetor&gt; setores;
</code></pre>
<p><strong>O que faz:</strong> Propaga apenas opera√ß√µes de atualiza√ß√£o.
<strong>Quando usar:</strong> Quando quer atualizar filhos automaticamente.</p>
<h4 id="strongcascadetyperemovestrong"><strong>CascadeType.REMOVE</strong></h4><pre><code class="language-java">@OneToMany(cascade = CascadeType.REMOVE)
private List&lt;UserSetor&gt; setores;
</code></pre>
<p><strong>O que faz:</strong> Propaga apenas opera√ß√µes de exclus√£o.
<strong>Quando usar:</strong> Relacionamentos onde filhos devem ser deletados com o pai.</p>
<hr>
<h3 id="strong-anotaes-de-enumstrong"><strong>üè∑Ô∏è Anota√ß√µes de Enum:</strong></h3><h4 id="strongenumeratedenumtypestringstrong"><strong>@Enumerated(EnumType.STRING)</strong></h4><pre><code class="language-java">@Enumerated(EnumType.STRING)
@Column(name = &quot;STATUS_ATUAL&quot;)
private StatusDoenca statusAtual;
</code></pre>
<p><strong>O que faz:</strong> Armazena o nome do enum como texto no banco (&#39;ATIVO&#39;, &#39;CURADO&#39;).
<strong>Vantagem:</strong> Leg√≠vel no banco, est√°vel se reordenar enum.
<strong>Desvantagem:</strong> Ocupa mais espa√ßo.
<strong>Quando usar:</strong> Sempre recomendado para manutenibilidade.</p>
<h4 id="strongenumeratedenumtypeordinalstrong"><strong>@Enumerated(EnumType.ORDINAL)</strong></h4><pre><code class="language-java">@Enumerated(EnumType.ORDINAL)
private StatusDoenca statusAtual;
</code></pre>
<p><strong>O que faz:</strong> Armazena a posi√ß√£o do enum como n√∫mero (0, 1, 2).
<strong>Vantagem:</strong> Ocupa menos espa√ßo.
<strong>Desvantagem:</strong> Quebra se reordenar enum, ileg√≠vel no banco.
<strong>Quando usar:</strong> Evitar, usar apenas se performance for cr√≠tica.</p>
<hr>
<h3 id="strong-anotaes-de-lifecycle-ciclo-de-vidastrong"><strong>‚è∞ Anota√ß√µes de Lifecycle (Ciclo de Vida):</strong></h3><h4 id="strongprepersiststrong"><strong>@PrePersist</strong></h4><pre><code class="language-java">@PrePersist
protected void onCreate() {
    createdAt = LocalDateTime.now();
}
</code></pre>
<p><strong>O que faz:</strong> Executa m√©todo antes de salvar entidade no banco pela primeira vez.
<strong>Quando usar:</strong> Para preencher campos autom√°ticos na cria√ß√£o (timestamps, IDs).</p>
<h4 id="strongpreupdatestrong"><strong>@PreUpdate</strong></h4><pre><code class="language-java">@PreUpdate
protected void onUpdate() {
    updatedAt = LocalDateTime.now();
}
</code></pre>
<p><strong>O que faz:</strong> Executa m√©todo antes de atualizar entidade existente.
<strong>Quando usar:</strong> Para atualizar campos autom√°ticos (updatedAt, version).</p>
<h4 id="strongpostloadstrong"><strong>@PostLoad</strong></h4><pre><code class="language-java">@PostLoad
protected void onLoad() {
    // L√≥gica ap√≥s carregar do banco
}
</code></pre>
<p><strong>O que faz:</strong> Executa m√©todo ap√≥s carregar entidade do banco.
<strong>Quando usar:</strong> Para processamento ou valida√ß√£o ap√≥s carregar dados.</p>
<h4 id="strongpostpersiststrong"><strong>@PostPersist</strong></h4><pre><code class="language-java">@PostPersist
protected void afterSave() {
    // L√≥gica ap√≥s salvar (j√° tem ID)
}
</code></pre>
<p><strong>O que faz:</strong> Executa m√©todo ap√≥s salvar entidade (j√° com ID gerado).
<strong>Quando usar:</strong> Para a√ß√µes que precisam do ID gerado (logs, notifica√ß√µes).</p>
<hr>
<h3 id="strong-anotaes-de-constraint-restriesstrong"><strong>üîí Anota√ß√µes de Constraint (Restri√ß√µes):</strong></h3><h4 id="stronguniqueconstraintstrong"><strong>@UniqueConstraint</strong></h4><pre><code class="language-java">@Table(uniqueConstraints = @UniqueConstraint(columnNames = {&quot;ID_USER&quot;, &quot;ID_SETOR&quot;, &quot;ATIVO&quot;}))
</code></pre>
<p><strong>O que faz:</strong> Cria constraint de unicidade composta no banco.
<strong>Quando usar:</strong> Para regras de neg√≥cio que envolvem m√∫ltiplas colunas.</p>
<h4 id="strongindexstrong"><strong>@Index</strong></h4><pre><code class="language-java">@Table(indexes = @Index(columnList = &quot;cpf, email&quot;))
</code></pre>
<p><strong>O que faz:</strong> Cria √≠ndices no banco para melhorar performance de consultas.
<strong>Quando usar:</strong> Em campos frequentemente usados em WHERE, ORDER BY, JOIN.</p>
<hr>
<h3 id="strong-dicas-de-usostrong"><strong>üí° Dicas de Uso:</strong></h3><h4 id="strongcombinaes-comunsstrong"><strong>Combina√ß√µes Comuns:</strong></h4><pre><code class="language-java">// Chave prim√°ria padr√£o
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = &quot;ID_USER&quot;)
private Long idUser;

// Campo obrigat√≥rio √∫nico
@Column(name = &quot;CPF&quot;, length = 11, nullable = false, unique = true)
private String cpf;

// Relacionamento pai-filho
@OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)
private List&lt;UserSetor&gt; setores = new ArrayList&lt;&gt;();

// Enum como string
@Enumerated(EnumType.STRING)
@Column(name = &quot;STATUS&quot;, length = 20)
private StatusDoenca status = StatusDoenca.ATIVO;
</code></pre>
<h4 id="strongspan-classbadge-warningspan-armadilhas-comunsstrong"><strong><span class="badge warning">‚ö†Ô∏è</span> Armadilhas Comuns:</strong></h4><ul>
<li><strong>EAGER em relacionamentos grandes</strong> ‚Üí Performance ruim</li>
<li><strong>CASCADE.ALL sem cuidado</strong> ‚Üí Dele√ß√µes acidentais  </li>
<li><strong>Enum ORDINAL</strong> ‚Üí Quebra ao reordenar</li>
<li><strong>Fetch LAZY sem sess√£o</strong> ‚Üí LazyInitializationException</li>
<li><strong>Relacionamentos bidirecionais sem mappedBy</strong> ‚Üí Tabelas extras</li>
</ul>
<hr>
<h2 id="-relacionamentos-e-estratgias">üîó Relacionamentos e Estrat√©gias</h2><h3 id="strong1-user-usersetor-setoratuacao-many-to-manystrong"><strong>1. User ‚Üî UserSetor ‚Üî SetorAtuacao (Many-to-Many)</strong></h3><pre><code>User (1) ‚Üê‚Üí (N) UserSetor (N) ‚Üê‚Üí (1) SetorAtuacao
</code></pre>
<p><strong>Vantagens da Tabela Intermedi√°ria:</strong></p>
<ul>
<li>Campos adicionais (data_inicio, setor_principal, observacoes)</li>
<li>Controle de hist√≥rico</li>
<li>Soft delete independente</li>
</ul>
<h3 id="strong2-doador-doadordoenca-doencaespecifica-many-to-manystrong"><strong>2. Doador ‚Üî DoadorDoenca ‚Üî DoencaEspecifica (Many-to-Many)</strong></h3><pre><code>Doador (1) ‚Üê‚Üí (N) DoadorDoenca (N) ‚Üê‚Üí (1) DoencaEspecifica  
</code></pre>
<p><strong>Vantagens:</strong></p>
<ul>
<li>Status individual por doador-doen√ßa</li>
<li>Workflow de valida√ß√£o m√©dica</li>
<li>Rastreabilidade de origem</li>
<li>Auditoria completa</li>
</ul>
<h3 id="strong3-user-userrole-many-to-onestrong"><strong>3. User ‚Üí UserRole (Many-to-One)</strong></h3><pre><code>User (N) ‚Üê‚Üí (1) UserRole
</code></pre>
<p><strong>EAGER Loading:</strong> Role sempre necess√°rio para autoriza√ß√£o.</p>
<h3 id="strong4-user-hemocentro-many-to-onestrong"><strong>4. User ‚Üí Hemocentro (Many-to-One)</strong></h3><pre><code>User (N) ‚Üê‚Üí (1) Hemocentro
</code></pre>
<p><strong>LAZY Loading:</strong> Hemocentro carregado sob demanda.</p>
<hr>
<h2 id="-padres-de-design-utilizados">üé® Padr√µes de Design Utilizados</h2><h3 id="strong1-domain-driven-design-dddstrong"><strong>1. Domain-Driven Design (DDD)</strong></h3><ul>
<li><strong>Entities:</strong> Objetos com identidade √∫nica (<code>User</code>, <code>Doador</code>)</li>
<li><strong>Value Objects:</strong> Enums (<code>StatusDoenca</code>, <code>OrigemDeteccao</code>)</li>
<li><strong>Aggregates:</strong> Agrupamentos l√≥gicos de entidades relacionadas</li>
</ul>
<h3 id="strong2-repository-patternstrong"><strong>2. Repository Pattern</strong></h3><pre><code class="language-java">public interface UserSetorRepository extends JpaRepository&lt;UserSetor, Long&gt; {
    List&lt;UserSetor&gt; findByUserAndAtivoTrue(User user);
    // M√©todos espec√≠ficos do dom√≠nio
}
</code></pre>
<h3 id="strong3-soft-delete-patternstrong"><strong>3. Soft Delete Pattern</strong></h3><pre><code class="language-java">@Column(name = &quot;DELETED_AT&quot;)
private LocalDateTime deletedAt; // NULL = ativo, preenchido = deletado

@Column(name = &quot;ATIVO&quot;) 
private Boolean ativo = true; // true = ativo, false = inativo
</code></pre>
<h3 id="strong4-audit-trail-patternstrong"><strong>4. Audit Trail Pattern</strong></h3><pre><code class="language-java">@Column(name = &quot;CREATED_AT&quot;)
private LocalDateTime createdAt;

@Column(name = &quot;UPDATED_AT&quot;) 
private LocalDateTime updatedAt;

@ManyToOne
@JoinColumn(name = &quot;CADASTRADO_POR&quot;)
private User cadastradoPor;
</code></pre>
<h3 id="strong5-state-machine-patternstrong"><strong>5. State Machine Pattern</strong></h3><pre><code class="language-java">// Workflow: DECLARADA_DOADOR ‚Üí VALIDA√á√ÉO_PENDENTE ‚Üí VALIDADA
public enum StatusDoenca {
    ATIVO, CURADO, CONTROLADO
}

public enum OrigemDeteccao {
    DECLARADA_DOADOR, DETECTADA_MEDICO, EXAME_LABORATORIAL
}
</code></pre>
<hr>
<h2 id="-boas-prticas-implementadas">üéØ Boas Pr√°ticas Implementadas</h2><h3 id="strong1-nomeao-consistentestrong"><strong>1. Nomea√ß√£o Consistente:</strong></h3><ul>
<li>Entidades em PascalCase (<code>UserSetor</code>)</li>
<li>Campos em camelCase (<code>setorPrincipal</code>)</li>
<li>Tabelas em UPPER_SNAKE_CASE (<code>USER_SETORES</code>)</li>
<li>Colunas em UPPER_SNAKE_CASE (<code>IS_SETOR_PRINCIPAL</code>)</li>
</ul>
<h3 id="strong2-tipos-de-dados-apropriadosstrong"><strong>2. Tipos de Dados Apropriados:</strong></h3><ul>
<li><code>BigDecimal</code> para valores monet√°rios/precis√£o</li>
<li><code>LocalDateTime</code> para timestamps</li>
<li><code>LocalDate</code> para datas sem hor√°rio</li>
<li><code>Boolean</code> para flags (n√£o primitive boolean)</li>
</ul>
<h3 id="strong3-constraints-de-integridadestrong"><strong>3. Constraints de Integridade:</strong></h3><ul>
<li><code>@UniqueConstraint</code> para regras de neg√≥cio</li>
<li><code>nullable = false</code> para campos obrigat√≥rios</li>
<li><code>unique = true</code> para valores √∫nicos</li>
</ul>
<h3 id="strong4-performancestrong"><strong>4. Performance:</strong></h3><ul>
<li>Fetch LAZY por padr√£o</li>
<li>Fetch EAGER apenas quando necess√°rio</li>
<li>√çndices impl√≠citos em FKs</li>
</ul>
<h3 id="strong5-manutenibilidadestrong"><strong>5. Manutenibilidade:</strong></h3><ul>
<li>Lombok para reduzir boilerplate</li>
<li>Enums para valores fixos</li>
<li>Relacionamentos bidirecionais quando necess√°rio</li>
</ul>
<hr>
<h2 id="-enums-e-value-objects-completos">üè∑Ô∏è Enums e Value Objects Completos</h2><h3 id="strongenums-implementadosstrong"><strong>Enums Implementados:</strong></h3><h4 id="strong1-statusdoencastrong"><strong>1. StatusDoenca</strong></h4><pre><code class="language-java">public enum StatusDoenca {
    ATIVO,      // Doen√ßa presente/ativa
    CURADO,     // Doen√ßa superada/curada
    CONTROLADO  // Doen√ßa controlada com tratamento
}
</code></pre>
<p><strong>Uso:</strong> Define o estado atual de uma doen√ßa no hist√≥rico do doador.</p>
<h4 id="strong2-origemdeteccaostrong"><strong>2. OrigemDeteccao</strong></h4><pre><code class="language-java">public enum OrigemDeteccao {
    DECLARADA_DOADOR,      // Informado pelo doador
    DETECTADA_MEDICO,      // Detectado por profissional
    EXAME_LABORATORIAL     // Identificado em exame
}
</code></pre>
<p><strong>Uso:</strong> Rastreia como uma doen√ßa foi identificada no sistema.</p>
<h4 id="strong3-statusagendamentostrong"><strong>3. StatusAgendamento</strong></h4><pre><code class="language-java">public enum StatusAgendamento {
    AGENDADO,       // Confirmado
    COMPARECEU,     // Doador presente
    NAO_COMPARECEU, // Aus√™ncia
    CANCELADO       // Cancelamento
}
</code></pre>
<p><strong>Uso:</strong> Controla o ciclo de vida dos agendamentos de doa√ß√£o.</p>
<h4 id="strong4-statusbolsastrong"><strong>4. StatusBolsa</strong></h4><pre><code class="language-java">public enum StatusBolsa {
    COLETADA,     // Sangue coletado
    APROVADA,     // Testes aprovados
    REJEITADA,    // Testes reprovados
    TRANSFUNDIDA  // Utilizada
}
</code></pre>
<p><strong>Uso:</strong> Rastreia o estado de cada bolsa de sangue desde coleta at√© uso.</p>
<h4 id="strong5-statusestoquestrong"><strong>5. StatusEstoque</strong></h4><pre><code class="language-java">public enum StatusEstoque {
    CRITICO,  // Abaixo do m√≠nimo
    BAIXO,    // Entre m√≠nimo e 50% ideal
    ADEQUADO, // Entre 50% e 100% ideal
    ALTO      // Acima do ideal
}
</code></pre>
<p><strong>Uso:</strong> Indica n√≠veis de estoque para gest√£o inteligente de sangue.</p>
<h4 id="strong6-tiponotificacaostrong"><strong>6. TipoNotificacao</strong></h4><pre><code class="language-java">public enum TipoNotificacao {
    INFO,     // Informa√ß√£o
    WARNING,  // Aviso
    ERROR,    // Erro
    SUCCESS   // Sucesso
}
</code></pre>
<p><strong>Uso:</strong> Categoriza notifica√ß√µes para apresenta√ß√£o adequada na UI.</p>
<h4 id="strong7-tipooperacaostrong"><strong>7. TipoOperacao</strong></h4><pre><code class="language-java">public enum TipoOperacao {
    SELECT, // Consulta
    INSERT, // Cria√ß√£o
    UPDATE, // Atualiza√ß√£o
    DELETE  // Exclus√£o
}
</code></pre>
<p><strong>Uso:</strong> Auditoria LGPD - registra tipo de opera√ß√£o nos dados.</p>
<h3 id="strong-vantagens-dos-enumsstrong"><strong>üéØ Vantagens dos Enums:</strong></h3><ul>
<li><strong>Type Safety:</strong> Compilador impede valores inv√°lidos</li>
<li><strong>Legibilidade:</strong> C√≥digo autodocumentado</li>
<li><strong>Manutenibilidade:</strong> Mudan√ßas centralizadas</li>
<li><strong>Performance:</strong> Otimiza√ß√£o JVM autom√°tica</li>
<li><strong>Valida√ß√£o:</strong> Constraint autom√°tica no banco</li>
</ul>
<h3 id="strong-padres-de-usostrong"><strong>üîß Padr√µes de Uso:</strong></h3><h4 id="strongpersistncia-jpastrong"><strong>Persist√™ncia JPA:</strong></h4><pre><code class="language-java">@Enumerated(EnumType.STRING)
@Column(name = &quot;STATUS&quot;, length = 20)
private StatusAgendamento status = StatusAgendamento.AGENDADO;
</code></pre>
<h4 id="strongvalidao-de-negciostrong"><strong>Valida√ß√£o de Neg√≥cio:</strong></h4><pre><code class="language-java">public void aprovarTriagem() {
    if (this.aptoDoacao) {
        // Pode prosseguir para doa√ß√£o
        agendamento.setStatus(StatusAgendamento.COMPARECEU);
    }
}
</code></pre>
<h4 id="strongconsultas-tipadasstrong"><strong>Consultas Tipadas:</strong></h4><pre><code class="language-java">// Buscar bolsas aprovadas
List&lt;Doacao&gt; aprovadas = doacaoRepository.findByStatusBolsa(StatusBolsa.APROVADA);

// Estoque cr√≠tico
List&lt;EstoqueSangue&gt; criticos = estoqueRepository.findByStatusEstoque(StatusEstoque.CRITICO);
</code></pre>
<hr>
<h2 id="-benefcios-da-arquitetura">üìà Benef√≠cios da Arquitetura</h2><h3 id="strongspan-classbadge-successspan-flexibilidadestrong"><strong><span class="badge success">‚úÖ</span> Flexibilidade:</strong></h3><ul>
<li>Multi-setor simult√¢neo</li>
<li>Workflow m√©dico h√≠brido</li>
<li>Extensibilidade futura</li>
</ul>
<h3 id="strongspan-classbadge-successspan-integridadestrong"><strong><span class="badge success">‚úÖ</span> Integridade:</strong></h3><ul>
<li>Constraints de banco</li>
<li>Valida√ß√µes JPA</li>
<li>Relacionamentos consistentes</li>
</ul>
<h3 id="strongspan-classbadge-successspan-performancestrong"><strong><span class="badge success">‚úÖ</span> Performance:</strong></h3><ul>
<li>Fetch strategies otimizadas</li>
<li>Lazy loading inteligente</li>
<li>Consultas espec√≠ficas nos reposit√≥rios</li>
</ul>
<h3 id="strongspan-classbadge-successspan-auditoriastrong"><strong><span class="badge success">‚úÖ</span> Auditoria:</strong></h3><ul>
<li>Soft delete preserva hist√≥rico</li>
<li>Timestamps autom√°ticos</li>
<li>Rastreabilidade de a√ß√µes</li>
</ul>
<h3 id="strongspan-classbadge-successspan-compliancestrong"><strong><span class="badge success">‚úÖ</span> Compliance:</strong></h3><ul>
<li>LGPD (consentimentos granulares)</li>
<li>Responsabilidade m√©dica</li>
<li>Auditoria de acesso</li>
</ul>
<hr>
<p><em>Esta documenta√ß√£o fornece uma vis√£o completa da arquitetura de entidades implementada, servindo como refer√™ncia para desenvolvimento, manuten√ß√£o e evolu√ß√£o do sistema.</em></p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador PDF - DoeSangue</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .instruction {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        .file-list {
            display: grid;
            gap: 10px;
            margin: 20px 0;
        }
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .file-name {
            font-weight: bold;
            color: #495057;
        }
        .btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #1e7e34;
        }
        .steps {
            counter-reset: step-counter;
        }
        .step {
            counter-increment: step-counter;
            margin: 15px 0;
            padding: 15px;
            background: #fff3cd;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }
        .step::before {
            content: "Passo " counter(step-counter) ": ";
            font-weight: bold;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÑ Gerador de PDF - Documenta√ß√£o DoeSangue</h1>
        
        <div class="instruction">
            <h3>üéØ Como gerar PDFs das documenta√ß√µes:</h3>
            <p>Use a fun√ß√£o de impress√£o do navegador para salvar as p√°ginas HTML como PDF com formata√ß√£o perfeita.</p>
        </div>
        
        <div class="steps">
            <div class="step">
                Abra qualquer documenta√ß√£o HTML clicando nos links abaixo
            </div>
            <div class="step">
                Pressione <code>Ctrl + P</code> (Windows) ou <code>Cmd + P</code> (Mac)
            </div>
            <div class="step">
                Selecione "Salvar como PDF" como impressora
            </div>
            <div class="step">
                Configure as op√ß√µes:
                <ul>
                    <li>Orienta√ß√£o: Retrato</li>
                    <li>P√°ginas: Todas</li>
                    <li>Margens: Padr√£o</li>
                    <li>‚úÖ Gr√°ficos de fundo (importante!)</li>
                </ul>
            </div>
            <div class="step">
                Clique em "Salvar" e escolha onde salvar o PDF
            </div>
        </div>
        
        <h2>üìö Documenta√ß√µes Dispon√≠veis</h2>
        
        <div class="file-list">
            <div class="file-item">
                <span class="file-name">üè† P√°gina Inicial</span>
                <a href="index.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
            <div class="file-item">
                <span class="file-name">üèóÔ∏è Arquitetura do Sistema</span>
                <a href="architecture.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
            <div class="file-item">
                <span class="file-name">üìä Documenta√ß√£o das Entidades</span>
                <a href="DOCUMENTACAO-ENTIDADES.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
            <div class="file-item">
                <span class="file-name">üéÆ Guia de Boas Pr√°ticas - Controllers</span>
                <a href="GUIA-CONTROLLER-BOAS-PRATICAS.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
            <div class="file-item">
                <span class="file-name">üìñ Configura√ß√£o Swagger</span>
                <a href="SWAGGER-DOCUMENTACAO.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
            <div class="file-item">
                <span class="file-name">üîß Resumo Implementa√ß√£o Swagger</span>
                <a href="SWAGGER-RESUMO-IMPLEMENTACAO.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
            <div class="file-item">
                <span class="file-name">üó∫Ô∏è Roadmap e Pr√≥ximos Passos</span>
                <a href="ROADMAP-PROXIMOS-PASSOS.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
            <div class="file-item">
                <span class="file-name">üìã Plano de A√ß√£o Semanal</span>
                <a href="PLANO-ACAO-SEMANAL.html" target="_blank" class="btn">Abrir HTML</a>
            </div>
        </div>
        
        <div class="instruction">
            <h3>üí° Dicas para PDF de qualidade:</h3>
            <ul>
                <li><strong>Gr√°ficos de fundo:</strong> Sempre marque esta op√ß√£o para manter cores e gradientes</li>
                <li><strong>Margens:</strong> Use margens padr√£o para melhor legibilidade</li>
                <li><strong>Qualidade:</strong> O PDF manter√° toda a formata√ß√£o, incluindo links clic√°veis</li>
                <li><strong>Tamanho:</strong> Cada documento gera um PDF de 5-15 p√°ginas dependendo do conte√∫do</li>
            </ul>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="index.html" class="btn btn-success">üöÄ Come√ßar - Abrir Documenta√ß√£o Principal</a>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Guia de Boas Pr√°ticas - Controllers REST com Spring Boot - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üìö Guia de Boas Pr√°ticas - Controllers REST com Spring Boot</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-guia-de-boas-prticas-controllers-rest-com-spring-boot">üìö Guia de Boas Pr√°ticas - Controllers REST com Spring Boot</h1><p><strong>Finalidade:</strong> Guia educativo para desenvolvimento de controllers REST profissionais<br><strong>Foco:</strong> Anota√ß√µes, valida√ß√µes e documenta√ß√£o com Swagger</p>
<hr>
<h2 id="-objetivo-deste-guia">üéØ Objetivo deste Guia</h2><p>Este documento apresenta as <strong>melhores pr√°ticas</strong> para desenvolvimento de controllers REST no Spring Boot, com foco em:</p>
<ul>
<li><strong>Anota√ß√µes essenciais</strong> e seu uso correto</li>
<li><strong>Valida√ß√µes robustas</strong> com Bean Validation</li>
<li><strong>Documenta√ß√£o autom√°tica</strong> com Swagger/OpenAPI</li>
<li><strong>Padr√µes de c√≥digo limpo</strong> e manuten√≠vel</li>
</ul>
<hr>
<h2 id="-estrutura-bsica-de-um-controller">üèóÔ∏è Estrutura B√°sica de um Controller</h2><h3 id="strong-anotaes-principaisstrong"><strong>üìã Anota√ß√µes Principais</strong></h3><pre><code class="language-java">@RestController                    // Marca a classe como controller REST
@RequestMapping(&quot;/api/recurso&quot;)    // Define o path base
@Tag(name = &quot;Recurso&quot;, description = &quot;Opera√ß√µes do recurso&quot;)  // Swagger
@Validated                        // Habilita valida√ß√µes nos par√¢metros
public class RecursoController {
    // implementa√ß√£o
}
</code></pre>
<h3 id="strong-injeo-de-dependnciasstrong"><strong>üîß Inje√ß√£o de Depend√™ncias</strong></h3><pre><code class="language-java">private final RecursoService service;
private final RecursoMapper mapper;

public RecursoController(RecursoService service, RecursoMapper mapper) {
    this.service = service;
    this.mapper = mapper;
}
</code></pre>
<hr>
<h2 id="-padres-de-endpoints-rest">üöÄ Padr√µes de Endpoints REST</h2><h3 id="strong1-listagem-com-paginaostrong"><strong>1. üìã Listagem com Pagina√ß√£o</strong></h3><pre><code class="language-java">@GetMapping
@Operation(
    summary = &quot;Listar recursos com pagina√ß√£o&quot;,
    description = &quot;Retorna lista paginada de recursos com filtros opcionais&quot;
)
@ApiResponses({
    @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Lista retornada com sucesso&quot;),
    @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Par√¢metros inv√°lidos&quot;)
})
public ResponseEntity&lt;Page&lt;RecursoDTO&gt;&gt; listar(
    @Parameter(description = &quot;N√∫mero da p√°gina (0-based)&quot;)
    @RequestParam(defaultValue = &quot;0&quot;) @Min(0) int page,
    
    @Parameter(description = &quot;Tamanho da p√°gina&quot;)
    @RequestParam(defaultValue = &quot;20&quot;) @Min(1) @Max(100) int size,
    
    @Parameter(description = &quot;Filtros de busca&quot;)
    @Valid RecursoFiltroDTO filtros
) {
    Pageable pageable = PageRequest.of(page, size);
    Page&lt;Recurso&gt; recursos = service.buscarComFiltros(filtros, pageable);
    Page&lt;RecursoDTO&gt; dtos = recursos.map(mapper::toDTO);
    return ResponseEntity.ok(dtos);
}
</code></pre>
<h3 id="strong2-busca-por-idstrong"><strong>2. üîç Busca por ID</strong></h3><pre><code class="language-java">@GetMapping(&quot;/{id}&quot;)
@Operation(summary = &quot;Buscar recurso por ID&quot;)
@ApiResponses({
    @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Recurso encontrado&quot;),
    @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Recurso n√£o encontrado&quot;)
})
public ResponseEntity&lt;RecursoDTO&gt; buscarPorId(
    @Parameter(description = &quot;ID do recurso&quot;, required = true)
    @PathVariable @Positive Long id
) {
    Recurso recurso = service.buscarPorId(id);
    RecursoDTO dto = mapper.toDTO(recurso);
    return ResponseEntity.ok(dto);
}
</code></pre>
<h3 id="strong3-criao-de-recursostrong"><strong>3. ‚ûï Cria√ß√£o de Recurso</strong></h3><pre><code class="language-java">@PostMapping
@Operation(summary = &quot;Criar novo recurso&quot;)
@ApiResponses({
    @ApiResponse(responseCode = &quot;201&quot;, description = &quot;Recurso criado com sucesso&quot;),
    @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Dados inv√°lidos&quot;),
    @ApiResponse(responseCode = &quot;409&quot;, description = &quot;Recurso j√° existe&quot;)
})
public ResponseEntity&lt;RecursoDTO&gt; criar(
    @Parameter(description = &quot;Dados para cria√ß√£o do recurso&quot;)
    @Valid @RequestBody RecursoCreateDTO createDTO
) {
    Recurso novoRecurso = mapper.toEntity(createDTO);
    Recurso recursoSalvo = service.criar(novoRecurso);
    RecursoDTO dto = mapper.toDTO(recursoSalvo);
    
    URI location = ServletUriComponentsBuilder
        .fromCurrentRequest()
        .path(&quot;/{id}&quot;)
        .buildAndExpand(recursoSalvo.getId())
        .toUri();
        
    return ResponseEntity.created(location).body(dto);
}
</code></pre>
<h3 id="strong4-atualizao-de-recursostrong"><strong>4. üîÑ Atualiza√ß√£o de Recurso</strong></h3><pre><code class="language-java">@PutMapping(&quot;/{id}&quot;)
@Operation(summary = &quot;Atualizar recurso existente&quot;)
@ApiResponses({
    @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Recurso atualizado&quot;),
    @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Recurso n√£o encontrado&quot;),
    @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Dados inv√°lidos&quot;)
})
public ResponseEntity&lt;RecursoDTO&gt; atualizar(
    @Parameter(description = &quot;ID do recurso&quot;)
    @PathVariable @Positive Long id,
    
    @Parameter(description = &quot;Dados para atualiza√ß√£o&quot;)
    @Valid @RequestBody RecursoUpdateDTO updateDTO
) {
    Recurso recursoAtualizado = service.atualizar(id, updateDTO);
    RecursoDTO dto = mapper.toDTO(recursoAtualizado);
    return ResponseEntity.ok(dto);
}
</code></pre>
<h3 id="strong5-excluso-de-recursostrong"><strong>5. üóëÔ∏è Exclus√£o de Recurso</strong></h3><pre><code class="language-java">@DeleteMapping(&quot;/{id}&quot;)
@Operation(summary = &quot;Excluir recurso&quot;)
@ApiResponses({
    @ApiResponse(responseCode = &quot;204&quot;, description = &quot;Recurso exclu√≠do&quot;),
    @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Recurso n√£o encontrado&quot;),
    @ApiResponse(responseCode = &quot;409&quot;, description = &quot;N√£o √© poss√≠vel excluir&quot;)
})
public ResponseEntity&lt;Void&gt; excluir(
    @Parameter(description = &quot;ID do recurso&quot;)
    @PathVariable @Positive Long id
) {
    service.excluir(id);
    return ResponseEntity.noContent().build();
}
</code></pre>
<hr>
<h2 id="-dtos-com-validaes">üé® DTOs com Valida√ß√µes</h2><h3 id="strong-escolhendo-entre-codepublic-recordcode-e-codepublic-classcodestrong"><strong>ÔøΩ Escolhendo Entre <code>public record</code> e <code>public class</code></strong></h3><h4 id="strong-public-record-moderna-e-imutvel-java-14strong"><strong>üÜï public record - Moderna e Imut√°vel (Java 14+)</strong></h4><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Imut√°vel por padr√£o</strong> - Todos os campos s√£o <code>final</code></li>
<li><strong>Menos c√≥digo</strong> - Elimina getters/setters/equals/hashCode</li>
<li><strong>Construtor autom√°tico</strong> - Com todos os par√¢metros obrigat√≥rios</li>
<li><strong>Performance</strong> - Ligeiramente mais eficiente</li>
</ul>
<pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de recurso&quot;)
public record RecursoCreateDTO(
    @Schema(description = &quot;Nome do recurso&quot;, example = &quot;Recurso Exemplo&quot;)
    @NotBlank(message = &quot;Nome √© obrigat√≥rio&quot;)
    @Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
    String nome,
    
    @Schema(description = &quot;Descri√ß√£o&quot;, example = &quot;Descri√ß√£o do recurso&quot;)
    @Size(max = 500, message = &quot;Descri√ß√£o n√£o pode exceder 500 caracteres&quot;)
    String descricao,
    
    @Schema(description = &quot;Status ativo&quot;, example = &quot;true&quot;)
    @NotNull(message = &quot;Status √© obrigat√≥rio&quot;)
    Boolean ativo,
    
    @Schema(description = &quot;Valor monet√°rio&quot;, example = &quot;99.99&quot;)
    @DecimalMin(value = &quot;0.0&quot;, message = &quot;Valor deve ser positivo&quot;)
    BigDecimal valor
) {}
</code></pre>
<h4 id="strong-public-class-tradicional-e-flexvelstrong"><strong>üèóÔ∏è public class - Tradicional e Flex√≠vel</strong></h4><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Mut√°vel</strong> - Campos podem ser modificados depois da cria√ß√£o</li>
<li><strong>Flexibilidade total</strong> - Permite m√©todos customizados</li>
<li><strong>Compatibilidade</strong> - Funciona com todas as vers√µes Java</li>
<li><strong>Heran√ßa</strong> - Suporta extends e implementa√ß√µes complexas</li>
</ul>
<pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de recurso&quot;)
@Getter @Setter
@NoArgsConstructor @AllArgsConstructor
public class RecursoCreateDTO {
    
    @Schema(description = &quot;Nome do recurso&quot;, example = &quot;Recurso Exemplo&quot;)
    @NotBlank(message = &quot;Nome √© obrigat√≥rio&quot;)
    @Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
    private String nome;
    
    @Schema(description = &quot;Descri√ß√£o&quot;, example = &quot;Descri√ß√£o do recurso&quot;)
    @Size(max = 500, message = &quot;Descri√ß√£o n√£o pode exceder 500 caracteres&quot;)
    private String descricao;
    
    @Schema(description = &quot;Status ativo&quot;, example = &quot;true&quot;)
    @NotNull(message = &quot;Status √© obrigat√≥rio&quot;)
    private Boolean ativo;
    
    @Schema(description = &quot;Valor monet√°rio&quot;, example = &quot;99.99&quot;)
    @DecimalMin(value = &quot;0.0&quot;, message = &quot;Valor deve ser positivo&quot;)
    private BigDecimal valor;
    
    // M√©todos customizados podem ser adicionados
    @AssertTrue(message = &quot;Valida√ß√£o customizada&quot;)
    public boolean isValidCombination() {
        return nome != null &amp;&amp; !nome.trim().isEmpty();
    }
}
</code></pre>
<h4 id="strong-guia-de-decisostrong"><strong>üéØ Guia de Decis√£o</strong></h4><table>
<thead>
<tr>
<th><strong>Cen√°rio</strong></th>
<th><strong>Record</strong></th>
<th><strong>Class</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>DTOs simples de entrada</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Prefer√≠vel</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Adequado</td>
</tr>
<tr>
<td><strong>DTOs de resposta</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Ideal</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Adequado</td>
</tr>
<tr>
<td><strong>Dados que nunca mudam</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Perfeito</strong></td>
<td><span class="badge danger">‚ùå</span> Desnecess√°rio</td>
</tr>
<tr>
<td><strong>Valida√ß√µes complexas</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Limitado</td>
<td><span class="badge success">‚úÖ</span> <strong>Melhor</strong></td>
</tr>
<tr>
<td><strong>Heran√ßa necess√°ria</strong></td>
<td><span class="badge danger">‚ùå</span> N√£o suporta</td>
<td><span class="badge success">‚úÖ</span> <strong>Obrigat√≥rio</strong></td>
</tr>
<tr>
<td><strong>Java &lt; 14</strong></td>
<td><span class="badge danger">‚ùå</span> Indispon√≠vel</td>
<td><span class="badge success">‚úÖ</span> <strong>√önica op√ß√£o</strong></td>
</tr>
<tr>
<td><strong>Bibliotecas legadas</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Compatibilidade</td>
<td><span class="badge success">‚úÖ</span> <strong>Garantida</strong></td>
</tr>
</tbody></table>
<h4 id="strong-recomendao-geralstrong"><strong>üí° Recomenda√ß√£o Geral</strong></h4><pre><code class="language-java">// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; PREFER√çVEL - Records para DTOs simples
public record ProductCreateDTO(
    @NotBlank String name,
    @Positive BigDecimal price,
    @NotNull Boolean active
) {}

// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; ALTERNATIVO - Classes quando precisar de flexibilidade
@Getter @Setter
public class ProductUpdateDTO {
    private String name;
    private BigDecimal price;
    private Boolean active;
    
    @AssertTrue(message = &quot;Pelo menos um campo deve ser fornecido&quot;)
    public boolean hasAtLeastOneField() {
        return name != null || price != null || active != null;
    }
}
</code></pre>
<h3 id="strong-dto-de-criaostrong"><strong>ÔøΩüì• DTO de Cria√ß√£o</strong></h3><pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de recurso&quot;)
public class RecursoCreateDTO {
    
    @Schema(description = &quot;Nome do recurso&quot;, example = &quot;Recurso Exemplo&quot;)
    @NotBlank(message = &quot;Nome √© obrigat√≥rio&quot;)
    @Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
    private String nome;
    
    @Schema(description = &quot;Descri√ß√£o detalhada&quot;, example = &quot;Descri√ß√£o completa do recurso&quot;)
    @Size(max = 500, message = &quot;Descri√ß√£o n√£o pode exceder 500 caracteres&quot;)
    private String descricao;
    
    @Schema(description = &quot;Status ativo&quot;, example = &quot;true&quot;)
    @NotNull(message = &quot;Status √© obrigat√≥rio&quot;)
    private Boolean ativo;
    
    @Schema(description = &quot;Categoria do recurso&quot;, example = &quot;CATEGORIA_A&quot;)
    @NotNull(message = &quot;Categoria √© obrigat√≥ria&quot;)
    @Enumerated(EnumType.STRING)
    private CategoriaEnum categoria;
    
    @Schema(description = &quot;Valor monet√°rio&quot;, example = &quot;99.99&quot;)
    @DecimalMin(value = &quot;0.0&quot;, message = &quot;Valor deve ser positivo&quot;)
    @Digits(integer = 10, fraction = 2, message = &quot;Formato de valor inv√°lido&quot;)
    private BigDecimal valor;
    
    // getters e setters
}
</code></pre>
<h3 id="strong-dto-de-respostastrong"><strong>üì§ DTO de Resposta</strong></h3><pre><code class="language-java">@Schema(description = &quot;Dados de resposta do recurso&quot;)
public class RecursoDTO {
    
    @Schema(description = &quot;ID √∫nico do recurso&quot;, accessMode = Schema.AccessMode.READ_ONLY)
    private Long id;
    
    @Schema(description = &quot;Nome do recurso&quot;)
    private String nome;
    
    @Schema(description = &quot;Descri√ß√£o do recurso&quot;)
    private String descricao;
    
    @Schema(description = &quot;Indica se est√° ativo&quot;)
    private Boolean ativo;
    
    @Schema(description = &quot;Categoria do recurso&quot;)
    private CategoriaEnum categoria;
    
    @Schema(description = &quot;Valor formatado para exibi√ß√£o&quot;, example = &quot;R$ 99,99&quot;)
    private String valorFormatado;
    
    @Schema(description = &quot;Data de cria√ß√£o&quot;, accessMode = Schema.AccessMode.READ_ONLY)
    private LocalDateTime criadoEm;
    
    @Schema(description = &quot;Data da √∫ltima atualiza√ß√£o&quot;, accessMode = Schema.AccessMode.READ_ONLY)
    private LocalDateTime atualizadoEm;
    
    // getters e setters
}
</code></pre>
<h3 id="strong-dto-de-filtrosstrong"><strong>üîç DTO de Filtros</strong></h3><pre><code class="language-java">@Schema(description = &quot;Filtros para busca de recursos&quot;)
public class RecursoFiltroDTO {
    
    @Schema(description = &quot;Buscar por nome (busca parcial)&quot;, example = &quot;exemplo&quot;)
    private String nome;
    
    @Schema(description = &quot;Filtrar por categoria&quot;)
    private CategoriaEnum categoria;
    
    @Schema(description = &quot;Filtrar apenas ativos&quot;)
    private Boolean apenasAtivos;
    
    @Schema(description = &quot;Valor m√≠nimo&quot;)
    @DecimalMin(value = &quot;0.0&quot;, message = &quot;Valor m√≠nimo deve ser positivo&quot;)
    private BigDecimal valorMinimo;
    
    @Schema(description = &quot;Valor m√°ximo&quot;)
    @DecimalMin(value = &quot;0.0&quot;, message = &quot;Valor m√°ximo deve ser positivo&quot;)
    private BigDecimal valorMaximo;
    
    @Schema(description = &quot;Data inicial para filtro&quot;)
    @Past(message = &quot;Data inicial deve estar no passado&quot;)
    private LocalDate dataInicial;
    
    @Schema(description = &quot;Data final para filtro&quot;)
    private LocalDate dataFinal;
    
    // getters e setters
}
</code></pre>
<hr>
<h2 id="-documentao-swagger-avanada">üìñ Documenta√ß√£o Swagger Avan√ßada</h2><h3 id="strong-tags-e-operaesstrong"><strong>üè∑Ô∏è Tags e Opera√ß√µes</strong></h3><pre><code class="language-java">@Tag(
    name = &quot;Recursos&quot;, 
    description = &quot;API para gerenciamento de recursos do sistema&quot;
)
@Operation(
    summary = &quot;Opera√ß√£o resumida&quot;,
    description = &quot;&quot;&quot;
        Descri√ß√£o detalhada da opera√ß√£o em **Markdown**.
        
        ### Funcionalidades:
        - Item 1
        - Item 2
        
        ### Casos de Uso:
        - Caso A
        - Caso B
        &quot;&quot;&quot;,
    tags = {&quot;Recursos&quot;}
)
</code></pre>
<h3 id="strong-exemplos-completosstrong"><strong>üìù Exemplos Completos</strong></h3><pre><code class="language-java">@io.swagger.v3.oas.annotations.parameters.RequestBody(
    description = &quot;Dados do recurso&quot;,
    required = true,
    content = @Content(
        mediaType = &quot;application/json&quot;,
        schema = @Schema(implementation = RecursoCreateDTO.class),
        examples = {
            @ExampleObject(
                name = &quot;Exemplo B√°sico&quot;,
                value = &quot;&quot;&quot;
                    {
                        &quot;nome&quot;: &quot;Produto Exemplo&quot;,
                        &quot;descricao&quot;: &quot;Descri√ß√£o do produto&quot;,
                        &quot;ativo&quot;: true,
                        &quot;categoria&quot;: &quot;CATEGORIA_A&quot;,
                        &quot;valor&quot;: 99.99
                    }
                    &quot;&quot;&quot;
            ),
            @ExampleObject(
                name = &quot;Exemplo Completo&quot;,
                value = &quot;&quot;&quot;
                    {
                        &quot;nome&quot;: &quot;Produto Premium&quot;,
                        &quot;descricao&quot;: &quot;Produto com todas as funcionalidades&quot;,
                        &quot;ativo&quot;: true,
                        &quot;categoria&quot;: &quot;CATEGORIA_PREMIUM&quot;,
                        &quot;valor&quot;: 299.99
                    }
                    &quot;&quot;&quot;
            )
        }
    )
)
</code></pre>
<h3 id="strong-respostas-documentadasstrong"><strong>üîß Respostas Documentadas</strong></h3><pre><code class="language-java">@ApiResponses({
    @ApiResponse(
        responseCode = &quot;200&quot;,
        description = &quot;&lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Opera√ß√£o realizada com sucesso&quot;,
        content = @Content(
            mediaType = &quot;application/json&quot;,
            schema = @Schema(implementation = RecursoDTO.class)
        )
    ),
    @ApiResponse(
        responseCode = &quot;400&quot;,
        description = &quot;&lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; Dados inv√°lidos fornecidos&quot;,
        content = @Content(
            mediaType = &quot;application/json&quot;,
            examples = @ExampleObject(
                value = &quot;&quot;&quot;
                    {
                        &quot;error&quot;: &quot;Bad Request&quot;,
                        &quot;message&quot;: &quot;Dados inv√°lidos&quot;,
                        &quot;details&quot;: {
                            &quot;nome&quot;: &quot;Nome √© obrigat√≥rio&quot;,
                            &quot;valor&quot;: &quot;Valor deve ser positivo&quot;
                        },
                        &quot;timestamp&quot;: &quot;2025-08-27T14:30:00Z&quot;
                    }
                    &quot;&quot;&quot;
            )
        )
    ),
    @ApiResponse(
        responseCode = &quot;404&quot;,
        description = &quot;üîç Recurso n√£o encontrado&quot;,
        content = @Content(
            mediaType = &quot;application/json&quot;,
            examples = @ExampleObject(
                value = &quot;&quot;&quot;
                    {
                        &quot;error&quot;: &quot;Not Found&quot;,
                        &quot;message&quot;: &quot;Recurso com ID 123 n√£o foi encontrado&quot;,
                        &quot;timestamp&quot;: &quot;2025-08-27T14:30:00Z&quot;
                    }
                    &quot;&quot;&quot;
            )
        )
    )
})
</code></pre>
<hr>
<h2 id="-segurana-e-validaes">üîí Seguran√ßa e Valida√ß√µes</h2><h3 id="strong-validaes-de-entradastrong"><strong>üõ°Ô∏è Valida√ß√µes de Entrada</strong></h3><pre><code class="language-java">// Valida√ß√µes b√°sicas
@NotNull(message = &quot;Campo obrigat√≥rio&quot;)
@NotBlank(message = &quot;Campo n√£o pode estar vazio&quot;)
@NotEmpty(message = &quot;Lista n√£o pode estar vazia&quot;)

// Valida√ß√µes de tamanho
@Size(min = 2, max = 100, message = &quot;Tamanho inv√°lido&quot;)
@Length(min = 5, max = 50, message = &quot;Comprimento inv√°lido&quot;)

// Valida√ß√µes num√©ricas
@Min(value = 0, message = &quot;Valor m√≠nimo √© 0&quot;)
@Max(value = 100, message = &quot;Valor m√°ximo √© 100&quot;)
@Positive(message = &quot;Deve ser positivo&quot;)
@PositiveOrZero(message = &quot;Deve ser positivo ou zero&quot;)

// Valida√ß√µes de formato
@Email(message = &quot;Email inv√°lido&quot;)
@Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve ter 11 d√≠gitos&quot;)
@URL(message = &quot;URL inv√°lida&quot;)

// Valida√ß√µes de data
@Past(message = &quot;Data deve estar no passado&quot;)
@Future(message = &quot;Data deve estar no futuro&quot;)
@PastOrPresent(message = &quot;Data deve ser passado ou presente&quot;)
</code></pre>
<h3 id="strong-autorizaostrong"><strong>üîê Autoriza√ß√£o</strong></h3><pre><code class="language-java">@PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;)&quot;)
@Operation(security = @SecurityRequirement(name = &quot;bearerAuth&quot;))
public ResponseEntity&lt;RecursoDTO&gt; operacaoRestrita() {
    // implementa√ß√£o
}
</code></pre>
<hr>
<h2 id="-tratamento-de-erros">üõ†Ô∏è Tratamento de Erros</h2><h3 id="strongspan-classbadge-warningspan-exception-handler-globalstrong"><strong><span class="badge warning">‚ö†Ô∏è</span> Exception Handler Global</strong></h3><pre><code class="language-java">@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(MethodArgumentNotValidException.class)
    @ResponseStatus(HttpStatus.BAD_REQUEST)
    public Map&lt;String, Object&gt; handleValidationErrors(MethodArgumentNotValidException ex) {
        Map&lt;String, String&gt; errors = new HashMap&lt;&gt;();
        ex.getBindingResult().getFieldErrors().forEach(error -&gt; 
            errors.put(error.getField(), error.getDefaultMessage())
        );
        
        return Map.of(
            &quot;error&quot;, &quot;Validation Failed&quot;,
            &quot;message&quot;, &quot;Dados inv√°lidos&quot;,
            &quot;details&quot;, errors,
            &quot;timestamp&quot;, Instant.now()
        );
    }
    
    @ExceptionHandler(EntityNotFoundException.class)
    @ResponseStatus(HttpStatus.NOT_FOUND)
    public Map&lt;String, Object&gt; handleNotFound(EntityNotFoundException ex) {
        return Map.of(
            &quot;error&quot;, &quot;Not Found&quot;,
            &quot;message&quot;, ex.getMessage(),
            &quot;timestamp&quot;, Instant.now()
        );
    }
}
</code></pre>
<hr>
<h2 id="-testabilidade">üß™ Testabilidade</h2><h3 id="strong-controller-teststrong"><strong>üî¨ Controller Test</strong></h3><pre><code class="language-java">@WebMvcTest(RecursoController.class)
class RecursoControllerTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @MockBean
    private RecursoService service;
    
    @Test
    void deveListarRecursos() throws Exception {
        // given
        Page&lt;Recurso&gt; recursos = new PageImpl&lt;&gt;(List.of(/* recursos */));
        when(service.buscarComFiltros(any(), any())).thenReturn(recursos);
        
        // when &amp; then
        mockMvc.perform(get(&quot;/api/recursos&quot;))
            .andExpect(status().isOk())
            .andExpect(jsonPath(&quot;$.content&quot;).isArray());
    }
    
    @Test
    void deveCriarRecurso() throws Exception {
        // given
        String jsonRequest = &quot;&quot;&quot;
            {
                &quot;nome&quot;: &quot;Teste&quot;,
                &quot;descricao&quot;: &quot;Descri√ß√£o teste&quot;,
                &quot;ativo&quot;: true,
                &quot;categoria&quot;: &quot;CATEGORIA_A&quot;,
                &quot;valor&quot;: 99.99
            }
            &quot;&quot;&quot;;
        
        // when &amp; then
        mockMvc.perform(post(&quot;/api/recursos&quot;)
                .contentType(MediaType.APPLICATION_JSON)
                .content(jsonRequest))
            .andExpect(status().isCreated());
    }
}
</code></pre>
<hr>
<h2 id="-boas-prticas-resumidas">üéØ Boas Pr√°ticas Resumidas</h2><h3 id="strongspan-classbadge-successspan-fazerstrong"><strong><span class="badge success">‚úÖ</span> Fazer:</strong></h3><ul>
<li><strong>Use DTOs</strong> separados para entrada e sa√≠da</li>
<li><strong>Valide todas as entradas</strong> com Bean Validation</li>
<li><strong>Documente completamente</strong> com Swagger</li>
<li><strong>Trate erros adequadamente</strong> com handlers globais</li>
<li><strong>Implemente pagina√ß√£o</strong> para listagens</li>
<li><strong>Use ResponseEntity</strong> para controle preciso de status</li>
<li><strong>Separe responsabilidades</strong> (Controller ‚Üí Service ‚Üí Repository)</li>
</ul>
<h3 id="strongspan-classbadge-dangerspan-evitarstrong"><strong><span class="badge danger">‚ùå</span> Evitar:</strong></h3><ul>
<li><strong>Expor entidades JPA</strong> diretamente</li>
<li><strong>Misturar l√≥gica de neg√≥cio</strong> no controller</li>
<li><strong>Ignorar valida√ß√µes</strong> de entrada</li>
<li><strong>Documenta√ß√£o incompleta</strong> ou ausente</li>
<li><strong>Retornos inconsistentes</strong> de status HTTP</li>
<li><strong>M√©todos muito grandes</strong> ou complexos</li>
</ul>
<hr>
<h2 id="-recursos-adicionais">üìö Recursos Adicionais</h2><h3 id="strong-links-teisstrong"><strong>üîó Links √öteis:</strong></h3><ul>
<li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">Spring Boot Reference</a></li>
<li><a href="https://beanvalidation.org/2.0/spec/">Bean Validation Specification</a></li>
<li><a href="https://swagger.io/specification/">OpenAPI 3 Specification</a></li>
<li><a href="https://docs.spring.io/spring-security/reference/">Spring Security Reference</a></li>
</ul>
<h3 id="strong-padres-recomendadosstrong"><strong>üìñ Padr√µes Recomendados:</strong></h3><ul>
<li><strong>REST API Design</strong> - Princ√≠pios RESTful</li>
<li><strong>Clean Code</strong> - C√≥digo limpo e leg√≠vel</li>
<li><strong>SOLID Principles</strong> - Princ√≠pios de design</li>
<li><strong>Test-Driven Development</strong> - Desenvolvimento orientado a testes</li>
</ul>
<hr>
<p><strong>üéØ Conclus√£o:</strong> Este guia fornece uma base s√≥lida para desenvolvimento de controllers REST profissionais, focando em c√≥digo limpo, documenta√ß√£o completa e boas pr√°ticas de valida√ß√£o e seguran√ßa.</p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Repository Pattern e Spring Data JPA - Guia Completo - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üìä Repository Pattern e Spring Data JPA - Guia Completo</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-repository-pattern-e-spring-data-jpa-guia-completo">üìä Repository Pattern e Spring Data JPA - Guia Completo</h1><p><strong>Finalidade:</strong> Guia fundamental sobre Repository Pattern e Spring Data JPA<br><strong>Foco:</strong> Conceitos, implementa√ß√£o e boas pr√°ticas<br><strong>Tecnologia:</strong> Spring Data JPA, Repository Pattern, Query Methods</p>
<h2 id="-links-rpidos-para-documentao-oficial">üîó Links R√°pidos para Documenta√ß√£o Oficial</h2><table>
<thead>
<tr>
<th><strong>Recurso</strong></th>
<th><strong>Link</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td>üìñ <strong>Spring Data JPA</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Reference Guide</a></td>
<td>Documenta√ß√£o completa oficial</td>
</tr>
<tr>
<td>üîß <strong>Repository Interface</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts">Core Concepts</a></td>
<td>Conceitos fundamentais</td>
</tr>
<tr>
<td>üéØ <strong>Query Methods</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods">Query Creation</a></td>
<td>Cria√ß√£o de consultas</td>
</tr>
<tr>
<td>üìä <strong>JPA Repository</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.repositories">JPA Repositories</a></td>
<td>Reposit√≥rios JPA espec√≠ficos</td>
</tr>
<tr>
<td>üöÄ <strong>Custom Implementations</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations">Custom Repository</a></td>
<td>Implementa√ß√µes customizadas</td>
</tr>
</tbody></table>
<p>üí° <strong>Mais links detalhados dispon√≠veis na <a href="#-documenta%C3%A7%C3%A3o-oficial-e-refer%C3%AAncias">se√ß√£o de documenta√ß√£o oficial</a> no final deste guia.</strong></p>
<h2 id="-navegao-rpida-no-guia">üß≠ Navega√ß√£o R√°pida no Guia</h2><table>
<thead>
<tr>
<th><strong>üìã Se√ß√£o</strong></th>
<th><strong>üéØ Conte√∫do</strong></th>
<th><strong>üîó Link Direto</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>üèóÔ∏è Conceitos</strong></td>
<td>O que √© Repository Pattern</td>
<td><a href="#-o-que-%C3%A9-repository-pattern">Ir para se√ß√£o</a></td>
</tr>
<tr>
<td><strong>üöÄ Spring Data JPA</strong></td>
<td>Automa√ß√£o e funcionalidades</td>
<td><a href="#-spring-data-jpa---o-poder-da-automa%C3%A7%C3%A3o">Ir para se√ß√£o</a></td>
</tr>
<tr>
<td><strong>üìã Hierarquia</strong></td>
<td>Interfaces Repository dispon√≠veis</td>
<td><a href="#-hierarquia-de-interfaces-repository">Ir para se√ß√£o</a></td>
</tr>
<tr>
<td><strong>üîß Implementa√ß√£o</strong></td>
<td>C√≥digo pr√°tico do projeto</td>
<td><a href="#-implementa%C3%A7%C3%A3o-pr%C3%A1tica---projeto-doesangue">Ir para se√ß√£o</a></td>
</tr>
<tr>
<td><strong>üîç Query Methods</strong></td>
<td>Conven√ß√µes de nomenclatura</td>
<td><a href="#-query-methods---conven%C3%A7%C3%B5es-de-nomenclatura">Ir para se√ß√£o</a></td>
</tr>
<tr>
<td><strong>üìä √çndices</strong></td>
<td>Performance com √≠ndices de BD</td>
<td><a href="#-%C3%ADndices-de-banco-de-dados---performance-e-otimiza%C3%A7%C3%A3o"><strong>‚ö° Ir para √çndices</strong></a></td>
</tr>
<tr>
<td><strong>üß™ Testes</strong></td>
<td>Testes com @DataJpaTest</td>
<td><a href="#-testes-com-repository">Ir para se√ß√£o</a></td>
</tr>
<tr>
<td><strong>üåü Avan√ßado</strong></td>
<td>Custom implementations</td>
<td><a href="#-recursos-avan%C3%A7ados">Ir para se√ß√£o</a></td>
</tr>
</tbody></table>
<p>üí° <strong>Mais links detalhados dispon√≠veis na <a href="#-documenta%C3%A7%C3%A3o-oficial-e-refer%C3%AAncias">se√ß√£o de documenta√ß√£o oficial</a> no final deste guia.</strong></p>
<hr>
<h2 id="-o-que-repository-pattern">üéØ O que √© Repository Pattern?</h2><h3 id="strong-conceito-fundamentalstrong"><strong>üèóÔ∏è Conceito Fundamental</strong></h3><p>O <strong>Repository Pattern</strong> √© um padr√£o de design que encapsula a l√≥gica necess√°ria para acessar fontes de dados. Ele centraliza funcionalidades comuns de acesso a dados, proporcionando melhor manutenibilidade e desacoplamento da infraestrutura ou tecnologia usada para acessar bancos de dados.</p>
<h3 id="strong-analogia-prticastrong"><strong>üí° Analogia Pr√°tica:</strong></h3><p>Imagine o Repository como um <strong>&quot;bibliotec√°rio digital&quot;</strong>:</p>
<ul>
<li>üìö <strong>Voc√™ pede</strong> um livro (entidade) pelo t√≠tulo (ID)</li>
<li>üîç <strong>Ele busca</strong> na estante (banco de dados)</li>
<li>üìñ <strong>Retorna</strong> o livro (objeto) para voc√™</li>
<li>üìù <strong>Organiza</strong> novos livros (save) na estante</li>
<li>üóëÔ∏è <strong>Remove</strong> livros antigos (delete) quando necess√°rio</li>
</ul>
<h3 id="strongspan-classbadge-successspan-benefcios-do-repository-patternstrong"><strong><span class="badge success">‚úÖ</span> Benef√≠cios do Repository Pattern:</strong></h3><ul>
<li><strong>üîÑ Abstra√ß√£o</strong> - Esconde detalhes de acesso aos dados</li>
<li><strong>üß™ Testabilidade</strong> - F√°cil mock para testes unit√°rios</li>
<li><strong>üîÑ Reutiliza√ß√£o</strong> - Centraliza opera√ß√µes comuns</li>
<li><strong>üìä Consist√™ncia</strong> - Padroniza acesso aos dados</li>
<li><strong>üõ°Ô∏è Manutenibilidade</strong> - Mudan√ßas isoladas em um local</li>
</ul>
<hr>
<h2 id="-spring-data-jpa-o-poder-da-automao">üöÄ Spring Data JPA - O Poder da Automa√ß√£o</h2><h3 id="strong-o-que-spring-data-jpastrong"><strong>üéØ O que √© Spring Data JPA?</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#preface">Spring Data JPA Introduction</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#getting-started">Getting Started</a></p>
</blockquote>
<p>Spring Data JPA √© um framework que <strong>automatiza</strong> a implementa√ß√£o do Repository Pattern, gerando automaticamente implementa√ß√µes baseadas em conven√ß√µes de nomenclatura.</p>
<h3 id="strong-funcionalidades-principaisstrong"><strong>üî• Funcionalidades Principais:</strong></h3><h4 id="strong1-implementao-automticastrong"><strong>1. ü§ñ Implementa√ß√£o Autom√°tica</strong></h4><pre><code class="language-java">// Voc√™ define apenas a interface
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    // Spring Data JPA implementa automaticamente!
}

// Spring gera automaticamente:
// - save(doador)
// - findById(id)
// - findAll()
// - delete(doador)
// - count()
// - existsById(id)
// E muito mais!
</code></pre>
<h4 id="strong2-query-methods-por-convenostrong"><strong>2. üìù Query Methods por Conven√ß√£o</strong></h4><pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    
    // Spring entende e gera SQL automaticamente!
    List&lt;Doador&gt; findByFullName(String fullName);
    List&lt;Doador&gt; findByEmailContaining(String email);
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    List&lt;Doador&gt; findByIdadeBetween(Integer minIdade, Integer maxIdade);
    List&lt;Doador&gt; findByAtivoTrue();
    
    // Equivale a: SELECT d FROM Doador d WHERE d.fullName = ?1
    // Equivale a: SELECT d FROM Doador d WHERE d.email LIKE %?1%
    // E assim por diante...
}
</code></pre>
<h4 id="strong3-paginao-e-ordenao-nativasstrong"><strong>3. üìä Pagina√ß√£o e Ordena√ß√£o Nativas</strong></h4><pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    
    // Pagina√ß√£o autom√°tica
    Page&lt;Doador&gt; findByEstado(String estado, Pageable pageable);
    
    // Slice para performance
    Slice&lt;Doador&gt; findByCidade(String cidade, Pageable pageable);
    
    // Lista ordenada
    List&lt;Doador&gt; findByAtivoTrueOrderByFullNameAsc();
}
</code></pre>
<hr>
<h2 id="-hierarquia-de-interfaces-repository">üìã Hierarquia de Interfaces Repository</h2><h3 id="strong-estrutura-completastrong"><strong>üèóÔ∏è Estrutura Completa</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/commons/docs/current/reference/html/#repositories.core-concepts">Repository Hierarchy</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.repositories">Interface Overview</a></p>
</blockquote>
<pre><code class="language-java">// 1. üîß Repository (Base) - Marker interface
Repository&lt;T, ID&gt;

// 2. üìö CrudRepository - CRUD b√°sico
CrudRepository&lt;T, ID&gt; extends Repository&lt;T, ID&gt;

// 3. üìÑ PagingAndSortingRepository - Adiciona pagina√ß√£o
PagingAndSortingRepository&lt;T, ID&gt; extends CrudRepository&lt;T, ID&gt;

// 4. üöÄ JpaRepository - Funcionalidades JPA espec√≠ficas
JpaRepository&lt;T, ID&gt; extends PagingAndSortingRepository&lt;T, ID&gt;
</code></pre>
<h3 id="strong-quando-usar-cada-interfacestrong"><strong>üéØ Quando Usar Cada Interface:</strong></h3><h4 id="strong1-coderepositoryltt-idgtcode-interface-markerstrong"><strong>1. <code>Repository&lt;T, ID&gt;</code> - Interface Marker</strong></h4><pre><code class="language-java">// Quando voc√™ quer controle total
public interface DoadorRepository extends Repository&lt;Doador, Long&gt; {
    // Define apenas os m√©todos que precisa
    Optional&lt;Doador&gt; findById(Long id);
    Doador save(Doador doador);
    // N√£o herda nenhum m√©todo autom√°tico
}
</code></pre>
<h4 id="strong2-codecrudrepositoryltt-idgtcode-crud-bsicostrong"><strong>2. <code>CrudRepository&lt;T, ID&gt;</code> - CRUD B√°sico</strong></h4><pre><code class="language-java">public interface DoadorRepository extends CrudRepository&lt;Doador, Long&gt; {
    // Herda automaticamente:
    // save(S entity)
    // saveAll(Iterable&lt;S&gt; entities)
    // findById(ID id)
    // existsById(ID id)
    // findAll()
    // findAllById(Iterable&lt;ID&gt; ids)
    // count()
    // deleteById(ID id)
    // delete(T entity)
    // deleteAll()
}
</code></pre>
<h4 id="strong3-codepagingandsortingrepositoryltt-idgtcode-com-paginaostrong"><strong>3. <code>PagingAndSortingRepository&lt;T, ID&gt;</code> - Com Pagina√ß√£o</strong></h4><pre><code class="language-java">public interface DoadorRepository extends PagingAndSortingRepository&lt;Doador, Long&gt; {
    // Herda tudo do CrudRepository +
    // findAll(Sort sort)
    // findAll(Pageable pageable)
}
</code></pre>
<h4 id="strong4-codejparepositoryltt-idgtcode-completo-recomendadostrong"><strong>4. <code>JpaRepository&lt;T, ID&gt;</code> - Completo (RECOMENDADO)</strong></h4><pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    // Herda tudo dos anteriores +
    // flush()
    // saveAndFlush(S entity)
    // deleteInBatch(Iterable&lt;T&gt; entities)
    // deleteAllInBatch()
    // getReferenceById(ID id)
    // findAll(Example&lt;S&gt; example)
    // findAll(Example&lt;S&gt; example, Pageable pageable)
}
</code></pre>
<hr>
<h2 id="-implementao-prtica-projeto-doesangue">üîß Implementa√ß√£o Pr√°tica - Projeto DoeSangue</h2><h3 id="strong-passo-1-definir-a-interface-repositorystrong"><strong>üìã Passo 1: Definir a Interface Repository</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.definition">Defining Repository Interfaces</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-creation">Repository Methods</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.repository;

import com.faculdade.doesangue_api.entities.Doador;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.time.LocalDate;
import java.util.List;
import java.util.Optional;

@Repository
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // üîç QUERY METHODS - Spring gera SQL automaticamente
    
    /**
     * Busca doador por CPF
     * SQL gerado: SELECT d FROM Doador d WHERE d.cpf = ?1
     */
    Optional&lt;Doador&gt; findByCpf(String cpf);
    
    /**
     * Busca doadores por nome (parcial, case-insensitive)
     * SQL gerado: SELECT d FROM Doador d WHERE LOWER(d.fullName) LIKE LOWER(?1)
     */
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    
    /**
     * Busca doadores por email
     * SQL gerado: SELECT d FROM Doador d WHERE d.email = ?1
     */
    Optional&lt;Doador&gt; findByEmail(String email);
    
    /**
     * Busca doadores ativos por cidade
     * SQL gerado: SELECT d FROM Doador d WHERE d.cidade = ?1 AND d.deletedAt IS NULL
     */
    List&lt;Doador&gt; findByCidadeAndDeletedAtIsNull(String cidade);
    
    /**
     * Busca doadores por estado com pagina√ß√£o
     */
    Page&lt;Doador&gt; findByEstadoAndDeletedAtIsNull(String estado, Pageable pageable);
    
    /**
     * Busca doadores habituais ativos
     */
    List&lt;Doador&gt; findByDoadorHabitudeTrueAndDeletedAtIsNull();
    
    /**
     * Busca doadores por faixa de idade
     */
    List&lt;Doador&gt; findByIdadeBetweenAndDeletedAtIsNull(Integer minIdade, Integer maxIdade);
    
    /**
     * Busca doadores que podem doar (baseado na √∫ltima doa√ß√£o)
     */
    List&lt;Doador&gt; findByUltimaDoacaoBeforeOrUltimaDoacaoIsNull(LocalDate dataLimite);
    
    // üìù CUSTOM QUERIES - Quando precisar de controle maior
    
    /**
     * Busca doadores com JOIN customizado
     */
    @Query(&quot;SELECT d FROM Doador d &quot; +
           &quot;JOIN d.tipoSanguineo ts &quot; +
           &quot;WHERE ts.tipoAbo = :tipoAbo &quot; +
           &quot;AND ts.fatorRh = :fatorRh &quot; +
           &quot;AND d.deletedAt IS NULL&quot;)
    List&lt;Doador&gt; findByTipoSanguineo(
        @Param(&quot;tipoAbo&quot;) String tipoAbo, 
        @Param(&quot;fatorRh&quot;) String fatorRh
    );
    
    /**
     * Estat√≠sticas de doadores por cidade
     */
    @Query(&quot;SELECT d.cidade, COUNT(d) &quot; +
           &quot;FROM Doador d &quot; +
           &quot;WHERE d.deletedAt IS NULL &quot; +
           &quot;GROUP BY d.cidade &quot; +
           &quot;ORDER BY COUNT(d) DESC&quot;)
    List&lt;Object[]&gt; countDoadoresPorCidade();
    
    /**
     * Busca doadores aptos para doar urgente
     */
    @Query(&quot;SELECT d FROM Doador d &quot; +
           &quot;WHERE d.deletedAt IS NULL &quot; +
           &quot;AND d.doadorHabitudel = true &quot; +
           &quot;AND (d.ultimaDoacao IS NULL OR d.ultimaDoacao &lt;= :dataLimite) &quot; +
           &quot;AND d.idade BETWEEN 18 AND 65 &quot; +
           &quot;ORDER BY d.ultimaDoacao ASC NULLS FIRST&quot;)
    List&lt;Doador&gt; findDoadoresAptosParaDoarUrgente(@Param(&quot;dataLimite&quot;) LocalDate dataLimite);
    
    // üî¢ QUERIES DE CONTAGEM
    
    /**
     * Conta doadores ativos por estado
     */
    long countByEstadoAndDeletedAtIsNull(String estado);
    
    /**
     * Verifica se existe doador com CPF
     */
    boolean existsByCpfAndDeletedAtIsNull(String cpf);
    
    /**
     * Verifica se existe doador com email
     */
    boolean existsByEmailAndDeletedAtIsNull(String email);
    
    // üóëÔ∏è SOFT DELETE QUERIES
    
    /**
     * Busca apenas doadores ativos (n√£o deletados)
     */
    List&lt;Doador&gt; findByDeletedAtIsNull();
    
    /**
     * Busca doadores deletados (para auditoria)
     */
    List&lt;Doador&gt; findByDeletedAtIsNotNull();
}
</code></pre>
<h3 id="strong-passo-2-usar-no-servicestrong"><strong>üìã Passo 2: Usar no Service</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-stereotypes">Service Layer</a> | <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction">Transaction Management</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.service;

import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.repository.DoadorRepository;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.time.LocalDate;
import java.util.List;
import java.util.Optional;

@Service
@Transactional(readOnly = true) // Otimiza√ß√£o para opera√ß√µes de leitura
public class DoadorService {

    private final DoadorRepository doadorRepository;

    public DoadorService(DoadorRepository doadorRepository) {
        this.doadorRepository = doadorRepository;
    }

    // üìã OPERA√á√ïES B√ÅSICAS
    
    public List&lt;Doador&gt; listarTodos() {
        return doadorRepository.findByDeletedAtIsNull();
    }
    
    public Page&lt;Doador&gt; listarComPaginacao(Pageable pageable) {
        return doadorRepository.findAll(pageable);
    }
    
    public Optional&lt;Doador&gt; buscarPorId(Long id) {
        return doadorRepository.findById(id)
            .filter(doador -&gt; doador.getDeletedAt() == null);
    }
    
    public Optional&lt;Doador&gt; buscarPorCpf(String cpf) {
        return doadorRepository.findByCpf(cpf);
    }
    
    public Optional&lt;Doador&gt; buscarPorEmail(String email) {
        return doadorRepository.findByEmail(email);
    }
    
    // üîç OPERA√á√ïES DE BUSCA
    
    public List&lt;Doador&gt; buscarPorNome(String nome) {
        return doadorRepository.findByFullNameContainingIgnoreCase(nome);
    }
    
    public List&lt;Doador&gt; buscarPorCidade(String cidade) {
        return doadorRepository.findByCidadeAndDeletedAtIsNull(cidade);
    }
    
    public Page&lt;Doador&gt; buscarPorEstado(String estado, Pageable pageable) {
        return doadorRepository.findByEstadoAndDeletedAtIsNull(estado, pageable);
    }
    
    public List&lt;Doador&gt; buscarDoadoresHabituais() {
        return doadorRepository.findByDoadorHabitudeTrueAndDeletedAtIsNull();
    }
    
    public List&lt;Doador&gt; buscarPorFaixaIdade(Integer minIdade, Integer maxIdade) {
        return doadorRepository.findByIdadeBetweenAndDeletedAtIsNull(minIdade, maxIdade);
    }
    
    // ü©∏ OPERA√á√ïES ESPEC√çFICAS DO DOM√çNIO
    
    public List&lt;Doador&gt; buscarDoadoresAptos() {
        // Doadores que podem doar (√∫ltim doa√ß√£o &gt; 60 dias ou nunca doaram)
        LocalDate dataLimite = LocalDate.now().minusDays(60);
        return doadorRepository.findByUltimaDoacaoBeforeOrUltimaDoacaoIsNull(dataLimite);
    }
    
    public List&lt;Doador&gt; buscarPorTipoSanguineo(String tipoAbo, String fatorRh) {
        return doadorRepository.findByTipoSanguineo(tipoAbo, fatorRh);
    }
    
    public List&lt;Doador&gt; buscarDoadoresUrgente() {
        LocalDate dataLimite = LocalDate.now().minusDays(60);
        return doadorRepository.findDoadoresAptosParaDoarUrgente(dataLimite);
    }
    
    // üíæ OPERA√á√ïES DE PERSIST√äNCIA
    
    @Transactional // Remove readOnly para opera√ß√µes de escrita
    public Doador salvar(Doador doador) {
        return doadorRepository.save(doador);
    }
    
    @Transactional
    public Doador atualizar(Doador doador) {
        return doadorRepository.save(doador);
    }
    
    @Transactional
    public void deletar(Long id) {
        doadorRepository.findById(id)
            .ifPresent(doador -&gt; {
                doador.setDeletedAt(LocalDateTime.now());
                doadorRepository.save(doador); // Soft delete
            });
    }
    
    // üìä OPERA√á√ïES DE ESTAT√çSTICA
    
    public long contarPorEstado(String estado) {
        return doadorRepository.countByEstadoAndDeletedAtIsNull(estado);
    }
    
    public boolean existePorCpf(String cpf) {
        return doadorRepository.existsByCpfAndDeletedAtIsNull(cpf);
    }
    
    public boolean existePorEmail(String email) {
        return doadorRepository.existsByEmailAndDeletedAtIsNull(email);
    }
    
    public List&lt;Object[]&gt; obterEstatisticasPorCidade() {
        return doadorRepository.countDoadoresPorCidade();
    }
}
</code></pre>
<h3 id="strong-passo-3-usar-no-controllerstrong"><strong>üìã Passo 3: Usar no Controller</strong></h3><pre><code class="language-java">package com.faculdade.doesangue_api.controller;

import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.service.DoadorService;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping(&quot;/api/doadores&quot;)
public class DoadorController {

    private final DoadorService doadorService;

    public DoadorController(DoadorService doadorService) {
        this.doadorService = doadorService;
    }

    @GetMapping
    public ResponseEntity&lt;Page&lt;Doador&gt;&gt; listar(Pageable pageable) {
        Page&lt;Doador&gt; doadores = doadorService.listarComPaginacao(pageable);
        return ResponseEntity.ok(doadores);
    }

    @GetMapping(&quot;/{id}&quot;)
    public ResponseEntity&lt;Doador&gt; buscarPorId(@PathVariable Long id) {
        return doadorService.buscarPorId(id)
            .map(ResponseEntity::ok)
            .orElse(ResponseEntity.notFound().build());
    }

    @GetMapping(&quot;/cpf/{cpf}&quot;)
    public ResponseEntity&lt;Doador&gt; buscarPorCpf(@PathVariable String cpf) {
        return doadorService.buscarPorCpf(cpf)
            .map(ResponseEntity::ok)
            .orElse(ResponseEntity.notFound().build());
    }

    @GetMapping(&quot;/buscar&quot;)
    public ResponseEntity&lt;List&lt;Doador&gt;&gt; buscarPorNome(@RequestParam String nome) {
        List&lt;Doador&gt; doadores = doadorService.buscarPorNome(nome);
        return ResponseEntity.ok(doadores);
    }
    
    // Outros endpoints...
}
</code></pre>
<hr>
<h2 id="-query-methods-convenes-de-nomenclatura">üîç Query Methods - Conven√ß√µes de Nomenclatura</h2><h3 id="strong-keywords-principaisstrong"><strong>üìö Keywords Principais</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords">Supported Keywords</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-creation">Query Creation Examples</a></p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>Keyword</strong></th>
<th><strong>Exemplo</strong></th>
<th><strong>SQL Gerado</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>findBy</code></td>
<td><code>findByName(String name)</code></td>
<td><code>WHERE name = ?1</code></td>
</tr>
<tr>
<td><code>findByAnd</code></td>
<td><code>findByNameAndEmail(String name, String email)</code></td>
<td><code>WHERE name = ?1 AND email = ?2</code></td>
</tr>
<tr>
<td><code>findByOr</code></td>
<td><code>findByNameOrEmail(String name, String email)</code></td>
<td><code>WHERE name = ?1 OR email = ?2</code></td>
</tr>
<tr>
<td><code>findByContaining</code></td>
<td><code>findByNameContaining(String name)</code></td>
<td><code>WHERE name LIKE %?1%</code></td>
</tr>
<tr>
<td><code>findByStartingWith</code></td>
<td><code>findByNameStartingWith(String prefix)</code></td>
<td><code>WHERE name LIKE ?1%</code></td>
</tr>
<tr>
<td><code>findByEndingWith</code></td>
<td><code>findByNameEndingWith(String suffix)</code></td>
<td><code>WHERE name LIKE %?1</code></td>
</tr>
<tr>
<td><code>findByIgnoreCase</code></td>
<td><code>findByNameIgnoreCase(String name)</code></td>
<td><code>WHERE UPPER(name) = UPPER(?1)</code></td>
</tr>
<tr>
<td><code>findByBetween</code></td>
<td><code>findByAgeBetween(int start, int end)</code></td>
<td><code>WHERE age BETWEEN ?1 AND ?2</code></td>
</tr>
<tr>
<td><code>findByLessThan</code></td>
<td><code>findByAgeLessThan(int age)</code></td>
<td><code>WHERE age &lt; ?1</code></td>
</tr>
<tr>
<td><code>findByGreaterThan</code></td>
<td><code>findByAgeGreaterThan(int age)</code></td>
<td><code>WHERE age &gt; ?1</code></td>
</tr>
<tr>
<td><code>findByIsNull</code></td>
<td><code>findByEmailIsNull()</code></td>
<td><code>WHERE email IS NULL</code></td>
</tr>
<tr>
<td><code>findByIsNotNull</code></td>
<td><code>findByEmailIsNotNull()</code></td>
<td><code>WHERE email IS NOT NULL</code></td>
</tr>
<tr>
<td><code>findByTrue</code></td>
<td><code>findByActiveTrue()</code></td>
<td><code>WHERE active = true</code></td>
</tr>
<tr>
<td><code>findByFalse</code></td>
<td><code>findByActiveFalse()</code></td>
<td><code>WHERE active = false</code></td>
</tr>
<tr>
<td><code>findByOrderBy</code></td>
<td><code>findByAgeOrderByNameAsc(int age)</code></td>
<td><code>WHERE age = ?1 ORDER BY name ASC</code></td>
</tr>
</tbody></table>
<h3 id="strong-exemplos-prticos-para-doesanguestrong"><strong>üéØ Exemplos Pr√°ticos para DoeSangue:</strong></h3><pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // Busca simples
    List&lt;Doador&gt; findByFullName(String fullName);
    
    // Busca com LIKE (cont√©m)
    List&lt;Doador&gt; findByFullNameContaining(String nome);
    
    // Busca case-insensitive
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    
    // Busca com m√∫ltiplos campos
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    
    // Busca com OR
    List&lt;Doador&gt; findByEmailOrTelefonePrincipal(String email, String telefone);
    
    // Busca por range
    List&lt;Doador&gt; findByIdadeBetween(Integer minIdade, Integer maxIdade);
    
    // Busca com condi√ß√µes nulas
    List&lt;Doador&gt; findByDeletedAtIsNull();
    List&lt;Doador&gt; findByUltimaDoacaoIsNotNull();
    
    // Busca com boolean
    List&lt;Doador&gt; findByDoadorHabitudereTrue();
    List&lt;Doador&gt; findByAtivoFalse();
    
    // Busca com ordena√ß√£o
    List&lt;Doador&gt; findByEstadoOrderByFullNameAsc(String estado);
    List&lt;Doador&gt; findByCidadeOrderByIdadeDescFullNameAsc(String cidade);
    
    // Busca com LIKE e wildcards
    List&lt;Doador&gt; findByEmailStartingWith(String prefixo); // email LIKE &#39;prefix%&#39;
    List&lt;Doador&gt; findByFullNameEndingWith(String sufixo); // nome LIKE &#39;%sufixo&#39;
    
    // Busca por data
    List&lt;Doador&gt; findByDataNascimentoBefore(LocalDate data);
    List&lt;Doador&gt; findByCreatedAtAfter(LocalDateTime data);
    
    // Contadores
    long countByCidade(String cidade);
    long countByEstadoAndAtivoTrue(String estado);
    
    // Verifica√ß√£o de exist√™ncia
    boolean existsByCpf(String cpf);
    boolean existsByEmailAndDeletedAtIsNull(String email);
    
    // Primeira ocorr√™ncia
    Optional&lt;Doador&gt; findFirstByOrderByCreatedAtDesc();
    Optional&lt;Doador&gt; findTopByEstadoOrderByIdadeAsc(String estado);
}
</code></pre>
<hr>
<h2 id="-testes-com-repository">üß™ Testes com Repository</h2><h3 id="strong-teste-unitrio-com-datajpateststrong"><strong>üîß Teste Unit√°rio com @DataJpaTest</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/testing.html#testing.spring-boot-applications.testing-autoconfigured-jpa">Testing Data Layer</a> | <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html">@DataJpaTest</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.repository;

import com.faculdade.doesangue_api.entities.Doador;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageRequest;

import java.time.LocalDate;
import java.util.List;
import java.util.Optional;

import static org.assertj.core.api.Assertions.assertThat;

@DataJpaTest
class DoadorRepositoryTest {

    @Autowired
    private TestEntityManager entityManager;

    @Autowired
    private DoadorRepository doadorRepository;

    @Test
    void deveBuscarDoadorPorCpf() {
        // Given
        Doador doador = new Doador();
        doador.setCpf(&quot;12345678901&quot;);
        doador.setFullName(&quot;Jo√£o Silva&quot;);
        doador.setEmail(&quot;joao@email.com&quot;);
        entityManager.persistAndFlush(doador);

        // When
        Optional&lt;Doador&gt; resultado = doadorRepository.findByCpf(&quot;12345678901&quot;);

        // Then
        assertThat(resultado).isPresent();
        assertThat(resultado.get().getFullName()).isEqualTo(&quot;Jo√£o Silva&quot;);
    }

    @Test
    void deveBuscarDoadoresPorNomeContendo() {
        // Given
        Doador doador1 = criarDoador(&quot;Jo√£o Silva&quot;, &quot;joao@email.com&quot;);
        Doador doador2 = criarDoador(&quot;Maria Jo√£o&quot;, &quot;maria@email.com&quot;);
        Doador doador3 = criarDoador(&quot;Pedro Santos&quot;, &quot;pedro@email.com&quot;);
        
        entityManager.persistAndFlush(doador1);
        entityManager.persistAndFlush(doador2);
        entityManager.persistAndFlush(doador3);

        // When
        List&lt;Doador&gt; resultado = doadorRepository.findByFullNameContainingIgnoreCase(&quot;jo√£o&quot;);

        // Then
        assertThat(resultado).hasSize(2);
        assertThat(resultado).extracting(Doador::getFullName)
            .containsExactlyInAnyOrder(&quot;Jo√£o Silva&quot;, &quot;Maria Jo√£o&quot;);
    }

    @Test
    void deveRetornarPaginacaoCorretamente() {
        // Given
        for (int i = 1; i &lt;= 25; i++) {
            Doador doador = criarDoador(&quot;Doador &quot; + i, &quot;doador&quot; + i + &quot;@email.com&quot;);
            entityManager.persist(doador);
        }
        entityManager.flush();

        // When
        Page&lt;Doador&gt; primeiraPagina = doadorRepository.findAll(PageRequest.of(0, 10));
        Page&lt;Doador&gt; segundaPagina = doadorRepository.findAll(PageRequest.of(1, 10));

        // Then
        assertThat(primeiraPagina.getContent()).hasSize(10);
        assertThat(primeiraPagina.getTotalElements()).isEqualTo(25);
        assertThat(primeiraPagina.getTotalPages()).isEqualTo(3);
        assertThat(segundaPagina.getContent()).hasSize(10);
    }

    @Test
    void deveContarDoadoresPorEstado() {
        // Given
        entityManager.persist(criarDoadorComEstado(&quot;Doador 1&quot;, &quot;SP&quot;));
        entityManager.persist(criarDoadorComEstado(&quot;Doador 2&quot;, &quot;SP&quot;));
        entityManager.persist(criarDoadorComEstado(&quot;Doador 3&quot;, &quot;RJ&quot;));
        entityManager.flush();

        // When
        long countSP = doadorRepository.countByEstadoAndDeletedAtIsNull(&quot;SP&quot;);
        long countRJ = doadorRepository.countByEstadoAndDeletedAtIsNull(&quot;RJ&quot;);

        // Then
        assertThat(countSP).isEqualTo(2);
        assertThat(countRJ).isEqualTo(1);
    }

    @Test
    void deveVerificarExistenciaPorEmail() {
        // Given
        Doador doador = criarDoador(&quot;Jo√£o Silva&quot;, &quot;joao@email.com&quot;);
        entityManager.persistAndFlush(doador);

        // When/Then
        assertThat(doadorRepository.existsByEmailAndDeletedAtIsNull(&quot;joao@email.com&quot;)).isTrue();
        assertThat(doadorRepository.existsByEmailAndDeletedAtIsNull(&quot;inexistente@email.com&quot;)).isFalse();
    }

    // M√©todos auxiliares
    private Doador criarDoador(String nome, String email) {
        Doador doador = new Doador();
        doador.setFullName(nome);
        doador.setEmail(email);
        doador.setCpf(&quot;12345678901&quot;);
        doador.setDataNascimento(LocalDate.of(1990, 1, 1));
        return doador;
    }

    private Doador criarDoadorComEstado(String nome, String estado) {
        Doador doador = criarDoador(nome, nome.toLowerCase().replace(&quot; &quot;, &quot;&quot;) + &quot;@email.com&quot;);
        doador.setEstado(estado);
        return doador;
    }
}
</code></pre>
<hr>
<h2 id="-boas-prticas-e-dicas-avanadas">üí° Boas Pr√°ticas e Dicas Avan√ßadas</h2><h3 id="strongspan-classbadge-successspan-convenes-de-nomenclaturastrong"><strong><span class="badge success">‚úÖ</span> Conven√ß√µes de Nomenclatura</strong></h3><pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Nomes descritivos e claros
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    Optional&lt;Doador&gt; findByEmailAndDeletedAtIsNull(String email);
    Page&lt;Doador&gt; findByEstadoOrderByCreatedAtDesc(String estado, Pageable pageable);

    // &lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; BAD: Nomes amb√≠guos ou confusos
    List&lt;Doador&gt; findByName(String nome); // Qual nome? Full? First? Last?
    List&lt;Doador&gt; find(String value); // Busca por qual campo?
    List&lt;Doador&gt; getStuff(); // Muito gen√©rico
}
</code></pre>
<h3 id="strongspan-classbadge-successspan-performance-e-otimizaostrong"><strong><span class="badge success">‚úÖ</span> Performance e Otimiza√ß√£o</strong></h3><pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use Slice quando n√£o precisar do total de elementos
    Slice&lt;Doador&gt; findByEstado(String estado, Pageable pageable);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use Stream para processamento de grandes volumes
    @Query(&quot;SELECT d FROM Doador d WHERE d.ativo = true&quot;)
    Stream&lt;Doador&gt; streamAllActiveDoadores();

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use proje√ß√µes para buscar apenas campos necess√°rios
    @Query(&quot;SELECT d.id, d.fullName, d.email FROM Doador d WHERE d.estado = :estado&quot;)
    List&lt;Object[]&gt; findBasicInfoByEstado(@Param(&quot;estado&quot;) String estado);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Use EXISTS para verifica√ß√µes de exist√™ncia (mais eficiente)
    @Query(&quot;SELECT CASE WHEN COUNT(d) &gt; 0 THEN true ELSE false END FROM Doador d WHERE d.cpf = :cpf&quot;)
    boolean existsByCpfCustom(@Param(&quot;cpf&quot;) String cpf);
}
</code></pre>
<h3 id="strongspan-classbadge-successspan-tratamento-de-null-e-optionalstrong"><strong><span class="badge success">‚úÖ</span> Tratamento de Null e Optional</strong></h3><pre><code class="language-java">@Service
public class DoadorService {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Use Optional para retornos que podem ser nulos
    public Optional&lt;Doador&gt; buscarPorId(Long id) {
        return doadorRepository.findById(id);
    }

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Trate par√¢metros nulos adequadamente
    public List&lt;Doador&gt; buscarPorNome(String nome) {
        if (nome == null || nome.trim().isEmpty()) {
            return List.of(); // Retorna lista vazia em vez de null
        }
        return doadorRepository.findByFullNameContainingIgnoreCase(nome.trim());
    }

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; GOOD: Use orElse para valores padr√£o
    public Doador buscarOuCriarDefault(Long id) {
        return doadorRepository.findById(id)
            .orElse(new Doador()); // Retorna inst√¢ncia padr√£o
    }
}
</code></pre>
<hr>
<h2 id="-ndices-de-banco-de-dados-performance-e-otimizao">üìä √çndices de Banco de Dados - Performance e Otimiza√ß√£o</h2><h3 id="strong-o-que-so-ndicesstrong"><strong>üéØ O que s√£o √çndices?</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-indexes.html">MySQL Indexes</a> | <a href="https://www.postgresql.org/docs/current/indexes.html">PostgreSQL Indexes</a> | <a href="https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/index">JPA Index Annotation</a></p>
</blockquote>
<p><strong>√çndices</strong> s√£o estruturas de dados especiais que melhoram a velocidade de opera√ß√µes de consulta em uma tabela de banco de dados. Funcionam como um <strong>&quot;√≠ndice de livro&quot;</strong> - permitem localizar dados rapidamente sem varrer toda a tabela.</p>
<h3 id="strong-analogia-prticastrong"><strong>üèóÔ∏è Analogia Pr√°tica:</strong></h3><p>Imagine uma <strong>biblioteca com 10.000 livros</strong>:</p>
<ul>
<li><strong>üìö Sem √≠ndice</strong> - Voc√™ precisa verificar livro por livro para encontrar &quot;Dom Casmurro&quot;</li>
<li><strong>üìá Com √≠ndice</strong> - Voc√™ consulta o cat√°logo por t√≠tulo e vai direto √† estante correta</li>
</ul>
<h3 id="strong-por-que-usar-ndicesstrong"><strong>üöÄ Por que Usar √çndices?</strong></h3><h4 id="strong1-performance-de-consultasstrong"><strong>1. üîç Performance de Consultas</strong></h4><pre><code class="language-sql">-- SEM √çNDICE: Busca sequencial em 1 milh√£o de registros
SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;
-- Tempo: ~500ms (varre toda a tabela)

-- COM √çNDICE: Busca logar√≠tmica
CREATE INDEX idx_doador_cpf ON doador(cpf);
SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;
-- Tempo: ~2ms (acesso direto)
</code></pre>
<h4 id="strong2-escalabilidadestrong"><strong>2. üìà Escalabilidade</strong></h4><pre><code class="language-java">// Repository que se beneficia de √≠ndices
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    
    // Busca por CPF - DEVE ter √≠ndice √∫nico
    Optional&lt;Doador&gt; findByCpf(String cpf);
    
    // Busca por email - DEVE ter √≠ndice √∫nico  
    Optional&lt;Doador&gt; findByEmail(String email);
    
    // Filtros combinados - DEVE ter √≠ndice composto
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    
    // Ordena√ß√£o - DEVE ter √≠ndice para performance
    List&lt;Doador&gt; findByAtivoTrueOrderByCreatedAtDesc();
}
</code></pre>
<h4 id="strong3-integridade-referencialstrong"><strong>3. üéØ Integridade Referencial</strong></h4><pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;)
public class Doador {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // √çndice autom√°tico (PRIMARY KEY)
    
    @Column(unique = true) // Cria √≠ndice √∫nico automaticamente
    private String cpf;
    
    @Column(unique = true) // Cria √≠ndice √∫nico automaticamente
    private String email;
}
</code></pre>
<h3 id="strongspan-classbadge-successspan-principais-benefcios-dos-ndicesstrong"><strong><span class="badge success">‚úÖ</span> Principais Benef√≠cios dos √çndices</strong></h3><table>
<thead>
<tr>
<th><strong>Benef√≠cio</strong></th>
<th><strong>Descri√ß√£o</strong></th>
<th><strong>Impacto</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>‚ö° Velocidade</strong></td>
<td>Consultas at√© 1000x mais r√°pidas</td>
<td>Reduz tempo de resposta drasticamente</td>
</tr>
<tr>
<td><strong>üìà Escalabilidade</strong></td>
<td>Performance mantida com milh√µes de registros</td>
<td>Sistema cresce sem degrada√ß√£o</td>
</tr>
<tr>
<td><strong>üîí Unicidade</strong></td>
<td>Garante valores √∫nicos (CPF, email)</td>
<td>Integridade de dados autom√°tica</td>
</tr>
<tr>
<td><strong>üîç Busca Eficiente</strong></td>
<td>Localiza√ß√£o logar√≠tmica vs linear</td>
<td>O(log n) vs O(n)</td>
</tr>
<tr>
<td><strong>üìä Ordena√ß√£o R√°pida</strong></td>
<td>ORDER BY otimizado</td>
<td>Resultados ordenados sem overhead</td>
</tr>
<tr>
<td><strong>üîó JOINs Eficientes</strong></td>
<td>Relacionamentos mais r√°pidos</td>
<td>Consultas complexas otimizadas</td>
</tr>
</tbody></table>
<h3 id="strong-tipos-de-ndices-e-quando-usarstrong"><strong>üéØ Tipos de √çndices e Quando Usar</strong></h3><h4 id="strong1-primary-key-index-automticostrong"><strong>1. üîë Primary Key Index (Autom√°tico)</strong></h4><pre><code class="language-java">@Entity
public class Doador {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // MySQL cria CLUSTERED INDEX automaticamente
}
</code></pre>
<h4 id="strong2-unique-index-constraintsstrong"><strong>2. üîê Unique Index (Constraints)</strong></h4><pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    @Index(name = &quot;idx_doador_cpf&quot;, columnList = &quot;cpf&quot;, unique = true),
    @Index(name = &quot;idx_doador_email&quot;, columnList = &quot;email&quot;, unique = true)
})
public class Doador {
    
    @Column(unique = true, length = 11)
    private String cpf; // √çndice √∫nico para consultas r√°pidas
    
    @Column(unique = true, length = 100)
    private String email; // √çndice √∫nico para login/valida√ß√£o
}
</code></pre>
<h4 id="strong3-single-column-indexstrong"><strong>3. üìä Single Column Index</strong></h4><pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    @Index(name = &quot;idx_doador_cidade&quot;, columnList = &quot;cidade&quot;),
    @Index(name = &quot;idx_doador_estado&quot;, columnList = &quot;estado&quot;),
    @Index(name = &quot;idx_doador_ativo&quot;, columnList = &quot;ativo&quot;),
    @Index(name = &quot;idx_doador_created_at&quot;, columnList = &quot;createdAt&quot;)
})
public class Doador {
    
    private String cidade; // Para filtros por localiza√ß√£o
    private String estado; // Para relat√≥rios estaduais
    private Boolean ativo; // Para filtros de status
    private LocalDateTime createdAt; // Para ordena√ß√£o temporal
}
</code></pre>
<h4 id="strong4-composite-index-mltiplas-colunasstrong"><strong>4. üéØ Composite Index (M√∫ltiplas Colunas)</strong></h4><pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    // √çndice composto para filtros combinados
    @Index(name = &quot;idx_doador_cidade_estado&quot;, columnList = &quot;cidade, estado&quot;),
    
    // √çndice para soft delete + filtros
    @Index(name = &quot;idx_doador_ativo_cidade&quot;, columnList = &quot;ativo, cidade&quot;),
    
    // √çndice para busca com ordena√ß√£o
    @Index(name = &quot;idx_doador_estado_created&quot;, columnList = &quot;estado, createdAt&quot;)
})
public class Doador {
    // A ordem das colunas no √≠ndice √© IMPORTANTE!
    // cidade, estado != estado, cidade
}
</code></pre>
<h4 id="strong5-functional-index-casos-especiaisstrong"><strong>5. üîç Functional Index (Casos Especiais)</strong></h4><pre><code class="language-sql">-- Para busca case-insensitive em nomes
CREATE INDEX idx_doador_nome_lower ON doador(LOWER(full_name));

-- Para busca por prefixo de telefone
CREATE INDEX idx_doador_ddd ON doador(LEFT(telefone_principal, 2));
</code></pre>
<h3 id="strong-implementao-prtica-com-jpastrong"><strong>üîß Implementa√ß√£o Pr√°tica com JPA</strong></h3><h4 id="strong-exemplo-completo-entidade-doador-otimizadastrong"><strong>üìã Exemplo Completo - Entidade Doador Otimizada</strong></h4><pre><code class="language-java">@Entity
@Table(name = &quot;doador&quot;, indexes = {
    // üîê √çndices √∫nicos para integridade
    @Index(name = &quot;idx_doador_cpf&quot;, columnList = &quot;cpf&quot;, unique = true),
    @Index(name = &quot;idx_doador_email&quot;, columnList = &quot;email&quot;, unique = true),
    
    // üîç √çndices para consultas frequentes
    @Index(name = &quot;idx_doador_cidade&quot;, columnList = &quot;cidade&quot;),
    @Index(name = &quot;idx_doador_estado&quot;, columnList = &quot;estado&quot;),
    @Index(name = &quot;idx_doador_tipo_sanguineo&quot;, columnList = &quot;tipoSanguineoId&quot;),
    
    // üéØ √çndices compostos para filtros combinados
    @Index(name = &quot;idx_doador_cidade_estado&quot;, columnList = &quot;cidade, estado&quot;),
    @Index(name = &quot;idx_doador_ativo_cidade&quot;, columnList = &quot;ativo, cidade&quot;),
    
    // ‚è∞ √çndices para ordena√ß√£o e data
    @Index(name = &quot;idx_doador_created_at&quot;, columnList = &quot;createdAt&quot;),
    @Index(name = &quot;idx_doador_ultima_doacao&quot;, columnList = &quot;ultimaDoacao&quot;),
    
    // üóëÔ∏è Soft delete otimizado
    @Index(name = &quot;idx_doador_deleted_at&quot;, columnList = &quot;deletedAt&quot;),
    @Index(name = &quot;idx_doador_ativo_deleted&quot;, columnList = &quot;ativo, deletedAt&quot;)
})
public class Doador {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // PRIMARY KEY (√≠ndice autom√°tico)

    @Column(unique = true, length = 11, nullable = false)
    private String cpf; // √çndice √∫nico

    @Column(unique = true, length = 100, nullable = false)  
    private String email; // √çndice √∫nico

    @Column(length = 100, nullable = false)
    private String fullName; // Pode precisar de √≠ndice para busca

    @Column(length = 50)
    private String cidade; // √çndice simples

    @Column(length = 2)
    private String estado; // √çndice simples

    @Column(nullable = false)
    private Boolean ativo = true; // √çndice para filtros

    @Column(name = &quot;created_at&quot;, nullable = false)
    private LocalDateTime createdAt; // √çndice para ordena√ß√£o

    @Column(name = &quot;deleted_at&quot;)
    private LocalDateTime deletedAt; // Soft delete

    @Column(name = &quot;ultima_doacao&quot;)
    private LocalDate ultimaDoacao; // √çndice para regras de neg√≥cio

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = &quot;tipo_sanguineo_id&quot;)
    private TipoSanguineo tipoSanguineo; // Foreign key (√≠ndice autom√°tico)
}
</code></pre>
<h4 id="strong-repository-otimizado-com-ndicesstrong"><strong>üìä Repository Otimizado com √çndices</strong></h4><pre><code class="language-java">public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_cpf (√∫nico)
    Optional&lt;Doador&gt; findByCpf(String cpf);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_email (√∫nico)  
    Optional&lt;Doador&gt; findByEmail(String email);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_cidade_estado (composto)
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_ativo_deleted
    List&lt;Doador&gt; findByAtivoTrueAndDeletedAtIsNull();

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_created_at para ORDER BY
    List&lt;Doador&gt; findByEstadoOrderByCreatedAtDesc(String estado);

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; OTIMIZADO: usa idx_doador_ultima_doacao
    List&lt;Doador&gt; findByUltimaDoacaoBeforeAndAtivoTrue(LocalDate data);

    // &lt;span class=&quot;badge warning&quot;&gt;‚ö†Ô∏è&lt;/span&gt; CUIDADO: busca por nome pode ser lenta sem √≠ndice
    List&lt;Doador&gt; findByFullNameContainingIgnoreCase(String nome);
    // Solu√ß√£o: Considere √≠ndice FULLTEXT ou busca externa (Elasticsearch)
}
</code></pre>
<h3 id="strong-anlise-de-performancestrong"><strong>üìà An√°lise de Performance</strong></h3><h4 id="strong-como-verificar-se-ndices-esto-sendo-usadosstrong"><strong>üîç Como Verificar se √çndices Est√£o Sendo Usados</strong></h4><p><strong>MySQL:</strong></p>
<pre><code class="language-sql">-- Verificar plano de execu√ß√£o
EXPLAIN SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;

-- Analisar √≠ndices da tabela
SHOW INDEXES FROM doador;

-- Estat√≠sticas de uso dos √≠ndices
SELECT * FROM information_schema.STATISTICS WHERE table_name = &#39;doador&#39;;
</code></pre>
<p><strong>PostgreSQL:</strong></p>
<pre><code class="language-sql">-- Verificar plano de execu√ß√£o
EXPLAIN ANALYZE SELECT * FROM doador WHERE cpf = &#39;12345678901&#39;;

-- Listar √≠ndices
\d+ doador

-- Verificar uso dos √≠ndices
SELECT * FROM pg_stat_user_indexes WHERE relname = &#39;doador&#39;;
</code></pre>
<h4 id="strong-mtricas-de-performancestrong"><strong>üìä M√©tricas de Performance</strong></h4><table>
<thead>
<tr>
<th><strong>Cen√°rio</strong></th>
<th><strong>Sem √çndice</strong></th>
<th><strong>Com √çndice</strong></th>
<th><strong>Melhoria</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Busca por CPF (1M registros)</td>
<td>500ms</td>
<td>2ms</td>
<td><strong>250x mais r√°pido</strong></td>
</tr>
<tr>
<td>Login por email</td>
<td>300ms</td>
<td>1ms</td>
<td><strong>300x mais r√°pido</strong></td>
</tr>
<tr>
<td>Filtro cidade + estado</td>
<td>800ms</td>
<td>5ms</td>
<td><strong>160x mais r√°pido</strong></td>
</tr>
<tr>
<td>Ordena√ß√£o por data</td>
<td>1200ms</td>
<td>10ms</td>
<td><strong>120x mais r√°pido</strong></td>
</tr>
<tr>
<td>COUNT(*) com WHERE</td>
<td>600ms</td>
<td>3ms</td>
<td><strong>200x mais r√°pido</strong></td>
</tr>
</tbody></table>
<h3 id="strongspan-classbadge-warningspan-cuidados-e-trade-offsstrong"><strong><span class="badge warning">‚ö†Ô∏è</span> Cuidados e Trade-offs</strong></h3><h4 id="strongspan-classbadge-dangerspan-problemas-com-muitos-ndicesstrong"><strong><span class="badge danger">‚ùå</span> Problemas com Muitos √çndices</strong></h4><pre><code class="language-java">// &lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; RUIM: √çndices demais
@Table(indexes = {
    @Index(columnList = &quot;campo1&quot;),
    @Index(columnList = &quot;campo2&quot;), 
    @Index(columnList = &quot;campo3&quot;),
    @Index(columnList = &quot;campo4&quot;),
    @Index(columnList = &quot;campo5&quot;),
    @Index(columnList = &quot;campo1, campo2&quot;),
    @Index(columnList = &quot;campo1, campo3&quot;),
    // ... 20+ √≠ndices
})

// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; BOM: √çndices estrat√©gicos
@Table(indexes = {
    @Index(columnList = &quot;cpf&quot;, unique = true),           // Busca √∫nica
    @Index(columnList = &quot;cidade, estado&quot;),               // Filtro comum
    @Index(columnList = &quot;ativo, deletedAt&quot;),            // Soft delete
    @Index(columnList = &quot;createdAt&quot;)                     // Ordena√ß√£o
})
</code></pre>
<h4 id="strong-impacto-em-operaes-de-escritastrong"><strong>üìä Impacto em Opera√ß√µes de Escrita</strong></h4><pre><code class="language-java">@Service
public class DoadorService {

    // &lt;span class=&quot;badge warning&quot;&gt;‚ö†Ô∏è&lt;/span&gt; CUIDADO: INSERT/UPDATE ficam mais lentos com muitos √≠ndices
    @Transactional
    public Doador salvar(Doador doador) {
        // MySQL precisa atualizar TODOS os √≠ndices na inser√ß√£o
        return doadorRepository.save(doador);
    }

    // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; SOLU√á√ÉO: Batch inserts para grandes volumes
    @Transactional
    public List&lt;Doador&gt; salvarLote(List&lt;Doador&gt; doadores) {
        return doadorRepository.saveAll(doadores); // Mais eficiente
    }
}
</code></pre>
<h3 id="strong-estratgias-de-indexaostrong"><strong>üõ†Ô∏è Estrat√©gias de Indexa√ß√£o</strong></h3><h4 id="strong1-ndices-baseados-em-query-patternsstrong"><strong>1. üéØ √çndices Baseados em Query Patterns</strong></h4><pre><code class="language-java">// Analise suas consultas mais frequentes:
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // üî• CONSULTA FREQUENTE: Login/Autentica√ß√£o
    Optional&lt;Doador&gt; findByEmail(String email);
    // √çNDICE NECESS√ÅRIO: email (√∫nico)

    // üî• CONSULTA FREQUENTE: Busca por documento
    Optional&lt;Doador&gt; findByCpf(String cpf);
    // √çNDICE NECESS√ÅRIO: cpf (√∫nico)

    // üî• CONSULTA FREQUENTE: Relat√≥rios por regi√£o
    List&lt;Doador&gt; findByCidadeAndEstado(String cidade, String estado);
    // √çNDICE NECESS√ÅRIO: (cidade, estado) composto

    // üîç CONSULTA RARA: Busca por nome
    List&lt;Doador&gt; findByFullNameLike(String nome);
    // √çNDICE OPCIONAL: considere busca externa (Elasticsearch)
}
</code></pre>
<h4 id="strong2-monitoramento-de-performancestrong"><strong>2. üìä Monitoramento de Performance</strong></h4><pre><code class="language-java">// Configura√ß√£o de logging para queries lentas
# application.properties
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Logging de queries lentas (&gt; 1 segundo)
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# MySQL: log de queries lentas
slow_query_log=1
long_query_time=1
</code></pre>
<h4 id="strong3-ferramentas-de-anlisestrong"><strong>3. üîß Ferramentas de An√°lise</strong></h4><pre><code class="language-java">// Bean para monitorar performance
@Component
public class DatabasePerformanceMonitor {

    @EventListener
    public void handleQueryExecution(QueryExecutionEvent event) {
        if (event.getDuration() &gt; 1000) { // &gt; 1 segundo
            log.warn(&quot;Slow query detected: {} ms - {}&quot;, 
                event.getDuration(), event.getSql());
        }
    }
}
</code></pre>
<hr>
<h2 id="-recursos-avanados">üåü Recursos Avan√ßados</h2><h3 id="strong-custom-repository-implementationstrong"><strong>üîß Custom Repository Implementation</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations">Custom Repository Implementations</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#specifications">Criteria API</a></p>
</blockquote>
<pre><code class="language-java">// Interface customizada
public interface DoadorRepositoryCustom {
    List&lt;Doador&gt; findWithComplexCriteria(String nome, String cidade, Integer minIdade);
    Page&lt;DoadorStatisticsDTO&gt; findStatisticsGroupedByCity(Pageable pageable);
}

// Implementa√ß√£o customizada
@Repository
public class DoadorRepositoryImpl implements DoadorRepositoryCustom {

    @PersistenceContext
    private EntityManager entityManager;

    @Override
    public List&lt;Doador&gt; findWithComplexCriteria(String nome, String cidade, Integer minIdade) {
        CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery&lt;Doador&gt; query = cb.createQuery(Doador.class);
        Root&lt;Doador&gt; root = query.from(Doador.class);

        List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();

        if (nome != null &amp;&amp; !nome.trim().isEmpty()) {
            predicates.add(
                cb.like(cb.lower(root.get(&quot;fullName&quot;)), &quot;%&quot; + nome.toLowerCase() + &quot;%&quot;)
            );
        }

        if (cidade != null &amp;&amp; !cidade.trim().isEmpty()) {
            predicates.add(cb.equal(root.get(&quot;cidade&quot;), cidade));
        }

        if (minIdade != null) {
            predicates.add(cb.greaterThanOrEqualTo(root.get(&quot;idade&quot;), minIdade));
        }

        query.where(predicates.toArray(new Predicate[0]));
        query.orderBy(cb.asc(root.get(&quot;fullName&quot;)));

        return entityManager.createQuery(query).getResultList();
    }
}

// Repository principal herda da customizada
public interface DoadorRepository extends 
    JpaRepository&lt;Doador, Long&gt;, 
    DoadorRepositoryCustom {
    // M√©todos padr√£o + m√©todos customizados
}
</code></pre>
<h3 id="strong-projees-e-dtosstrong"><strong>üìä Proje√ß√µes e DTOs</strong></h3><pre><code class="language-java">// Interface de proje√ß√£o
public interface DoadorProjection {
    String getFullName();
    String getEmail();
    String getCidade();
    Integer getIdade();
}

// DTO de proje√ß√£o
public class DoadorSummaryDTO {
    private String nome;
    private String cidade;
    private String estado;
    
    // Construtores, getters, setters
}

// Uso no Repository
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {

    // Proje√ß√£o com interface
    List&lt;DoadorProjection&gt; findProjectedByEstado(String estado);

    // Proje√ß√£o com DTO e construtor
    @Query(&quot;SELECT new com.faculdade.doesangue_api.dto.DoadorSummaryDTO(d.fullName, d.cidade, d.estado) &quot; +
           &quot;FROM Doador d WHERE d.ativo = true&quot;)
    List&lt;DoadorSummaryDTO&gt; findSummaryOfActiveDoadores();
}
</code></pre>
<hr>
<h2 id="-documentao-oficial-e-referncias">üìö Documenta√ß√£o Oficial e Refer√™ncias</h2><h3 id="strong-spring-data-jpa-documentao-principalstrong"><strong>üåü Spring Data JPA - Documenta√ß√£o Principal</strong></h3><h4 id="strong-core-documentationstrong"><strong>üìñ Core Documentation:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Spring Data JPA Reference</a></strong> - Documenta√ß√£o completa oficial</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts">Repository Interfaces</a></strong> - Conceitos fundamentais</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods">Query Methods</a></strong> - Cria√ß√£o de consultas</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations">Custom Implementations</a></strong> - Implementa√ß√µes customizadas</li>
</ul>
<h4 id="strong-query-creationstrong"><strong>üìñ Query Creation:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords">Supported Keywords</a></strong> - Palavras-chave para queries</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.query-creation">Query Creation Examples</a></strong> - Exemplos pr√°ticos</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.named-queries">Named Queries</a></strong> - Queries nomeadas</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query">@Query Annotation</a></strong> - Queries customizadas</li>
</ul>
<h3 id="strong-jpa-e-hibernate-corestrong"><strong>üîß JPA e Hibernate - Core</strong></h3><h4 id="strong-jpa-specificationstrong"><strong>üìñ JPA Specification:</strong></h4><ul>
<li><strong><a href="https://jakarta.ee/specifications/persistence/3.1/">Jakarta Persistence API</a></strong> - Especifica√ß√£o oficial JPA 3.1</li>
<li><strong><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-intro003.htm">Entity Relationships</a></strong> - Relacionamentos entre entidades</li>
<li><strong><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-querylanguage.htm">JPQL Guide</a></strong> - Java Persistence Query Language</li>
</ul>
<h4 id="strong-hibernate-documentationstrong"><strong>üìñ Hibernate Documentation:</strong></h4><ul>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html">Hibernate ORM User Guide</a></strong> - Guia completo</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#hql">HQL Reference</a></strong> - Hibernate Query Language</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#criteria">Criteria API</a></strong> - API de crit√©rios</li>
</ul>
<h3 id="strong-spring-framework-basestrong"><strong>üöÄ Spring Framework - Base</strong></h3><h4 id="strong-spring-framework-corestrong"><strong>üìñ Spring Framework Core:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/">Spring Framework Reference</a></strong> - Documenta√ß√£o completa</li>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#orm-jpa">Data Access with JPA</a></strong> - Integra√ß√£o JPA</li>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction">Transaction Management</a></strong> - Gerenciamento de transa√ß√µes</li>
</ul>
<h4 id="strong-spring-bootstrong"><strong>üìñ Spring Boot:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.jpa-and-spring-data">Spring Boot Data JPA</a></strong> - Configura√ß√£o autom√°tica</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.data">Application Properties</a></strong> - Propriedades de configura√ß√£o</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/testing.html#testing.spring-boot-applications.testing-autoconfigured-jpa">Testing Data Layer</a></strong> - Testes com @DataJpaTest</li>
</ul>
<h3 id="strong-testing-e-qualitystrong"><strong>üìä Testing e Quality</strong></h3><h4 id="strong-testing-frameworksstrong"><strong>üìñ Testing Frameworks:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html">@DataJpaTest</a></strong> - Testes de reposit√≥rio</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/TestEntityManager.html">TestEntityManager</a></strong> - Gerenciamento de entidades em testes</li>
<li><strong><a href="https://assertj.github.io/doc/">AssertJ</a></strong> - Assertions fluentes</li>
<li><strong><a href="https://www.testcontainers.org/modules/databases/">TestContainers</a></strong> - Testes com containers</li>
</ul>
<h3 id="strong-database-indexes-e-performancestrong"><strong>üìä Database Indexes e Performance</strong></h3><h4 id="strong-database-specific-documentationstrong"><strong>üìñ Database-Specific Documentation:</strong></h4><ul>
<li><strong><a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-indexes.html">MySQL Indexes Guide</a></strong> - Guia completo de √≠ndices MySQL</li>
<li><strong><a href="https://dev.mysql.com/doc/refman/8.0/en/optimization-indexes.html">MySQL Index Optimization</a></strong> - Otimiza√ß√£o de √≠ndices</li>
<li><strong><a href="https://www.postgresql.org/docs/current/indexes.html">PostgreSQL Indexes</a></strong> - Documenta√ß√£o oficial PostgreSQL</li>
<li><strong><a href="https://www.postgresql.org/docs/current/indexes-types.html">PostgreSQL Index Types</a></strong> - Tipos de √≠ndices dispon√≠veis</li>
<li><strong><a href="http://h2database.com/html/performance.html#indexes">H2 Database Indexes</a></strong> - √çndices em H2 (testes)</li>
</ul>
<h4 id="strong-jpa-index-annotationsstrong"><strong>üìñ JPA Index Annotations:</strong></h4><ul>
<li><strong><a href="https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/index">JPA Index Annotation</a></strong> - Especifica√ß√£o oficial @Index</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#schema-generation-database-objects">Hibernate Index Strategies</a></strong> - Estrat√©gias de cria√ß√£o de √≠ndices</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.datasource.initialization">Spring Boot Database Initialization</a></strong> - Inicializa√ß√£o de esquemas</li>
</ul>
<h4 id="strong-performance-e-monitoringstrong"><strong>üìñ Performance e Monitoring:</strong></h4><ul>
<li><strong><a href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html">MySQL Performance Schema</a></strong> - Monitoramento de performance</li>
<li><strong><a href="https://www.postgresql.org/docs/current/using-explain.html">PostgreSQL Query Performance</a></strong> - EXPLAIN e an√°lise de queries</li>
<li><strong><a href="https://vladmihalcea.com/jpa-hibernate-performance-tuning/">JPA Performance Tuning</a></strong> - Blog Vlad Mihalcea sobre performance</li>
<li><strong><a href="https://use-the-index-luke.com/">Database Index Design</a></strong> - Guia completo sobre design de √≠ndices</li>
</ul>
<h4 id="strong-tools-e-profilingstrong"><strong>üìñ Tools e Profiling:</strong></h4><ul>
<li><strong><a href="https://dev.mysql.com/doc/workbench/en/wb-performance.html">MySQL Workbench</a></strong> - Ferramentas de performance</li>
<li><strong><a href="https://www.pgadmin.org/docs/pgadmin4/latest/query_tool.html">pgAdmin Query Tool</a></strong> - An√°lise de queries PostgreSQL</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.metrics">Spring Boot Actuator</a></strong> - M√©tricas de aplica√ß√£o</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#statistics">Hibernate Statistics</a></strong> - Estat√≠sticas do Hibernate</li>
</ul>
<h3 id="strong-performance-e-optimizationstrong"><strong>üéØ Performance e Optimization</strong></h3><h4 id="strong-performance-guidesstrong"><strong>üìñ Performance Guides:</strong></h4><ul>
<li><strong><a href="https://vladmihalcea.com/jpa-hibernate-performance-tuning/">JPA Performance Best Practices</a></strong> - Blog Vlad Mihalcea</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#fetching-strategies">N+1 Query Problem</a></strong> - Estrat√©gias de fetch</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.datasource.connection-pool">Connection Pooling</a></strong> - Pool de conex√µes</li>
</ul>
<h3 id="strong-tutorials-e-examplesstrong"><strong>üéì Tutorials e Examples</strong></h3><h4 id="strong-official-guidesstrong"><strong>üìñ Official Guides:</strong></h4><ul>
<li><strong><a href="https://spring.io/guides/gs/accessing-data-jpa/">Accessing Data with JPA</a></strong> - Tutorial b√°sico oficial</li>
<li><strong><a href="https://github.com/spring-projects/spring-data-examples/tree/main/jpa">Spring Data JPA Examples</a></strong> - Exemplos oficiais no GitHub</li>
</ul>
<h4 id="strong-community-resourcesstrong"><strong>üìñ Community Resources:</strong></h4><ul>
<li><strong><a href="https://www.baeldung.com/persistence-with-spring-series">Baeldung JPA Tutorials</a></strong> - S√©rie completa sobre persist√™ncia</li>
<li><strong><a href="https://thorben-janssen.com/">Thorben Janssen&#39;s JPA Tips</a></strong> - Blog especializado em JPA/Hibernate</li>
<li><strong><a href="https://www.petrikainulainen.net/spring-data-jpa-tutorial/">Spring Data JPA Query Methods</a></strong> - Tutorial detalhado</li>
</ul>
<h3 id="strong-quick-referencesstrong"><strong>‚ö° Quick References</strong></h3><h4 id="strong-cheat-sheetsstrong"><strong>üîñ Cheat Sheets:</strong></h4><ul>
<li><strong><a href="https://www.baeldung.com/jpa-annotations">JPA Annotations Reference</a></strong> - Anota√ß√µes JPA essenciais</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords">Spring Data Query Keywords</a></strong> - Keywords para query methods</li>
<li><strong><a href="https://docs.oracle.com/html/E13946_04/ejb3_langref.html">JPQL Syntax Reference</a></strong> - Sintaxe JPQL</li>
</ul>
<hr>
<h2 id="-concluso">üéØ Conclus√£o</h2><p>O <strong>Repository Pattern</strong> com <strong>Spring Data JPA</strong> oferece uma abordagem poderosa e elegante para acesso a dados:</p>
<h3 id="strongspan-classbadge-successspan-benefcios-principaisstrong"><strong><span class="badge success">‚úÖ</span> Benef√≠cios Principais:</strong></h3><ul>
<li><strong>ü§ñ Automa√ß√£o</strong> - Spring gera implementa√ß√µes automaticamente</li>
<li><strong>üìù Conven√ß√µes</strong> - Query methods por nomenclatura</li>
<li><strong>üîÑ Flexibilidade</strong> - Custom queries quando necess√°rio</li>
<li><strong>üß™ Testabilidade</strong> - F√°cil mock e teste unit√°rio</li>
<li><strong>üìä Performance</strong> - Otimiza√ß√µes autom√°ticas e manuais</li>
<li><strong>üõ°Ô∏è Manutenibilidade</strong> - C√≥digo limpo e organizado</li>
</ul>
<h3 id="strong-prximos-passosstrong"><strong>üöÄ Pr√≥ximos Passos:</strong></h3><ol>
<li><strong>Implementar</strong> repository b√°sico para suas entidades</li>
<li><strong>Explorar</strong> query methods por conven√ß√£o</li>
<li><strong>Adicionar</strong> queries customizadas conforme necess√°rio</li>
<li><strong>Testar</strong> com @DataJpaTest</li>
<li><strong>Evoluir</strong> para Specifications para filtros complexos</li>
</ol>
<hr>
<p><em>Este guia fornece uma base s√≥lida para compreender e implementar o Repository Pattern com Spring Data JPA no projeto DoeSangue.</em></p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü©∏ Documenta√ß√£o Completa do Sistema DoeSangue - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
            line-height: 1.7;
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 20px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
        }
        
        a:hover {
            color: #2980b9;
            text-decoration: underline;
        }
        
        /* Blockquotes */
        blockquote {
            background: #ecf0f1;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        blockquote strong {
            color: #2c3e50;
        }
        
        /* Guia Destacado */
        .guia-destaque {
            background: linear-gradient(135deg, #8b5fbf 0%, #b794f6 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(139, 95, 191, 0.3);
        }
        
        .guia-destaque h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .guia-destaque p {
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .guia-destaque .btn {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 12px 20px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }
        
        .guia-destaque .btn:hover {
            background: rgba(255,255,255,0.3);
            text-decoration: none;
        }
        
        .guia-destaque .features {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ Documenta√ß√£o Completa do Sistema DoeSangue</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="../index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <!-- Stats -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number">10</div>
                    <div class="stat-label">Documentos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">17</div>
                    <div class="stat-label">Entidades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">700+</div>
                    <div class="stat-label">Linhas de C√≥digo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">50+</div>
                    <div class="stat-label">Endpoints API</div>
                </div>
            </div>
            
            <h2>üìö Documenta√ß√µes Dispon√≠veis</h2>
            
            <blockquote>
                <strong>üéØ Bem-vindo √† documenta√ß√£o do Sistema DoeSangue!</strong><br>
                Esta √© uma cole√ß√£o completa de documentos t√©cnicos para o projeto de gerenciamento de doa√ß√µes de sangue.
            </blockquote>
            
            <h3>üèóÔ∏è Arquitetura e Design</h3>
            <ul>
                <li><a href="architecture.html"><strong>Arquitetura do Sistema</strong></a> - Vis√£o geral da arquitetura, tecnologias e padr√µes utilizados</li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html"><strong>Documenta√ß√£o das Entidades</strong></a> - Detalhamento completo de todas as entidades do sistema</li>
            </ul>
            
            <h3>üíª Desenvolvimento e API</h3>
            <ul>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html"><strong>Documenta√ß√£o do Controller</strong></a> - Exemplo completo de implementa√ß√£o de controller REST</li>
                <li><a href="GUIA-CONTROLLER-BOAS-PRATICAS.html"><strong>Guia de Boas Pr√°ticas</strong></a> - Boas pr√°ticas para controllers REST, DTOs e valida√ß√µes</li>
                <li><a href="TUTORIAL-JPA-SPECIFICATIONS.html"><strong>Tutorial JPA Specifications</strong></a> - Implementa√ß√£o de filtros din√¢micos com Spring Data JPA</li>
                <li><a href="SWAGGER-DOCUMENTACAO.html"><strong>Configura√ß√£o Swagger</strong></a> - Documenta√ß√£o detalhada da configura√ß√£o OpenAPI</li>
                <li><a href="SWAGGER-RESUMO-IMPLEMENTACAO.html"><strong>Resumo da Implementa√ß√£o Swagger</strong></a> - Guia pr√°tico de implementa√ß√£o</li>
            </ul>
            
            <h3>üîß Guias Fundamentais</h3>
            <div class="guia-destaque">
                <h4>‚ö° Guia Repository Pattern & Spring Data JPA</h4>
                <p>
                    <strong>Guia completo e fundamental</strong> sobre Repository Pattern, Spring Data JPA, Query Methods e otimiza√ß√£o com √≠ndices de banco de dados. 
                    <em>Essencial para entender a base da persist√™ncia no projeto!</em>
                </p>
                <a href="GUIA-REPOSITORY-PATTERN.html" class="btn">
                    üìä Acessar Guia Repository Pattern ‚Üí
                </a>
                <div class="features">
                    <strong>üéØ Inclui:</strong> Conceitos fundamentais ‚Ä¢ Implementa√ß√£o pr√°tica ‚Ä¢ Query Methods ‚Ä¢ √çndices para performance ‚Ä¢ Testes ‚Ä¢ 60+ links oficiais
                </div>
            </div>
            
            <h3>üìã Planejamento e Roadmap</h3>
            <ul>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html"><strong>Roadmap e Pr√≥ximos Passos</strong></a> - Planejamento de desenvolvimento e melhorias</li>
                <li><a href="PLANO-ACAO-SEMANAL.html"><strong>Plano de A√ß√£o Semanal</strong></a> - Cronograma detalhado de atividades</li>
            </ul>
            
            <h2>üöÄ Como Usar Esta Documenta√ß√£o</h2>
            
            <blockquote>
                <strong>üë®‚Äçüíª Para Desenvolvedores:</strong><br>
                Comece pela <a href="architecture.html">Arquitetura</a> para entender a estrutura geral, 
                depois veja o <a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">Controller</a> para exemplos pr√°ticos.
            </blockquote>
            
            <blockquote>
                <strong>üìä Para Analistas:</strong><br>
                Foque na <a href="DOCUMENTACAO-ENTIDADES.html">Documenta√ß√£o das Entidades</a> e no 
                <a href="ROADMAP-PROXIMOS-PASSOS.html">Roadmap</a> para entender os requisitos e planejamento.
            </blockquote>
            
            <h2>üõ†Ô∏è Tecnologias Utilizadas</h2>
            
            <ul>
                <li><strong>Backend:</strong> Spring Boot 3.5.5</li>
                <li><strong>ORM:</strong> JPA/Hibernate 6.x</li>
                <li><strong>Database:</strong> SQL Server 2019+</li>
                <li><strong>Seguran√ßa:</strong> Spring Security 6.x</li>
                <li><strong>Documenta√ß√£o:</strong> SpringDoc OpenAPI 3.0</li>
                <li><strong>Build:</strong> Maven 3.9+</li>
                <li><strong>Deploy:</strong> GitHub Pages</li>
            </ul>
            
            <h2>üìû Informa√ß√µes do Projeto</h2>
            
            <ul>
                <li><strong>GitHub:</strong> <a href="https://github.com/nisze/doesangue_backend">github.com/nisze/doesangue_backend</a></li>
                <li><strong>Documenta√ß√£o API:</strong> <a href="http://localhost:8080/swagger-ui.html">localhost:8080/swagger-ui.html</a></li>
                <li><strong>Desenvolvido para:</strong> An√°lise e Desenvolvimento de Sistemas</li>
                <li><strong>Finalidade:</strong> Facilitar a conex√£o entre doadores e hemocentros</li>
            </ul>
            
            <blockquote>
                <strong>üí° Dica:</strong> Use Ctrl+F para buscar rapidamente por t√≥picos espec√≠ficos nesta documenta√ß√£o.
            </blockquote>
        </div>
        
        <div class="footer">
            üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue<br>
            üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento
        </div>
    </div>
</body>
</html>
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            background: white;
            min-height: calc(100vh - 200px);
        }
        
        /* Stats Cards */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #3498db;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .stat-number {
            font-size: 3em;
            font-weight: 700;
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 1em;
            color: #7f8c8d;
            font-weight: 500;
        }
        
        /* Section Headers */
        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 40px 0 25px 0;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .section-header .icon {
            font-size: 1.5em;
        }
        
        .section-header h2 {
            color: #2c3e50;
            font-size: 1.8em;
            font-weight: 600;
            margin: 0;
        }
        
        /* Welcome Message */
        .welcome-message {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #17a2b8;
            margin: 30px 0;
        }
        
        .welcome-message strong {
            color: #17a2b8;
            font-size: 1.1em;
        }
        
        .welcome-message p {
            margin: 8px 0 0 0;
            color: #495057;
            line-height: 1.6;
        }
        
        /* Content Sections */
        .content-section {
            margin: 35px 0;
        }
        
        .content-section h3 {
            color: #2c3e50;
            font-size: 1.4em;
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .doc-list {
            list-style: none;
            padding: 0;
        }
        
        .doc-list li {
            margin-bottom: 12px;
            padding-left: 0;
        }
        
        .doc-list a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .doc-list a:hover {
            color: #2980b9;
            text-decoration: underline;
        }
        
        .doc-list strong {
            color: #2c3e50;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .main-header {
                padding: 30px 15px;
            }
            
            .main-header h1 {
                font-size: 2em;
            }
            
            .nav {
                flex-direction: column;
            }
            
            .nav-item {
                text-align: center;
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            
            .container {
                padding: 20px 15px;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header Principal -->
    <div class="main-header">
        <div class="blood-icon">ü©∏</div>
        <h1>Documenta√ß√£o Completa do Sistema DoeSangue</h1>
        <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
        <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
    </div>
    
    <!-- Navigation -->
    <div class="nav-container">
        <nav class="nav">
            <a href="index.html" class="nav-item active">
                üè† In√≠cio
            </a>
            <a href="html/architecture.html" class="nav-item">
                üèóÔ∏è Arquitetura
            </a>
            <a href="html/DOCUMENTACAO-ENTIDADES.html" class="nav-item">
                üìä Entidades
            </a>
            <a href="html/DOADOR-CONTROLLER-DOCUMENTACAO.html" class="nav-item">
                üéÆ Controller
            </a>
            <a href="html/SWAGGER-DOCUMENTACAO.html" class="nav-item">
                üìñ Swagger
            </a>
            <a href="html/ROADMAP-PROXIMOS-PASSOS.html" class="nav-item">
                üó∫Ô∏è Roadmap
            </a>
        </nav>
    </div>
    
    <!-- Container Principal -->
    <div class="container">
        <!-- Stats -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">10</div>
                <div class="stat-label">Documentos</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">17</div>
                <div class="stat-label">Entidades</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">700+</div>
                <div class="stat-label">Linhas de C√≥digo</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">50+</div>
                <div class="stat-label">Endpoints API</div>
            </div>
        </div>
        
        <!-- Section Header -->
        <div class="section-header">
            <span class="icon">üìö</span>
            <h2>Documenta√ß√µes Dispon√≠veis</h2>
        </div>
        
        <!-- Welcome Message -->
        <div class="welcome-message">
            <strong>üéØ Bem-vindo √† documenta√ß√£o do Sistema DoeSangue!</strong>
            <p>Esta √© uma cole√ß√£o completa de documentos t√©cnicos para o projeto de gerenciamento de doa√ß√µes de sangue.</p>
        </div>
        
        <!-- Content Sections -->
        <div class="content-section">
            <h3>üèóÔ∏è Arquitetura e Design</h3>
            <ul class="doc-list">
                <li><a href="html/architecture.html"><strong>Arquitetura do Sistema</strong></a> - Vis√£o geral da arquitetura, tecnologias e padr√µes utilizados</li>
                <li><a href="html/DOCUMENTACAO-ENTIDADES.html"><strong>Documenta√ß√£o das Entidades</strong></a> - Detalhamento completo de todas as entidades do sistema</li>
            </ul>
        </div>
        
        <div class="content-section">
            <h3>üíª Desenvolvimento e API</h3>
            <ul class="doc-list">
                <li><a href="html/DOADOR-CONTROLLER-DOCUMENTACAO.html"><strong>Documenta√ß√£o do Controller</strong></a> - Exemplo completo de implementa√ß√£o de controller REST</li>
                <li><a href="html/GUIA-CONTROLLER-BOAS-PRATICAS.html"><strong>Guia de Boas Pr√°ticas</strong></a> - Boas pr√°ticas para controllers REST, DTOs e valida√ß√µes</li>
                <li><a href="html/TUTORIAL-JPA-SPECIFICATIONS.html"><strong>Tutorial JPA Specifications</strong></a> - Implementa√ß√£o de filtros din√¢micos com Spring Data JPA</li>
                <li><a href="html/SWAGGER-DOCUMENTACAO.html"><strong>Configura√ß√£o Swagger</strong></a> - Documenta√ß√£o detalhada da configura√ß√£o OpenAPI</li>
                <li><a href="html/SWAGGER-RESUMO-IMPLEMENTACAO.html"><strong>Resumo da Implementa√ß√£o Swagger</strong></a> - Guia pr√°tico de implementa√ß√£o</li>
            </ul>
        </div>
        
        <div class="content-section">
            <h3>üîß Guias Fundamentais</h3>
            <div style="background: linear-gradient(135deg, #8b5fbf 0%, #b794f6 100%); color: white; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: white; margin-bottom: 15px; font-size: 1.3em;">‚ö° Guia Repository Pattern & Spring Data JPA</h4>
                <p style="margin-bottom: 20px; line-height: 1.6;">
                    <strong>Guia completo e fundamental</strong> sobre Repository Pattern, Spring Data JPA, Query Methods e otimiza√ß√£o com √≠ndices de banco de dados. 
                    <em>Essencial para entender a base da persist√™ncia no projeto!</em>
                </p>
                <a href="html/GUIA-REPOSITORY-PATTERN.html" style="display: inline-block; background: rgba(255,255,255,0.2); color: white; padding: 12px 20px; text-decoration: none; border-radius: 6px; font-weight: 600; border: 2px solid rgba(255,255,255,0.3);">
                    üìä Acessar Guia Repository Pattern ‚Üí
                </a>
                <div style="margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
                    <strong>üéØ Inclui:</strong> Conceitos fundamentais ‚Ä¢ Implementa√ß√£o pr√°tica ‚Ä¢ Query Methods ‚Ä¢ √çndices para performance ‚Ä¢ Testes ‚Ä¢ 60+ links oficiais
                </div>
            </div>
        </div>
        
        <div class="content-section">
            <h3>üìã Planejamento e Roadmap</h3>
            <ul class="doc-list">
                <li><a href="html/ROADMAP-PROXIMOS-PASSOS.html"><strong>Roadmap e Pr√≥ximos Passos</strong></a> - Planejamento de desenvolvimento e melhorias</li>
                <li><a href="html/PLANO-ACAO-SEMANAL.html"><strong>Plano de A√ß√£o Semanal</strong></a> - Cronograma detalhado de atividades</li>
            </ul>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Plano de A√ß√£o Imediato - Pr√≥ximos 7 Dias - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üéØ Plano de A√ß√£o Imediato - Pr√≥ximos 7 Dias</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-plano-de-ao-imediato-prximos-7-dias">üéØ Plano de A√ß√£o Imediato - Pr√≥ximos 7 Dias</h1><p><strong>Data:</strong> 27 de Agosto de 2025<br><strong>Foco:</strong> Implementa√ß√£o das APIs Base e Autentica√ß√£o</p>
<hr>
<h2 id="-tarefas-prioritrias-esta-semana">üìã Tarefas Priorit√°rias (Esta Semana)</h2><h3 id="strongdia-1-2-autenticao-e-seguranastrong"><strong>DIA 1-2: Autentica√ß√£o e Seguran√ßa</strong></h3><h4 id="strongspan-classbadge-successspan-tarefa-1-implementar-jwt-servicestrong"><strong><span class="badge success">‚úÖ</span> Tarefa 1: Implementar JWT Service</strong></h4><pre><code class="language-java">// Criar: src/main/java/com/faculdade/doesangue_api/security/JwtService.java
@Service
public class JwtService {
    public String generateToken(User user);
    public String extractUsername(String token);
    public boolean isTokenValid(String token, User user);
    public boolean isTokenExpired(String token);
}
</code></pre>
<h4 id="strongspan-classbadge-successspan-tarefa-2-configurar-spring-securitystrong"><strong><span class="badge success">‚úÖ</span> Tarefa 2: Configurar Spring Security</strong></h4><pre><code class="language-java">// Criar: src/main/java/com/faculdade/doesangue_api/security/SecurityConfig.java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    // Configurar endpoints p√∫blicos/privados
    // Configurar filtro JWT
    // Configurar CORS
}
</code></pre>
<h4 id="strongspan-classbadge-successspan-tarefa-3-controller-de-autenticaostrong"><strong><span class="badge success">‚úÖ</span> Tarefa 3: Controller de Autentica√ß√£o</strong></h4><pre><code class="language-java">// Criar: src/main/java/com/faculdade/doesangue_api/controllers/AuthController.java
@RestController
@RequestMapping(&quot;/api/auth&quot;)
public class AuthController {
    @PostMapping(&quot;/login&quot;)
    @PostMapping(&quot;/refresh&quot;)  
    @GetMapping(&quot;/me&quot;)
}
</code></pre>
<h3 id="strongdia-3-4-dtos-e-validaesstrong"><strong>DIA 3-4: DTOs e Valida√ß√µes</strong></h3><h4 id="strongspan-classbadge-successspan-tarefa-4-dtos-basestrong"><strong><span class="badge success">‚úÖ</span> Tarefa 4: DTOs Base</strong></h4><pre><code class="language-java">// Criar DTOs em: src/main/java/com/faculdade/doesangue_api/dtos/

1. AuthLoginDTO         // Login request
2. AuthResponseDTO      // Login response com token
3. UserDTO              // User para visualiza√ß√£o
4. UserCreateDTO        // User para cria√ß√£o
5. UserUpdateDTO        // User para atualiza√ß√£o
6. DoadorDTO            // Doador para visualiza√ß√£o
7. DoadorCreateDTO      // Doador para cria√ß√£o
8. HemocentroDTO        // Hemocentro b√°sico
</code></pre>
<h4 id="strongspan-classbadge-successspan-tarefa-5-validaes-bean-validationstrong"><strong><span class="badge success">‚úÖ</span> Tarefa 5: Valida√ß√µes Bean Validation</strong></h4><pre><code class="language-java">// Adicionar anota√ß√µes nos DTOs:
@NotNull
@NotBlank
@Email
@CPF
@Size(min = 8, max = 100)
@Pattern(regexp = &quot;...&quot;)
</code></pre>
<h3 id="strongdia-5-6-controllers-basestrong"><strong>DIA 5-6: Controllers Base</strong></h3><h4 id="strongspan-classbadge-successspan-tarefa-6-usercontroller-completostrong"><strong><span class="badge success">‚úÖ</span> Tarefa 6: UserController Completo</strong></h4><pre><code class="language-java">// Implementar: src/main/java/com/faculdade/doesangue_api/controllers/UserController.java
@RestController
@RequestMapping(&quot;/api/users&quot;)
public class UserController {
    @GetMapping                 // Listar users paginado
    @GetMapping(&quot;/{id}&quot;)        // Buscar por ID
    @PostMapping                // Criar user
    @PutMapping(&quot;/{id}&quot;)        // Atualizar user
    @DeleteMapping(&quot;/{id}&quot;)     // Soft delete
    @GetMapping(&quot;/{id}/setores&quot;) // Setores do user
}
</code></pre>
<h4 id="strongspan-classbadge-successspan-tarefa-7-doadorcontroller-inicialstrong"><strong><span class="badge success">‚úÖ</span> Tarefa 7: DoadorController Inicial</strong></h4><pre><code class="language-java">// Implementar: DoadorController com endpoints b√°sicos
@RestController
@RequestMapping(&quot;/api/doadores&quot;)
public class DoadorController {
    @GetMapping                 // Listar doadores
    @GetMapping(&quot;/{id}&quot;)        // Buscar por ID  
    @PostMapping                // Criar doador
    @PutMapping(&quot;/{id}&quot;)        // Atualizar doador
}
</code></pre>
<h3 id="strongdia-7-testes-e-documentaostrong"><strong>DIA 7: Testes e Documenta√ß√£o</strong></h3><h4 id="strongspan-classbadge-successspan-tarefa-8-testes-bsicosstrong"><strong><span class="badge success">‚úÖ</span> Tarefa 8: Testes B√°sicos</strong></h4><pre><code class="language-java">// Criar testes em: src/test/java/
1. AuthControllerTest
2. UserControllerTest  
3. JwtServiceTest
</code></pre>
<h4 id="strongspan-classbadge-successspan-tarefa-9-atualizar-swaggerstrong"><strong><span class="badge success">‚úÖ</span> Tarefa 9: Atualizar Swagger</strong></h4><pre><code class="language-java">// Verificar se documenta√ß√£o est√° sendo gerada corretamente
// Testar todos os endpoints no Swagger UI
// Adicionar exemplos de JSON nos DTOs
</code></pre>
<hr>
<h2 id="-implementao-detalhada">üõ†Ô∏è Implementa√ß√£o Detalhada</h2><h3 id="strong1-estrutura-de-pastas-a-criarstrong"><strong>1. Estrutura de Pastas a Criar:</strong></h3><pre><code>src/main/java/com/faculdade/doesangue_api/
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ AuthController.java
‚îÇ   ‚îú‚îÄ‚îÄ UserController.java
‚îÇ   ‚îú‚îÄ‚îÄ DoadorController.java
‚îÇ   ‚îî‚îÄ‚îÄ SystemController.java (j√° existe)
‚îú‚îÄ‚îÄ dtos/
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthLoginDTO.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthResponseDTO.java
‚îÇ   ‚îú‚îÄ‚îÄ user/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserDTO.java
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserCreateDTO.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserUpdateDTO.java
‚îÇ   ‚îî‚îÄ‚îÄ doador/
‚îÇ       ‚îú‚îÄ‚îÄ DoadorDTO.java
‚îÇ       ‚îî‚îÄ‚îÄ DoadorCreateDTO.java
‚îú‚îÄ‚îÄ security/
‚îÇ   ‚îú‚îÄ‚îÄ JwtService.java
‚îÇ   ‚îú‚îÄ‚îÄ SecurityConfig.java
‚îÇ   ‚îî‚îÄ‚îÄ JwtAuthenticationFilter.java
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ AuthService.java
‚îÇ   ‚îú‚îÄ‚îÄ UserService.java
‚îÇ   ‚îî‚îÄ‚îÄ DoadorService.java
‚îî‚îÄ‚îÄ exceptions/
    ‚îú‚îÄ‚îÄ GlobalExceptionHandler.java
    ‚îî‚îÄ‚îÄ BusinessException.java
</code></pre>
<h3 id="strong2-dependncias-necessrias-verificar-no-pomxmlstrong"><strong>2. Depend√™ncias Necess√°rias (verificar no pom.xml):</strong></h3><pre><code class="language-xml">&lt;!-- JWT j√° tem --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.auth0&lt;/groupId&gt;
    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- Security j√° tem --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- Validation j√° tem --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="strong3-exemplo-de-dto-com-validaostrong"><strong>3. Exemplo de DTO com Valida√ß√£o:</strong></h3><pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de usu√°rio&quot;)
public class UserCreateDTO {
    
    @Schema(description = &quot;Nome completo&quot;, example = &quot;Jo√£o Silva Santos&quot;)
    @NotBlank(message = &quot;Nome √© obrigat√≥rio&quot;)
    @Size(max = 100, message = &quot;Nome deve ter no m√°ximo 100 caracteres&quot;)
    private String fullName;
    
    @Schema(description = &quot;Email √∫nico&quot;, example = &quot;joao@email.com&quot;)
    @NotBlank(message = &quot;Email √© obrigat√≥rio&quot;)
    @Email(message = &quot;Email deve ter formato v√°lido&quot;)
    private String email;
    
    @Schema(description = &quot;CPF √∫nico&quot;, example = &quot;12345678901&quot;)
    @NotBlank(message = &quot;CPF √© obrigat√≥rio&quot;)
    @Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve ter 11 d√≠gitos&quot;)
    private String cpf;
    
    @Schema(description = &quot;Senha&quot;, example = &quot;senha123&quot;)
    @NotBlank(message = &quot;Senha √© obrigat√≥ria&quot;)
    @Size(min = 8, message = &quot;Senha deve ter no m√≠nimo 8 caracteres&quot;)
    private String senha;
    
    @Schema(description = &quot;ID do role&quot;, example = &quot;1&quot;)
    @NotNull(message = &quot;Role √© obrigat√≥rio&quot;)
    private Long roleId;
    
    @Schema(description = &quot;ID do hemocentro&quot;, example = &quot;1&quot;)
    @NotNull(message = &quot;Hemocentro √© obrigat√≥rio&quot;)
    private Long hemocentroId;
}
</code></pre>
<h3 id="strong4-exemplo-de-controller-com-documentaostrong"><strong>4. Exemplo de Controller com Documenta√ß√£o:</strong></h3><pre><code class="language-java">@RestController
@RequestMapping(&quot;/api/users&quot;)
@Tag(name = &quot;Usu√°rios&quot;, description = &quot;Gest√£o de usu√°rios do sistema&quot;)
@SecurityRequirement(name = &quot;bearerAuth&quot;)
public class UserController {

    @Operation(
        summary = &quot;Listar usu√°rios&quot;,
        description = &quot;Retorna lista paginada de usu√°rios com filtros opcionais&quot;
    )
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Lista retornada com sucesso&quot;),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;N√£o autorizado&quot;),
        @ApiResponse(responseCode = &quot;403&quot;, description = &quot;Acesso negado&quot;)
    })
    @GetMapping
    public ResponseEntity&lt;Page&lt;UserDTO&gt;&gt; listarUsuarios(
            @Parameter(description = &quot;P√°gina (0-based)&quot;, example = &quot;0&quot;)
            @RequestParam(defaultValue = &quot;0&quot;) int page,
            
            @Parameter(description = &quot;Tamanho da p√°gina&quot;, example = &quot;20&quot;)
            @RequestParam(defaultValue = &quot;20&quot;) int size,
            
            @Parameter(description = &quot;Filtro por nome&quot;, example = &quot;Jo√£o&quot;)
            @RequestParam(required = false) String nome,
            
            @Parameter(description = &quot;Filtro por role&quot;, example = &quot;MEDICO&quot;)
            @RequestParam(required = false) String role) {
        
        // Implementa√ß√£o...
        return ResponseEntity.ok(userService.listarUsuarios(page, size, nome, role));
    }
}
</code></pre>
<hr>
<h2 id="-critrios-de-aceitao">üß™ Crit√©rios de Aceita√ß√£o</h2><h3 id="strongspan-classbadge-successspan-ao-final-da-semana-deve-estar-funcionandostrong"><strong><span class="badge success">‚úÖ</span> Ao Final da Semana, Deve Estar Funcionando:</strong></h3><ol>
<li><p><strong>Autentica√ß√£o:</strong></p>
<ul>
<li>Login em <code>/api/auth/login</code> retorna JWT v√°lido</li>
<li>Endpoints protegidos requerem token</li>
<li>Swagger UI permite autentica√ß√£o</li>
</ul>
</li>
<li><p><strong>APIs Base:</strong></p>
<ul>
<li>CRUD completo de usu√°rios</li>
<li>CRUD b√°sico de doadores</li>
<li>Pagina√ß√£o funcionando</li>
<li>Valida√ß√µes ativas</li>
</ul>
</li>
<li><p><strong>Documenta√ß√£o:</strong></p>
<ul>
<li>Swagger UI com todos os endpoints</li>
<li>Exemplos de JSON funcionais</li>
<li>Grupos organizados corretamente</li>
</ul>
</li>
<li><p><strong>Qualidade:</strong></p>
<ul>
<li>Testes b√°sicos passando</li>
<li>Logs estruturados</li>
<li>Tratamento de erros</li>
</ul>
</li>
</ol>
<hr>
<h2 id="-testes-de-aceitao">üéØ Testes de Aceita√ß√£o</h2><h3 id="strongcenrios-para-testarstrong"><strong>Cen√°rios para Testar:</strong></h3><h4 id="strongautenticaostrong"><strong>Autentica√ß√£o:</strong></h4><pre><code class="language-bash"># 1. Login bem-sucedido
POST /api/auth/login
{
  &quot;email&quot;: &quot;admin@doesangue.com&quot;,
  &quot;senha&quot;: &quot;admin123&quot;
}
# Esperado: 200 + JWT token

# 2. Login com credenciais inv√°lidas  
# Esperado: 401 Unauthorized

# 3. Acesso a endpoint protegido sem token
GET /api/users
# Esperado: 401 Unauthorized

# 4. Acesso com token v√°lido
GET /api/users
Authorization: Bearer &lt;token&gt;
# Esperado: 200 + lista de usu√°rios
</code></pre>
<h4 id="strongcrud-de-usuriosstrong"><strong>CRUD de Usu√°rios:</strong></h4><pre><code class="language-bash"># 1. Criar usu√°rio
POST /api/users
{
  &quot;fullName&quot;: &quot;Dr. Jo√£o Silva&quot;,
  &quot;email&quot;: &quot;joao@hospital.com&quot;,
  &quot;cpf&quot;: &quot;12345678901&quot;,
  &quot;senha&quot;: &quot;senha123&quot;,
  &quot;roleId&quot;: 2,
  &quot;hemocentroId&quot;: 1
}
# Esperado: 201 Created

# 2. Buscar usu√°rio criado
GET /api/users/{id}
# Esperado: 200 + dados do usu√°rio

# 3. Listar usu√°rios paginado
GET /api/users?page=0&amp;size=10
# Esperado: 200 + p√°gina de usu√°rios
</code></pre>
<hr>
<h2 id="-comandos-para-testar">üöÄ Comandos para Testar</h2><h3 id="stronginiciar-aplicaostrong"><strong>Iniciar Aplica√ß√£o:</strong></h3><pre><code class="language-bash">cd doesangue_backend
./mvnw spring-boot:run
</code></pre>
<h3 id="strongacessar-swaggerstrong"><strong>Acessar Swagger:</strong></h3><pre><code>http://localhost:8080/swagger-ui.html
</code></pre>
<h3 id="stronghealth-checkstrong"><strong>Health Check:</strong></h3><pre><code>http://localhost:8080/api/system/health
</code></pre>
<hr>
<h2 id="-prximas-reunies">üìû Pr√≥ximas Reuni√µes</h2><h3 id="strongcheckpoint-dirio-dailystrong"><strong>Checkpoint Di√°rio (Daily):</strong></h3><ul>
<li><strong>Hor√°rio:</strong> 9h00</li>
<li><strong>Dura√ß√£o:</strong> 15min</li>
<li><strong>Foco:</strong> Progresso do dia, bloqueios, pr√≥ximas tarefas</li>
</ul>
<h3 id="strongreview-semanal-sextastrong"><strong>Review Semanal (Sexta):</strong></h3><ul>
<li><strong>Hor√°rio:</strong> 16h00</li>
<li><strong>Dura√ß√£o:</strong> 1h</li>
<li><strong>Foco:</strong> Demo das funcionalidades, retrospectiva, planejamento</li>
</ul>
<hr>
<p><strong>üéØ Meta da Semana:</strong> APIs de autentica√ß√£o e usu√°rios funcionais, test√°veis via Swagger UI, com documenta√ß√£o completa e testes b√°sicos implementados.</p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üó∫Ô∏è Roadmap Completo - Sistema DoeSangue - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üó∫Ô∏è Roadmap Completo - Sistema DoeSangue</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-roadmap-completo-sistema-doesangue">üó∫Ô∏è Roadmap Completo - Sistema DoeSangue</h1><p><strong>Data:</strong> 27 de Agosto de 2025<br><strong>Status Atual:</strong> FASE 1 Implementada + Swagger Configurado</p>
<hr>
<h2 id="-status-atual-da-aplicao">üìä Status Atual da Aplica√ß√£o</h2><h3 id="span-classbadge-successspan-strongo-que-j-temos-fase-1strong"><span class="badge success">‚úÖ</span> <strong>O Que J√° Temos (FASE 1):</strong></h3><ul>
<li><strong>5 Entidades Originais:</strong> User, UserRole, Hemocentro, Doador, TipoSanguineo</li>
<li><strong>4 Entidades Novas:</strong> SetorAtuacao, UserSetor, DoencaEspecifica, DoadorDoenca</li>
<li><strong>Swagger/OpenAPI:</strong> Configura√ß√£o completa e profissional</li>
<li><strong>Documenta√ß√£o:</strong> Entidades e APIs documentadas</li>
<li><strong>Arquitetura:</strong> 4 agregados DDD definidos</li>
<li><strong>Base de Dados:</strong> Schema SQL completo (17 tabelas)</li>
</ul>
<h3 id="-strongo-que-falta-implementarstrong">üîÑ <strong>O Que Falta Implementar:</strong></h3><ul>
<li><strong>Controllers REST</strong> para as entidades existentes</li>
<li><strong>DTOs</strong> para entrada/sa√≠da de dados</li>
<li><strong>Services</strong> com regras de neg√≥cio</li>
<li><strong>Repositories</strong> customizados</li>
<li><strong>FASE 2 Entidades:</strong> Triagem, Agendamento, Doa√ß√£o, Estoque</li>
<li><strong>Sistema de Autentica√ß√£o JWT</strong></li>
<li><strong>Valida√ß√µes de Neg√≥cio</strong></li>
<li><strong>Testes Automatizados</strong></li>
</ul>
<hr>
<h2 id="-fase-2-implementao-de-controllers-e-apis">üéØ FASE 2: Implementa√ß√£o de Controllers e APIs</h2><h3 id="strongprioridade-1-infraestrutura-de-apis-1-2-semanasstrong"><strong>Prioridade 1: Infraestrutura de APIs (1-2 semanas)</strong></h3><h4 id="strong21-sistema-de-autenticaostrong"><strong>2.1 Sistema de Autentica√ß√£o</strong></h4><pre><code class="language-java">// Controllers a implementar:
@RestController(&quot;/api/auth&quot;)
public class AuthController {
    @PostMapping(&quot;/login&quot;)     // Login com JWT
    @PostMapping(&quot;/refresh&quot;)   // Refresh token
    @PostMapping(&quot;/logout&quot;)    // Logout
    @GetMapping(&quot;/me&quot;)         // Dados do usu√°rio logado
}
</code></pre>
<p><strong>Tarefas:</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Implementar <code>AuthController</code></li>
<li><input disabled="" type="checkbox"> Criar <code>JwtService</code> para gera√ß√£o/valida√ß√£o de tokens</li>
<li><input disabled="" type="checkbox"> Configurar Spring Security</li>
<li><input disabled="" type="checkbox"> Criar <code>AuthDTO</code> (login/response)</li>
<li><input disabled="" type="checkbox"> Implementar middleware de autentica√ß√£o</li>
</ul>
<h4 id="strong22-dtos-base-do-sistemastrong"><strong>2.2 DTOs Base do Sistema</strong></h4><pre><code class="language-java">// Criar DTOs para todas as entidades:
- UserDTO, UserCreateDTO, UserUpdateDTO
- DoadorDTO, DoadorCreateDTO, DoadorUpdateDTO  
- HemocentroDTO, SetorAtuacaoDTO
- TipoSanguineoDTO, DoencaEspecificaDTO
</code></pre>
<p><strong>Padr√£o de DTOs:</strong></p>
<ul>
<li><strong>ViewDTO:</strong> Para listagem/visualiza√ß√£o</li>
<li><strong>CreateDTO:</strong> Para cria√ß√£o (sem ID)</li>
<li><strong>UpdateDTO:</strong> Para atualiza√ß√£o (com ID)</li>
<li><strong>DetailDTO:</strong> Para detalhes completos</li>
</ul>
<h4 id="strong23-controllers-crud-bsicosstrong"><strong>2.3 Controllers CRUD B√°sicos</strong></h4><pre><code class="language-java">// Implementar controllers para entidades FASE 1:
1. UserController           (/api/users)
2. HemocentroController     (/api/hemocentros)  
3. SetorAtuacaoController   (/api/setores)
4. DoadorController         (/api/doadores)
5. TipoSanguineoController  (/api/tipos-sanguineos)
6. DoencaController         (/api/doencas)
</code></pre>
<p><strong>Padr√£o de Endpoints:</strong></p>
<ul>
<li><code>GET /api/resource</code> - Listar (paginado)</li>
<li><code>GET /api/resource/{id}</code> - Buscar por ID</li>
<li><code>POST /api/resource</code> - Criar</li>
<li><code>PUT /api/resource/{id}</code> - Atualizar</li>
<li><code>DELETE /api/resource/{id}</code> - Deletar (soft delete)</li>
</ul>
<h3 id="strongprioridade-2-services-e-regras-de-negcio-2-3-semanasstrong"><strong>Prioridade 2: Services e Regras de Neg√≥cio (2-3 semanas)</strong></h3><h4 id="strong24-services-com-validaesstrong"><strong>2.4 Services com Valida√ß√µes</strong></h4><pre><code class="language-java">@Service
public class DoadorService {
    // Regras espec√≠ficas de doadores
    public void validarIdadeMinima(LocalDate birthDate);
    public void validarCpfUnico(String cpf);
    public boolean podeDoar(Long doadorId);
    public List&lt;DoencaEspecifica&gt; obterDoencasImpedientes(Long doadorId);
}

@Service  
public class UserService {
    // Gest√£o de usu√°rios e permiss√µes
    public void validarCredenciais(String email, String senha);
    public void gerenciarSetores(Long userId, List&lt;Long&gt; setorIds);
    public boolean temPermissao(Long userId, String acao);
}
</code></pre>
<h4 id="strong25-repositories-customizadosstrong"><strong>2.5 Repositories Customizados</strong></h4><pre><code class="language-java">// Queries espec√≠ficas do neg√≥cio:
public interface DoadorRepository extends JpaRepository&lt;Doador, Long&gt; {
    List&lt;Doador&gt; findByTipoSanguineo(String tipo);
    List&lt;Doador&gt; findAptosParaDoacao();
    Page&lt;Doador&gt; findByHemocentro(Long hemocentroId, Pageable pageable);
}

public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    Optional&lt;User&gt; findByEmail(String email);
    List&lt;User&gt; findByRole(UserRole role);
    List&lt;User&gt; findBySetor(Long setorId);
}
</code></pre>
<h4 id="strong26-validaes-de-integridadestrong"><strong>2.6 Valida√ß√µes de Integridade</strong></h4><pre><code class="language-java">@Component
public class DoadorValidator {
    public void validarDadosCompletos(DoadorCreateDTO dto);
    public void validarIdadeParaDoacao(LocalDate birthDate);
    public void validarDoencasImpedientes(List&lt;Long&gt; doencaIds);
}
</code></pre>
<hr>
<h2 id="-fase-3-processo-completo-de-doao-3-4-semanas">ü©∏ FASE 3: Processo Completo de Doa√ß√£o (3-4 semanas)</h2><h3 id="strongprioridade-3-entidades-do-processo-de-doaostrong"><strong>Prioridade 3: Entidades do Processo de Doa√ß√£o</strong></h3><h4 id="strong31-implementar-entidades-fase-2strong"><strong>3.1 Implementar Entidades FASE 2</strong></h4><pre><code class="language-java">// Criar e implementar:
1. TriagemClinica    + TriagemController + TriagemService
2. Agendamento       + AgendamentoController + AgendamentoService  
3. Doacao            + DoacaoController + DoacaoService
4. EstoqueSangue     + EstoqueController + EstoqueService
</code></pre>
<h4 id="strong32-workflow-completo-de-doaostrong"><strong>3.2 Workflow Completo de Doa√ß√£o</strong></h4><pre><code class="language-java">@Service
public class ProcessoDoacaoService {
    
    // 1. Agendamento
    public AgendamentoDTO agendarDoacao(AgendamentoCreateDTO dto);
    
    // 2. Triagem Cl√≠nica  
    public TriagemDTO realizarTriagem(TriagemCreateDTO dto);
    
    // 3. Validar Aptid√£o
    public boolean validarAptidaoDoacao(Long triagemId);
    
    // 4. Registrar Doa√ß√£o
    public DoacaoDTO registrarDoacao(DoacaoCreateDTO dto);
    
    // 5. Atualizar Estoque
    public void atualizarEstoque(Long doacaoId);
}
</code></pre>
<h4 id="strong33-regras-de-negcio-crticasstrong"><strong>3.3 Regras de Neg√≥cio Cr√≠ticas</strong></h4><pre><code class="language-java">// Implementar valida√ß√µes:
- Intervalo entre doa√ß√µes (60 dias homens, 90 dias mulheres)
- Crit√©rios de triagem (peso, press√£o, hemoglobina)
- Doen√ßas que impedem doa√ß√£o
- Gest√£o inteligente de estoque
- Alertas de estoque cr√≠tico
</code></pre>
<h3 id="strongprioridade-4-sistema-de-suportestrong"><strong>Prioridade 4: Sistema de Suporte</strong></h3><h4 id="strong34-entidades-de-sistemastrong"><strong>3.4 Entidades de Sistema</strong></h4><pre><code class="language-java">// Implementar:
1. ConfiguracaoSistema   + ConfigController
2. Notificacao          + NotificacaoController  
3. LogAuditoriaLgpd     + AuditoriaController
</code></pre>
<h4 id="strong35-funcionalidades-avanadasstrong"><strong>3.5 Funcionalidades Avan√ßadas</strong></h4><pre><code class="language-java">@Service
public class NotificacaoService {
    public void alertarEstoqueCritico(String tipoSanguineo);
    public void notificarValidacaoMedica(Long doadorId);
    public void enviarLembreteAgendamento(Long agendamentoId);
}

@Service
public class AuditoriaService {
    public void registrarAcesso(String tabela, Long registroId, String finalidade);
    public List&lt;LogAuditoriaLgpd&gt; relatorioAcessoDoador(Long doadorId);
}
</code></pre>
<hr>
<h2 id="-fase-4-qualidade-e-produo-2-3-semanas">üß™ FASE 4: Qualidade e Produ√ß√£o (2-3 semanas)</h2><h3 id="strongprioridade-5-testes-e-qualidadestrong"><strong>Prioridade 5: Testes e Qualidade</strong></h3><h4 id="strong41-testes-automatizadosstrong"><strong>4.1 Testes Automatizados</strong></h4><pre><code class="language-java">// Implementar:
@SpringBootTest
public class DoadorControllerTest {
    @Test void deveCriarDoadorComSucesso();
    @Test void naoDeveCriarDoadorComCpfDuplicado();
    @Test void deveValidarIdadeMinima();
}

@DataJpaTest  
public class DoadorRepositoryTest {
    @Test void deveEncontrarDoadorPorTipoSanguineo();
    @Test void deveBuscarAptosParaDoacao();
}

@MockitoTest
public class ProcessoDoacaoServiceTest {
    @Test void deveRealizarWorkflowCompletoDoacao();
}
</code></pre>
<p><strong>Cobertura de Testes:</strong></p>
<ul>
<li><input disabled="" type="checkbox"> Unit Tests (Services, Repositories)</li>
<li><input disabled="" type="checkbox"> Integration Tests (Controllers)</li>
<li><input disabled="" type="checkbox"> E2E Tests (Workflow completo)</li>
<li><input disabled="" type="checkbox"> Performance Tests (Carga)</li>
</ul>
<h4 id="strong42-documentao-api-completastrong"><strong>4.2 Documenta√ß√£o API Completa</strong></h4><pre><code class="language-java">// Melhorar documenta√ß√£o Swagger:
- Todos os endpoints documentados
- Exemplos reais de JSON
- C√≥digos de erro espec√≠ficos  
- Schemas completos dos DTOs
</code></pre>
<h4 id="strong43-configuraes-de-produostrong"><strong>4.3 Configura√ß√µes de Produ√ß√£o</strong></h4><pre><code class="language-properties"># application-prod.properties
spring.profiles.active=prod
spring.datasource.url=${DATABASE_URL}
logging.level.com.faculdade=WARN
springdoc.swagger-ui.enabled=false  # Desabilitar em prod

# application-dev.properties  
spring.profiles.active=dev
logging.level.com.faculdade=DEBUG
springdoc.swagger-ui.enabled=true
</code></pre>
<h3 id="strongprioridade-6-segurana-e-performancestrong"><strong>Prioridade 6: Seguran√ßa e Performance</strong></h3><h4 id="strong44-segurana-avanadastrong"><strong>4.4 Seguran√ßa Avan√ßada</strong></h4><pre><code class="language-java">@Configuration
public class SecurityConfig {
    // CORS configurado
    // Rate limiting
    // Valida√ß√£o de inputs
    // Sanitiza√ß√£o de dados
    // Logs de seguran√ßa
}
</code></pre>
<h4 id="strong45-performance-e-cachestrong"><strong>4.5 Performance e Cache</strong></h4><pre><code class="language-java">@Service
public class EstoqueService {
    @Cacheable(&quot;estoque-critico&quot;)
    public List&lt;EstoqueSangue&gt; buscarEstoqueCritico();
    
    @CacheEvict(&quot;estoque-critico&quot;)  
    public void atualizarEstoque(Long estoqueId);
}
</code></pre>
<hr>
<h2 id="-fase-5-deploy-e-monitoramento-1-2-semanas">üöÄ FASE 5: Deploy e Monitoramento (1-2 semanas)</h2><h3 id="strongprioridade-7-preparao-para-produostrong"><strong>Prioridade 7: Prepara√ß√£o para Produ√ß√£o</strong></h3><h4 id="strong51-containerizaostrong"><strong>5.1 Containeriza√ß√£o</strong></h4><pre><code class="language-dockerfile"># Dockerfile
FROM openjdk:21-jdk-slim
COPY target/doesangue-backend.jar app.jar
EXPOSE 8080
ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]
</code></pre>
<h4 id="strong52-cicd-pipelinestrong"><strong>5.2 CI/CD Pipeline</strong></h4><pre><code class="language-yaml"># .github/workflows/deploy.yml
name: Deploy DoeSangue
on: push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: ./mvnw test
  deploy:
    runs-on: ubuntu-latest  
    steps:
      - run: docker build -t doesangue .
      - run: docker push $REGISTRY/doesangue
</code></pre>
<h4 id="strong53-monitoramentostrong"><strong>5.3 Monitoramento</strong></h4><pre><code class="language-java">// M√©tricas e Health Checks
@Component
public class HealthIndicator implements HealthIndicator {
    public Health health() {
        // Verificar database
        // Verificar servi√ßos externos
        // Verificar estoque cr√≠tico
    }
}
</code></pre>
<hr>
<h2 id="-cronograma-detalhado">üìÖ Cronograma Detalhado</h2><h3 id="strongsemanas-1-2-apis-basestrong"><strong>Semanas 1-2: APIs Base</strong></h3><ul>
<li><strong>Semana 1:</strong> Auth + DTOs + UserController</li>
<li><strong>Semana 2:</strong> DoadorController + HemocentroController + Swagger completo</li>
</ul>
<h3 id="strongsemanas-3-5-regras-de-negciostrong"><strong>Semanas 3-5: Regras de Neg√≥cio</strong></h3><ul>
<li><strong>Semana 3:</strong> Services + Valida√ß√µes + Repositories</li>
<li><strong>Semana 4:</strong> Controllers restantes + Testes unit√°rios</li>
<li><strong>Semana 5:</strong> Integra√ß√£o + Documenta√ß√£o</li>
</ul>
<h3 id="strongsemanas-6-9-processo-de-doaostrong"><strong>Semanas 6-9: Processo de Doa√ß√£o</strong></h3><ul>
<li><strong>Semana 6:</strong> Entidades FASE 2 (Triagem + Agendamento)</li>
<li><strong>Semana 7:</strong> Doacao + EstoqueSangue + Workflow</li>
<li><strong>Semana 8:</strong> Sistema de Suporte (Config + Notifica√ß√£o + Auditoria)</li>
<li><strong>Semana 9:</strong> Integra√ß√£o + Testes E2E</li>
</ul>
<h3 id="strongsemanas-10-12-produostrong"><strong>Semanas 10-12: Produ√ß√£o</strong></h3><ul>
<li><strong>Semana 10:</strong> Testes completos + Performance</li>
<li><strong>Semana 11:</strong> Seguran√ßa + Deploy + CI/CD  </li>
<li><strong>Semana 12:</strong> Monitoramento + Documenta√ß√£o final</li>
</ul>
<hr>
<h2 id="-entregveis-por-fase">üéØ Entreg√°veis por FASE</h2><h3 id="strongfase-2-apis-basestrong"><strong>FASE 2 (APIs Base):</strong></h3><ul>
<li><input disabled="" type="checkbox"> 6 Controllers REST funcionais</li>
<li><input disabled="" type="checkbox"> Sistema de autentica√ß√£o JWT</li>
<li><input disabled="" type="checkbox"> 15+ DTOs documentados</li>
<li><input disabled="" type="checkbox"> Swagger UI completo</li>
<li><input disabled="" type="checkbox"> Testes unit√°rios b√°sicos</li>
</ul>
<h3 id="strongfase-3-processo-doaostrong"><strong>FASE 3 (Processo Doa√ß√£o):</strong></h3><ul>
<li><input disabled="" type="checkbox"> Workflow completo de doa√ß√£o</li>
<li><input disabled="" type="checkbox"> 4 entidades novas implementadas</li>
<li><input disabled="" type="checkbox"> Sistema de notifica√ß√µes</li>
<li><input disabled="" type="checkbox"> Auditoria LGPD funcional</li>
<li><input disabled="" type="checkbox"> Dashboard de estoque</li>
</ul>
<h3 id="strongfase-4-qualidadestrong"><strong>FASE 4 (Qualidade):</strong></h3><ul>
<li><input disabled="" type="checkbox"> Cobertura de testes &gt;80%</li>
<li><input disabled="" type="checkbox"> Performance otimizada</li>
<li><input disabled="" type="checkbox"> Seguran√ßa hardened</li>
<li><input disabled="" type="checkbox"> Documenta√ß√£o completa</li>
</ul>
<h3 id="strongfase-5-produostrong"><strong>FASE 5 (Produ√ß√£o):</strong></h3><ul>
<li><input disabled="" type="checkbox"> Deploy automatizado</li>
<li><input disabled="" type="checkbox"> Monitoramento ativo</li>
<li><input disabled="" type="checkbox"> Backup configurado</li>
<li><input disabled="" type="checkbox"> Logs estruturados</li>
</ul>
<hr>
<h2 id="-riscos-e-mitigaes">üö® Riscos e Mitiga√ß√µes</h2><h3 id="strongriscos-tcnicosstrong"><strong>Riscos T√©cnicos:</strong></h3><ul>
<li><strong>Performance do Banco:</strong> Implementar √≠ndices e cache</li>
<li><strong>Seguran√ßa JWT:</strong> Configurar expira√ß√£o e refresh</li>
<li><strong>Integridade de Dados:</strong> Valida√ß√µes rigorosas + constraints</li>
</ul>
<h3 id="strongriscos-de-negciostrong"><strong>Riscos de Neg√≥cio:</strong></h3><ul>
<li><strong>Regras Complexas:</strong> Validar com especialistas m√©dicos</li>
<li><strong>LGPD Compliance:</strong> Auditoria externa das implementa√ß√µes</li>
<li><strong>Escalabilidade:</strong> Projetar para crescimento futuro</li>
</ul>
<hr>
<h2 id="-prximas-aes-imediatas">üí° Pr√≥ximas A√ß√µes Imediatas</h2><h3 id="strongesta-semana-27-ago-2-setstrong"><strong>Esta Semana (27 Ago - 2 Set):</strong></h3><ol>
<li><strong>Implementar AuthController e JWT</strong></li>
<li><strong>Criar DTOs base (User, Doador, Hemocentro)</strong></li>
<li><strong>Configurar Spring Security</strong></li>
<li><strong>Testar Swagger com endpoints reais</strong></li>
</ol>
<h3 id="strongprxima-semana-3-9-setstrong"><strong>Pr√≥xima Semana (3-9 Set):</strong></h3><ol>
<li><strong>Implementar UserController completo</strong></li>
<li><strong>Implementar DoadorController</strong>  </li>
<li><strong>Criar Services com valida√ß√µes</strong></li>
<li><strong>Testes de integra√ß√£o iniciais</strong></li>
</ol>
<hr>
<p><strong>üéØ Objetivo Final:</strong> Sistema DoeSangue completo, seguro, escal√°vel e pronto para produ√ß√£o, atendendo todos os requisitos de um hemocentro moderno com compliance LGPD total.</p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Documenta√ß√£o Swagger/OpenAPI - Sistema DoeSangue - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üìö Documenta√ß√£o Swagger/OpenAPI - Sistema DoeSangue</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-documentao-swaggeropenapi-sistema-doesangue">üìö Documenta√ß√£o Swagger/OpenAPI - Sistema DoeSangue</h1><p><strong>Vers√£o:</strong> v1.0<br><strong>Data:</strong> 27 de Agosto de 2025<br><strong>Framework:</strong> Spring Boot 3.5.5 + SpringDoc OpenAPI</p>
<hr>
<h2 id="-ndice">üìã √çndice</h2><ol>
<li><a href="#vis%C3%A3o-geral">Vis√£o Geral</a></li>
<li><a href="#configura%C3%A7%C3%A3o-atual">Configura√ß√£o Atual</a></li>
<li><a href="#como-funciona">Como Funciona</a></li>
<li><a href="#depend%C3%AAncias">Depend√™ncias</a></li>
<li><a href="#configura%C3%A7%C3%B5es-avan%C3%A7adas">Configura√ß√µes Avan√ßadas</a></li>
<li><a href="#exemplos-de-uso">Exemplos de Uso</a></li>
<li><a href="#endpoints-de-acesso">Endpoints de Acesso</a></li>
<li><a href="#boas-pr%C3%A1ticas">Boas Pr√°ticas</a></li>
</ol>
<hr>
<h2 id="-viso-geral">üéØ Vis√£o Geral</h2><p>O <strong>Swagger/OpenAPI</strong> √© uma ferramenta essencial para documenta√ß√£o autom√°tica de APIs REST. No projeto DoeSangue, utilizamos o <strong>SpringDoc OpenAPI 3</strong> para:</p>
<ul>
<li>üìñ <strong>Documenta√ß√£o Autom√°tica:</strong> Gera documenta√ß√£o interativa das APIs</li>
<li>üß™ <strong>Testes Integrados:</strong> Interface para testar endpoints diretamente</li>
<li>üìã <strong>Valida√ß√£o de Contratos:</strong> Valida requests/responses automaticamente  </li>
<li>üîÑ <strong>Sincroniza√ß√£o:</strong> Documenta√ß√£o sempre atualizada com o c√≥digo</li>
<li>üåê <strong>Padr√£o da Ind√∫stria:</strong> OpenAPI 3.0 √© o padr√£o mundial para APIs</li>
</ul>
<hr>
<h2 id="-configurao-atual">‚öôÔ∏è Configura√ß√£o Atual</h2><h3 id="strong-arquivo-codeswaggerjavacodestrong"><strong>üìÑ Arquivo: <code>Swagger.java</code></strong></h3><pre><code class="language-java">package com.faculdade.doesangue_api.swagger;

import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Info;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class Swagger {

    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
                .info(new Info()
                        .title(&quot;API Doe Sangue&quot;)
                        .version(&quot;v1&quot;)
                        .description(&quot;API para gerenciamento de doa√ß√µes de sangue&quot;));
    }
}
</code></pre>
<h3 id="strong-anlise-da-configuraostrong"><strong>üîß An√°lise da Configura√ß√£o:</strong></h3><h4 id="strongconfigurationstrong"><strong>@Configuration</strong></h4><ul>
<li><strong>O que faz:</strong> Marca a classe como configura√ß√£o Spring</li>
<li><strong>Resultado:</strong> Spring carrega automaticamente ao inicializar</li>
</ul>
<h4 id="strongbeanstrong"><strong>@Bean</strong></h4><ul>
<li><strong>O que faz:</strong> Registra o m√©todo como um bean Spring</li>
<li><strong>Resultado:</strong> OpenAPI fica dispon√≠vel para toda aplica√ß√£o</li>
</ul>
<h4 id="strongopenapiinfostrong"><strong>OpenAPI().info()</strong></h4><ul>
<li><strong>title:</strong> Nome da API exibido na documenta√ß√£o</li>
<li><strong>version:</strong> Vers√£o da API (importante para versionamento)</li>
<li><strong>description:</strong> Descri√ß√£o detalhada da API</li>
</ul>
<hr>
<h2 id="-como-funciona">üöÄ Como Funciona</h2><h3 id="strong1-processo-de-inicializaostrong"><strong>1. Processo de Inicializa√ß√£o:</strong></h3><pre><code class="language-mermaid">graph TD
    A[Spring Boot Inicia] --&gt; B[Carrega @Configuration]
    B --&gt; C[Executa @Bean customOpenAPI]
    C --&gt; D[SpringDoc Escaneia Controllers]
    D --&gt; E[Gera Documenta√ß√£o OpenAPI]
    E --&gt; F[Disponibiliza Swagger UI]
</code></pre>
<h3 id="strong2-fluxo-de-documentao-automticastrong"><strong>2. Fluxo de Documenta√ß√£o Autom√°tica:</strong></h3><ol>
<li><strong>Escaneamento:</strong> SpringDoc busca por classes anotadas com <code>@RestController</code></li>
<li><strong>An√°lise:</strong> Examina m√©todos com <code>@GetMapping</code>, <code>@PostMapping</code>, etc.</li>
<li><strong>Extra√ß√£o:</strong> Coleta informa√ß√µes de par√¢metros, responses, DTOs</li>
<li><strong>Gera√ß√£o:</strong> Cria especifica√ß√£o OpenAPI 3.0 JSON/YAML</li>
<li><strong>Interface:</strong> Renderiza Swagger UI interativa</li>
</ol>
<h3 id="strong3-auto-deteco-de-endpointsstrong"><strong>3. Auto-Detec√ß√£o de Endpoints:</strong></h3><pre><code class="language-java">@RestController
@RequestMapping(&quot;/api/doadores&quot;)
public class DoadorController {
    
    @GetMapping
    public ResponseEntity&lt;List&lt;DoadorDTO&gt;&gt; listarDoadores() {
        // SpringDoc automaticamente detecta:
        // - URL: GET /api/doadores
        // - Response: List&lt;DoadorDTO&gt;
        // - Status: 200 OK
    }
    
    @PostMapping
    public ResponseEntity&lt;DoadorDTO&gt; criarDoador(@RequestBody DoadorDTO doador) {
        // SpringDoc automaticamente detecta:
        // - URL: POST /api/doadores
        // - Request Body: DoadorDTO
        // - Response: DoadorDTO
        // - Status: 201 CREATED
    }
}
</code></pre>
<hr>
<h2 id="-dependncias">üì¶ Depend√™ncias</h2><h3 id="strongpomxml-dependncia-principalstrong"><strong>POM.XML - Depend√™ncia Principal:</strong></h3><pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;
    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;
    &lt;version&gt;2.8.9&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h3 id="strong-o-que-esta-dependncia-incluistrong"><strong>üìã O que esta depend√™ncia inclui:</strong></h3><ul>
<li><strong>SpringDoc Core:</strong> Gera√ß√£o autom√°tica da especifica√ß√£o OpenAPI</li>
<li><strong>Swagger UI:</strong> Interface web interativa para testar APIs</li>
<li><strong>Integration:</strong> Integra√ß√£o nativa com Spring Boot 3.x</li>
<li><strong>WebMVC Support:</strong> Suporte completo para Spring Web MVC</li>
</ul>
<h3 id="strong-dependncias-relacionadasstrong"><strong>üîÑ Depend√™ncias Relacionadas:</strong></h3><pre><code class="language-xml">&lt;!-- Para APIs REST --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- Para valida√ß√£o autom√°tica --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- Para HATEOAS (links na API) --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<hr>
<h2 id="-configuraes-avanadas-recomendadas">üîß Configura√ß√µes Avan√ßadas Recomendadas</h2><h3 id="strong1-configurao-completa-melhoradastrong"><strong>1. Configura√ß√£o Completa Melhorada:</strong></h3><pre><code class="language-java">package com.faculdade.doesangue_api.swagger;

import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.info.Contact;
import io.swagger.v3.oas.models.info.Info;
import io.swagger.v3.oas.models.info.License;
import io.swagger.v3.oas.models.security.SecurityRequirement;
import io.swagger.v3.oas.models.security.SecurityScheme;
import io.swagger.v3.oas.models.servers.Server;
import io.swagger.v3.oas.models.Components;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import java.util.List;

@Configuration
public class SwaggerConfig {

    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
                // Informa√ß√µes da API
                .info(new Info()
                        .title(&quot;API DoeSangue - Sistema de Gerenciamento de Doa√ß√µes&quot;)
                        .version(&quot;v1.0&quot;)
                        .description(&quot;&quot;&quot;
                            API REST para gerenciamento completo de doa√ß√µes de sangue.
                            
                            ## Funcionalidades Principais:
                            - üè• Gest√£o de Hemocentros e Usu√°rios
                            - ü©∏ Cadastro e Gest√£o de Doadores  
                            - üìÖ Sistema de Agendamentos
                            - üè• Triagem Cl√≠nica
                            - üíâ Registro de Doa√ß√µes
                            - üì¶ Controle de Estoque de Sangue
                            - üîî Sistema de Notifica√ß√µes
                            - üìã Auditoria LGPD
                            
                            ## Arquitetura:
                            - Spring Boot 3.5.5
                            - JPA/Hibernate
                            - SQL Server
                            - Security + JWT
                            &quot;&quot;&quot;)
                        .contact(new Contact()
                                .name(&quot;Equipe DoeSangue&quot;)
                                .url(&quot;https://github.com/nisze/doesangue_backend&quot;))
                        .license(new License()
                                .name(&quot;MIT License&quot;)
                                .url(&quot;https://opensource.org/licenses/MIT&quot;)))
                
                // Servidores
                .servers(List.of(
                        new Server()
                                .url(&quot;http://localhost:8080&quot;)
                                .description(&quot;Ambiente de Desenvolvimento&quot;),
                        new Server()
                                .url(&quot;https://api.doesangue.com.br&quot;)
                                .description(&quot;Ambiente de Produ√ß√£o&quot;)))
                
                // Configura√ß√£o de Seguran√ßa JWT
                .components(new Components()
                        .addSecuritySchemes(&quot;bearerAuth&quot;, new SecurityScheme()
                                .type(SecurityScheme.Type.HTTP)
                                .scheme(&quot;bearer&quot;)
                                .bearerFormat(&quot;JWT&quot;)
                                .description(&quot;Token JWT para autentica√ß√£o&quot;)))
                
                // Aplicar seguran√ßa globalmente
                .addSecurityItem(new SecurityRequirement()
                        .addList(&quot;bearerAuth&quot;));
    }
}
</code></pre>
<h3 id="strong2-configuraes-em-applicationpropertiesstrong"><strong>2. Configura√ß√µes em application.properties:</strong></h3><pre><code class="language-properties"># Configura√ß√µes SpringDoc/Swagger
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.filter=true

# Pacotes para escanear
springdoc.packages-to-scan=com.faculdade.doesangue_api.controllers

# Grupos de APIs
springdoc.group-configs[0].group=institucional
springdoc.group-configs[0].paths-to-match=/api/users/**, /api/hemocentros/**, /api/setores/**
springdoc.group-configs[1].group=doadores
springdoc.group-configs[1].paths-to-match=/api/doadores/**, /api/tipos-sanguineos/**, /api/doencas/**
springdoc.group-configs[2].group=processo-doacao
springdoc.group-configs[2].paths-to-match=/api/agendamentos/**, /api/triagens/**, /api/doacoes/**, /api/estoque/**
springdoc.group-configs[3].group=sistema
springdoc.group-configs[3].paths-to-match=/api/configs/**, /api/notificacoes/**, /api/audit/**
</code></pre>
<hr>
<h2 id="-exemplos-de-uso-em-controllers">üìñ Exemplos de Uso em Controllers</h2><h3 id="strong1-controller-bsico-com-documentaostrong"><strong>1. Controller B√°sico com Documenta√ß√£o:</strong></h3><pre><code class="language-java">@RestController
@RequestMapping(&quot;/api/doadores&quot;)
@Tag(name = &quot;Doadores&quot;, description = &quot;APIs para gest√£o de doadores de sangue&quot;)
public class DoadorController {

    @Operation(
        summary = &quot;Listar todos os doadores&quot;,
        description = &quot;Retorna lista paginada de doadores com filtros opcionais&quot;,
        tags = {&quot;Doadores&quot;}
    )
    @ApiResponses(value = {
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Lista de doadores retornada com sucesso&quot;,
                content = @Content(schema = @Schema(implementation = PageDoadorDTO.class))),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Par√¢metros inv√°lidos&quot;),
        @ApiResponse(responseCode = &quot;401&quot;, description = &quot;N√£o autorizado&quot;),
        @ApiResponse(responseCode = &quot;403&quot;, description = &quot;Acesso negado&quot;)
    })
    @GetMapping
    public ResponseEntity&lt;Page&lt;DoadorDTO&gt;&gt; listarDoadores(
            @Parameter(description = &quot;N√∫mero da p√°gina (0-based)&quot;, example = &quot;0&quot;)
            @RequestParam(defaultValue = &quot;0&quot;) int page,
            
            @Parameter(description = &quot;Tamanho da p√°gina&quot;, example = &quot;20&quot;)  
            @RequestParam(defaultValue = &quot;20&quot;) int size,
            
            @Parameter(description = &quot;Nome para filtro&quot;, example = &quot;Jo√£o&quot;)
            @RequestParam(required = false) String nome,
            
            @Parameter(description = &quot;Tipo sangu√≠neo para filtro&quot;, example = &quot;O+&quot;)
            @RequestParam(required = false) String tipoSanguineo) {
        
        // Implementa√ß√£o...
    }

    @Operation(
        summary = &quot;Criar novo doador&quot;,
        description = &quot;Cadastra um novo doador no sistema&quot;
    )
    @ApiResponses(value = {
        @ApiResponse(responseCode = &quot;201&quot;, description = &quot;Doador criado com sucesso&quot;),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;Dados inv√°lidos&quot;),
        @ApiResponse(responseCode = &quot;409&quot;, description = &quot;CPF j√° cadastrado&quot;)
    })
    @PostMapping
    public ResponseEntity&lt;DoadorDTO&gt; criarDoador(
            @io.swagger.v3.oas.annotations.parameters.RequestBody(
                description = &quot;Dados do doador a ser cadastrado&quot;,
                required = true,
                content = @Content(schema = @Schema(implementation = DoadorCreateDTO.class))
            )
            @Valid @RequestBody DoadorCreateDTO doadorDTO) {
        
        // Implementa√ß√£o...
    }
}
</code></pre>
<h3 id="strong2-dtos-documentadosstrong"><strong>2. DTOs Documentados:</strong></h3><pre><code class="language-java">@Schema(description = &quot;Dados do doador para exibi√ß√£o&quot;)
public class DoadorDTO {
    
    @Schema(description = &quot;ID √∫nico do doador&quot;, example = &quot;1&quot;, accessMode = Schema.AccessMode.READ_ONLY)
    private Long id;
    
    @Schema(description = &quot;Nome completo do doador&quot;, example = &quot;Jo√£o Silva Santos&quot;, maxLength = 100)
    private String fullName;
    
    @Schema(description = &quot;CPF do doador&quot;, example = &quot;12345678901&quot;, pattern = &quot;\\d{11}&quot;)
    private String cpf;
    
    @Schema(description = &quot;Tipo sangu√≠neo&quot;, example = &quot;O+&quot;, allowableValues = {&quot;A+&quot;, &quot;A-&quot;, &quot;B+&quot;, &quot;B-&quot;, &quot;AB+&quot;, &quot;AB-&quot;, &quot;O+&quot;, &quot;O-&quot;})
    private String tipoSanguineo;
    
    @Schema(description = &quot;Data de nascimento&quot;, example = &quot;1990-05-15&quot;)
    @JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)
    private LocalDate birthDate;
    
    @Schema(description = &quot;Se √© primeira doa√ß√£o&quot;, example = &quot;false&quot;)
    private Boolean primeiraDoacao;
    
    // Getters/Setters...
}
</code></pre>
<hr>
<h2 id="-endpoints-de-acesso">üåê Endpoints de Acesso</h2><h3 id="strong-urls-principaisstrong"><strong>üìã URLs Principais:</strong></h3><table>
<thead>
<tr>
<th><strong>Endpoint</strong></th>
<th><strong>Descri√ß√£o</strong></th>
<th><strong>URL Completa</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Swagger UI</strong></td>
<td>Interface interativa</td>
<td><code>http://localhost:8080/swagger-ui.html</code></td>
</tr>
<tr>
<td><strong>API Docs JSON</strong></td>
<td>Especifica√ß√£o OpenAPI</td>
<td><code>http://localhost:8080/api-docs</code></td>
</tr>
<tr>
<td><strong>API Docs YAML</strong></td>
<td>Especifica√ß√£o OpenAPI</td>
<td><code>http://localhost:8080/api-docs.yaml</code></td>
</tr>
</tbody></table>
<h3 id="strong-grupos-de-apis-aps-configurao-avanadastrong"><strong>üîó Grupos de APIs (ap√≥s configura√ß√£o avan√ßada):</strong></h3><table>
<thead>
<tr>
<th><strong>Grupo</strong></th>
<th><strong>Descri√ß√£o</strong></th>
<th><strong>URL</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Institucional</strong></td>
<td>Users, Hemocentros, Setores</td>
<td><code>/swagger-ui.html?configUrl=/api-docs/swagger-config#/institucional</code></td>
</tr>
<tr>
<td><strong>Doadores</strong></td>
<td>Doadores, Tipos Sangu√≠neos</td>
<td><code>/swagger-ui.html?configUrl=/api-docs/swagger-config#/doadores</code></td>
</tr>
<tr>
<td><strong>Processo Doa√ß√£o</strong></td>
<td>Agendamentos, Triagem, Doa√ß√µes</td>
<td><code>/swagger-ui.html?configUrl=/api-docs/swagger-config#/processo-doacao</code></td>
</tr>
<tr>
<td><strong>Sistema</strong></td>
<td>Configura√ß√µes, Notifica√ß√µes</td>
<td><code>/swagger-ui.html?configUrl=/api-docs/swagger-config#/sistema</code></td>
</tr>
</tbody></table>
<hr>
<h2 id="-interface-swagger-ui">üì± Interface Swagger UI</h2><h3 id="strong-funcionalidades-da-interfacestrong"><strong>üéØ Funcionalidades da Interface:</strong></h3><h4 id="strong1-navegaostrong"><strong>1. Navega√ß√£o:</strong></h4><ul>
<li><strong>Tags/Grupos:</strong> APIs organizadas por funcionalidade</li>
<li><strong>Filtro:</strong> Busca por endpoint espec√≠fico</li>
<li><strong>Expand/Collapse:</strong> Visualiza√ß√£o controlada</li>
</ul>
<h4 id="strong2-teste-de-apisstrong"><strong>2. Teste de APIs:</strong></h4><ul>
<li><strong>Try it out:</strong> Bot√£o para testar endpoints</li>
<li><strong>Par√¢metros:</strong> Formul√°rio para inserir dados</li>
<li><strong>Execute:</strong> Execu√ß√£o real da API</li>
<li><strong>Response:</strong> Visualiza√ß√£o de resposta e status</li>
</ul>
<h4 id="strong3-documentaostrong"><strong>3. Documenta√ß√£o:</strong></h4><ul>
<li><strong>Schemas:</strong> Visualiza√ß√£o de DTOs</li>
<li><strong>Examples:</strong> Exemplos de request/response</li>
<li><strong>Security:</strong> Informa√ß√µes de autentica√ß√£o</li>
</ul>
<h3 id="strong-autenticao-na-interfacestrong"><strong>üîê Autentica√ß√£o na Interface:</strong></h3><pre><code class="language-javascript">// No Swagger UI, clicar em &quot;Authorize&quot;
// Inserir token JWT no formato:
Bearer eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJkb2VzYW5ndWUiLCJzdWIiOiJhZG1pbiIsImV4cCI6MTY5MzQxMjQwMH0...
</code></pre>
<hr>
<h2 id="-boas-prticas">üéØ Boas Pr√°ticas</h2><h3 id="strongspan-classbadge-successspan-documentao-de-apisstrong"><strong><span class="badge success">‚úÖ</span> Documenta√ß√£o de APIs:</strong></h3><ol>
<li><strong>Use @Operation:</strong> Descreva cada endpoint claramente</li>
<li><strong>Defina @ApiResponses:</strong> Documente todos os status codes poss√≠veis  </li>
<li><strong>Anote @Parameter:</strong> Explique cada par√¢metro</li>
<li><strong>Schemas Completos:</strong> Use @Schema em DTOs</li>
<li><strong>Exemplos Reais:</strong> Forne√ßa exemplos pr√°ticos</li>
</ol>
<h3 id="strongspan-classbadge-successspan-organizaostrong"><strong><span class="badge success">‚úÖ</span> Organiza√ß√£o:</strong></h3><ol>
<li><strong>Tags Consistentes:</strong> Agrupe APIs logicamente</li>
<li><strong>Versionamento:</strong> Mantenha vers√µes claras</li>
<li><strong>Grupos Separados:</strong> Divida por dom√≠nio/funcionalidade</li>
<li><strong>Filtros:</strong> Configure filtros √∫teis na interface</li>
</ol>
<h3 id="strongspan-classbadge-successspan-seguranastrong"><strong><span class="badge success">‚úÖ</span> Seguran√ßa:</strong></h3><ol>
<li><strong>Documente Autentica√ß√£o:</strong> Explique como autenticar</li>
<li><strong>Schemas de Security:</strong> Configure JWT corretamente</li>
<li><strong>Ambiente Espec√≠fico:</strong> URLs diferentes por ambiente</li>
<li><strong>Sensitive Data:</strong> N√£o exponha dados sens√≠veis</li>
</ol>
<h3 id="strongspan-classbadge-successspan-performancestrong"><strong><span class="badge success">‚úÖ</span> Performance:</strong></h3><ol>
<li><strong>Lazy Loading:</strong> Configure carregamento inteligente</li>
<li><strong>Cache:</strong> Use cache para especifica√ß√£o</li>
<li><strong>Filtros de Scan:</strong> Limite escaneamento a pacotes espec√≠ficos</li>
<li><strong>Grupos Pequenos:</strong> Divida APIs grandes</li>
</ol>
<hr>
<h2 id="-status-atual-vs-recomendado">üö¶ Status Atual vs Recomendado</h2><h3 id="strongspan-classbadge-dangerspan-configurao-atual-bsicastrong"><strong><span class="badge danger">‚ùå</span> Configura√ß√£o Atual (B√°sica):</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> Swagger UI funcional</li>
<li><span class="badge success">‚úÖ</span> Informa√ß√µes b√°sicas da API</li>
<li><span class="badge danger">‚ùå</span> Sem documenta√ß√£o de seguran√ßa</li>
<li><span class="badge danger">‚ùå</span> Sem grupos organizados</li>
<li><span class="badge danger">‚ùå</span> Sem exemplos detalhados</li>
<li><span class="badge danger">‚ùå</span> Sem configura√ß√µes avan√ßadas</li>
</ul>
<h3 id="strongspan-classbadge-successspan-configurao-recomendadastrong"><strong><span class="badge success">‚úÖ</span> Configura√ß√£o Recomendada:</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> Documenta√ß√£o completa</li>
<li><span class="badge success">‚úÖ</span> Seguran√ßa JWT documentada</li>
<li><span class="badge success">‚úÖ</span> APIs organizadas em grupos</li>
<li><span class="badge success">‚úÖ</span> Exemplos pr√°ticos</li>
<li><span class="badge success">‚úÖ</span> M√∫ltiplos ambientes</li>
<li><span class="badge success">‚úÖ</span> Schemas detalhados</li>
</ul>
<hr>
<h2 id="-prximos-passos">üéØ Pr√≥ximos Passos</h2><h3 id="strong1-imediatostrong"><strong>1. Imediato:</strong></h3><ul>
<li><input disabled="" type="checkbox"> Aplicar configura√ß√£o avan√ßada do Swagger</li>
<li><input disabled="" type="checkbox"> Adicionar documenta√ß√£o de seguran√ßa JWT</li>
<li><input disabled="" type="checkbox"> Configurar grupos de APIs</li>
</ul>
<h3 id="strong2-desenvolvimento-de-controllersstrong"><strong>2. Desenvolvimento de Controllers:</strong></h3><ul>
<li><input disabled="" type="checkbox"> Criar controllers REST para cada entidade</li>
<li><input disabled="" type="checkbox"> Adicionar anota√ß√µes de documenta√ß√£o</li>
<li><input disabled="" type="checkbox"> Implementar DTOs com schemas</li>
</ul>
<h3 id="strong3-otimizaostrong"><strong>3. Otimiza√ß√£o:</strong></h3><ul>
<li><input disabled="" type="checkbox"> Configurar cache de documenta√ß√£o</li>
<li><input disabled="" type="checkbox"> Adicionar testes automatizados de APIs</li>
<li><input disabled="" type="checkbox"> Integrar com pipeline CI/CD</li>
</ul>
<hr>
<p><em>Esta documenta√ß√£o fornece uma base s√≥lida para implementa√ß√£o e evolu√ß√£o da documenta√ß√£o API do sistema DoeSangue usando Swagger/OpenAPI.</em></p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Resumo Executivo - Configura√ß√£o Swagger Implementada - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üöÄ Resumo Executivo - Configura√ß√£o Swagger Implementada</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-resumo-executivo-configurao-swagger-implementada">üöÄ Resumo Executivo - Configura√ß√£o Swagger Implementada</h1><h2 id="span-classbadge-successspan-strongo-que-foi-implementadostrong"><span class="badge success">‚úÖ</span> <strong>O Que Foi Implementado:</strong></h2><h3 id="strong1-configurao-swagger-avanada-codeswaggerjavacodestrong"><strong>1. Configura√ß√£o Swagger Avan√ßada (<code>Swagger.java</code>)</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>Documenta√ß√£o Rica:</strong> T√≠tulo, vers√£o, descri√ß√£o detalhada</li>
<li><span class="badge success">‚úÖ</span> <strong>M√∫ltiplos Ambientes:</strong> URLs para desenvolvimento e produ√ß√£o  </li>
<li><span class="badge success">‚úÖ</span> <strong>Seguran√ßa JWT:</strong> Configura√ß√£o completa para autentica√ß√£o</li>
<li><span class="badge success">‚úÖ</span> <strong>Informa√ß√µes de Contato:</strong> Equipe, email, reposit√≥rio</li>
<li><span class="badge success">‚úÖ</span> <strong>Licen√ßa:</strong> MIT License configurada</li>
</ul>
<h3 id="strong2-configuraes-avanadas-codeapplicationpropertiescodestrong"><strong>2. Configura√ß√µes Avan√ßadas (<code>application.properties</code>)</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>URLs Customizadas:</strong> <code>/swagger-ui.html</code> e <code>/api-docs</code></li>
<li><span class="badge success">‚úÖ</span> <strong>Interface Otimizada:</strong> Ordena√ß√£o, filtros, persist√™ncia de auth</li>
<li><span class="badge success">‚úÖ</span> <strong>Grupos de APIs:</strong> 5 grupos organizados por funcionalidade</li>
<li><span class="badge success">‚úÖ</span> <strong>Performance:</strong> Cache habilitado para documenta√ß√£o</li>
</ul>
<h3 id="strong3-controller-de-exemplo-codesystemcontrollerjavacodestrong"><strong>3. Controller de Exemplo (<code>SystemController.java</code>)</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>Demonstra√ß√£o Pr√°tica:</strong> 4 endpoints documentados</li>
<li><span class="badge success">‚úÖ</span> <strong>Anota√ß√µes Completas:</strong> @Operation, @ApiResponses, @Parameter</li>
<li><span class="badge success">‚úÖ</span> <strong>Exemplos Reais:</strong> JSON examples e schemas</li>
<li><span class="badge success">‚úÖ</span> <strong>Diferentes Tipos:</strong> GET, POST, com/sem autentica√ß√£o</li>
</ul>
<h3 id="strong4-documentao-completa-codeswagger-documentacaomdcodestrong"><strong>4. Documenta√ß√£o Completa (<code>SWAGGER-DOCUMENTACAO.md</code>)</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>Guia Completo:</strong> Como funciona, configura√ß√µes, exemplos</li>
<li><span class="badge success">‚úÖ</span> <strong>Boas Pr√°ticas:</strong> Padr√µes para documentar APIs</li>
<li><span class="badge success">‚úÖ</span> <strong>Troubleshooting:</strong> Solu√ß√µes para problemas comuns</li>
</ul>
<hr>
<h2 id="-strongcomo-funciona-o-swaggerstrong">üéØ <strong>Como Funciona o Swagger:</strong></h2><h3 id="strongprocesso-automticostrong"><strong>Processo Autom√°tico:</strong></h3><pre><code class="language-mermaid">graph LR
    A[Spring Boot Inicia] --&gt; B[Carrega @Configuration]
    B --&gt; C[SpringDoc Escaneia Controllers]
    C --&gt; D[Gera OpenAPI Spec]
    D --&gt; E[Renderiza Swagger UI]
</code></pre>
<ol>
<li><strong>Inicializa√ß√£o:</strong> Spring Boot carrega a configura√ß√£o <code>Swagger.java</code></li>
<li><strong>Escaneamento:</strong> SpringDoc encontra classes <code>@RestController</code> </li>
<li><strong>An√°lise:</strong> Extrai anota√ß√µes <code>@GetMapping</code>, <code>@PostMapping</code>, etc.</li>
<li><strong>Documenta√ß√£o:</strong> Gera especifica√ß√£o OpenAPI 3.0 automaticamente</li>
<li><strong>Interface:</strong> Disponibiliza Swagger UI em <code>/swagger-ui.html</code></li>
</ol>
<h3 id="strongdependncia-principalstrong"><strong>Depend√™ncia Principal:</strong></h3><pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;
    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;
    &lt;version&gt;2.8.9&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<hr>
<h2 id="-strongacesso-documentaostrong">üåê <strong>Acesso √† Documenta√ß√£o:</strong></h2><h3 id="strongurls-principaisstrong"><strong>URLs Principais:</strong></h3><ul>
<li><strong>Swagger UI:</strong> <code>http://localhost:8080/swagger-ui.html</code></li>
<li><strong>OpenAPI JSON:</strong> <code>http://localhost:8080/api-docs</code></li>
<li><strong>Health Check:</strong> <code>http://localhost:8080/api/system/health</code></li>
</ul>
<h3 id="stronggrupos-organizadosstrong"><strong>Grupos Organizados:</strong></h3><ol>
<li><strong>üîê Autentica√ß√£o</strong> - <code>/api/auth/**</code></li>
<li><strong>üè¢ Gest√£o Institucional</strong> - <code>/api/users/**</code>, <code>/api/hemocentros/**</code></li>
<li><strong>ü©∏ Gest√£o de Doadores</strong> - <code>/api/doadores/**</code>, <code>/api/tipos-sanguineos/**</code></li>
<li><strong>üìÖ Processo de Doa√ß√£o</strong> - <code>/api/agendamentos/**</code>, <code>/api/triagens/**</code></li>
<li><strong>‚öôÔ∏è Sistema de Suporte</strong> - <code>/api/configs/**</code>, <code>/api/notificacoes/**</code></li>
</ol>
<hr>
<h2 id="-strongprincipais-vantagensstrong">üí° <strong>Principais Vantagens:</strong></h2><h3 id="strongpara-desenvolvedoresstrong"><strong>Para Desenvolvedores:</strong></h3><ul>
<li>üìñ <strong>Documenta√ß√£o Autom√°tica:</strong> Sempre sincronizada com o c√≥digo</li>
<li>üß™ <strong>Testes Integrados:</strong> Interface para testar APIs diretamente</li>
<li>üìã <strong>Valida√ß√£o:</strong> Contratos de API validados automaticamente</li>
<li>üîÑ <strong>Versionamento:</strong> Controle de vers√µes da API</li>
</ul>
<h3 id="strongpara-equipestrong"><strong>Para Equipe:</strong></h3><ul>
<li>üë• <strong>Colabora√ß√£o:</strong> Documenta√ß√£o clara para todos</li>
<li>üéØ <strong>Padroniza√ß√£o:</strong> Contratos de API bem definidos</li>
<li>üöÄ <strong>Produtividade:</strong> Reduz tempo de integra√ß√£o</li>
<li>üìä <strong>Monitoramento:</strong> Visibilidade de endpoints</li>
</ul>
<h3 id="strongpara-arquiteturastrong"><strong>Para Arquitetura:</strong></h3><ul>
<li>üèóÔ∏è <strong>Design First:</strong> Documenta√ß√£o guia o desenvolvimento</li>
<li>üîó <strong>Integra√ß√£o:</strong> Facilita comunica√ß√£o entre servi√ßos</li>
<li>üìà <strong>Escalabilidade:</strong> Base s√≥lida para crescimento</li>
<li>üõ°Ô∏è <strong>Seguran√ßa:</strong> Documenta√ß√£o de autentica√ß√£o clara</li>
</ul>
<hr>
<h2 id="-strongdemonstrao-prticastrong">üéâ <strong>Demonstra√ß√£o Pr√°tica:</strong></h2><h3 id="strong1-iniciar-o-sistemastrong"><strong>1. Iniciar o Sistema:</strong></h3><pre><code class="language-bash">cd doesangue_backend
./mvnw spring-boot:run
</code></pre>
<h3 id="strong2-acessar-interfacestrong"><strong>2. Acessar Interface:</strong></h3><pre><code>http://localhost:8080/swagger-ui.html
</code></pre>
<h3 id="strong3-testar-endpoint-pblicostrong"><strong>3. Testar Endpoint P√∫blico:</strong></h3><pre><code>GET /api/system/health
</code></pre>
<h3 id="strong4-testar-com-autenticaostrong"><strong>4. Testar com Autentica√ß√£o:</strong></h3><ol>
<li>Fazer login em <code>/api/auth/login</code> (quando implementado)</li>
<li>Copiar token JWT</li>
<li>Clicar &quot;Authorize&quot; no Swagger</li>
<li>Inserir: <code>Bearer &lt;token&gt;</code></li>
<li>Testar endpoints protegidos</li>
</ol>
<hr>
<h2 id="-strongprximos-passosstrong">üìà <strong>Pr√≥ximos Passos:</strong></h2><h3 id="strongimediatostrong"><strong>Imediato:</strong></h3><ul>
<li><input disabled="" type="checkbox"> Implementar controller de autentica√ß√£o (<code>/api/auth</code>)</li>
<li><input disabled="" type="checkbox"> Criar controllers para entidades existentes</li>
<li><input disabled="" type="checkbox"> Adicionar DTOs com anota√ß√µes <code>@Schema</code></li>
</ul>
<h3 id="strongmdio-prazostrong"><strong>M√©dio Prazo:</strong></h3><ul>
<li><input disabled="" type="checkbox"> Implementar FASE 2 das entidades</li>
<li><input disabled="" type="checkbox"> Adicionar testes automatizados das APIs</li>
<li><input disabled="" type="checkbox"> Configurar profiles (dev/prod) espec√≠ficos</li>
</ul>
<h3 id="stronglongo-prazostrong"><strong>Longo Prazo:</strong></h3><ul>
<li><input disabled="" type="checkbox"> Integra√ß√£o com CI/CD</li>
<li><input disabled="" type="checkbox"> M√©tricas de uso da API</li>
<li><input disabled="" type="checkbox"> Documenta√ß√£o para consumidores externos</li>
</ul>
<hr>
<h2 id="-strongstatus-da-implementaostrong">üéØ <strong>Status da Implementa√ß√£o:</strong></h2><table>
<thead>
<tr>
<th><strong>Componente</strong></th>
<th><strong>Status</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td><span class="badge success">‚úÖ</span> <strong>Configura√ß√£o Base</strong></td>
<td>Completo</td>
<td>Swagger.java implementado</td>
</tr>
<tr>
<td><span class="badge success">‚úÖ</span> <strong>Configura√ß√µes Avan√ßadas</strong></td>
<td>Completo</td>
<td>application.properties otimizado</td>
</tr>
<tr>
<td><span class="badge success">‚úÖ</span> <strong>Interface UI</strong></td>
<td>Funcional</td>
<td>Swagger UI dispon√≠vel</td>
</tr>
<tr>
<td><span class="badge success">‚úÖ</span> <strong>Documenta√ß√£o</strong></td>
<td>Completo</td>
<td>Guias e exemplos criados</td>
</tr>
<tr>
<td><span class="badge success">‚úÖ</span> <strong>Controller Exemplo</strong></td>
<td>Implementado</td>
<td>SystemController demonstrativo</td>
</tr>
<tr>
<td>üîÑ <strong>Controllers Reais</strong></td>
<td>Pendente</td>
<td>Aguarda implementa√ß√£o das APIs</td>
</tr>
<tr>
<td>üîÑ <strong>DTOs Documentados</strong></td>
<td>Pendente</td>
<td>Aguarda cria√ß√£o dos DTOs</td>
</tr>
<tr>
<td>üîÑ <strong>Autentica√ß√£o</strong></td>
<td>Pendente</td>
<td>Aguarda implementa√ß√£o JWT</td>
</tr>
</tbody></table>
<hr>
<p><strong>üìù Conclus√£o:</strong> A infraestrutura Swagger est√° completamente configurada e pronta para uso. Quando os controllers reais forem implementados, a documenta√ß√£o ser√° gerada automaticamente, proporcionando uma experi√™ncia de desenvolvimento superior e facilitando a integra√ß√£o entre equipes.</p>
<p><strong>üéØ Benef√≠cio Principal:</strong> Documenta√ß√£o viva que evolui com o c√≥digo, eliminando a necessidade de manuten√ß√£o manual de documenta√ß√£o de APIs.</p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Tutorial Completo - JPA Specifications para Filtros Din√¢micos - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üîç Tutorial Completo - JPA Specifications para Filtros Din√¢micos</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 27/08/2025, 21:41:27 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-tutorial-completo-jpa-specifications-para-filtros-dinmicos">üîç Tutorial Completo - JPA Specifications para Filtros Din√¢micos</h1><p><strong>Finalidade:</strong> Guia pr√°tico para implementar filtros din√¢micos usando JPA Specifications<br><strong>Foco:</strong> Implementa√ß√£o do filtro <code>DoadorRequestFilterDTO</code> com Specifications<br><strong>Tecnologia:</strong> Spring Data JPA, Criteria API</p>
<h2 id="-links-rpidos-para-documentao-oficial">üîó Links R√°pidos para Documenta√ß√£o Oficial</h2><table>
<thead>
<tr>
<th><strong>Recurso</strong></th>
<th><strong>Link</strong></th>
<th><strong>Descri√ß√£o</strong></th>
</tr>
</thead>
<tbody><tr>
<td>üìñ <strong>JPA Specifications</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/specifications.html">Spring Data JPA Specs</a></td>
<td>Documenta√ß√£o oficial completa</td>
</tr>
<tr>
<td>üîß <strong>Criteria API</strong></td>
<td><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-criteria.htm">Oracle JPA Criteria</a></td>
<td>Tutorial oficial Oracle</td>
</tr>
<tr>
<td>üöÄ <strong>Spring Data JPA</strong></td>
<td><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Reference Guide</a></td>
<td>Guia completo Spring Data</td>
</tr>
<tr>
<td>üìä <strong>Hibernate Docs</strong></td>
<td><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html">User Guide</a></td>
<td>Documenta√ß√£o Hibernate</td>
</tr>
<tr>
<td>üéØ <strong>Spring Boot</strong></td>
<td><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">Reference Guide</a></td>
<td>Guia oficial Spring Boot</td>
</tr>
</tbody></table>
<p>üí° <strong>Mais links detalhados dispon√≠veis na <a href="#-documenta%C3%A7%C3%A3o-oficial-e-refer%C3%AAncias">se√ß√£o de documenta√ß√£o oficial</a> no final deste tutorial.</strong></p>
<hr>
<h2 id="-objetivo-deste-tutorial">üéØ Objetivo deste Tutorial</h2><p>Este tutorial ensina como implementar <strong>filtros din√¢micos</strong> usando <strong>JPA Specifications</strong>, permitindo consultas flex√≠veis e eficientes baseadas nos campos do <code>DoadorRequestFilterDTO</code>.</p>
<h3 id="strongspan-classbadge-successspan-o-que-voc-vai-aprenderstrong"><strong><span class="badge success">‚úÖ</span> O que voc√™ vai aprender:</strong></h3><ul>
<li>Configurar JPA Specifications no projeto</li>
<li>Criar Specifications customizadas para cada campo</li>
<li>Implementar Repository com filtros din√¢micos</li>
<li>Usar no Controller com pagina√ß√£o</li>
<li>Otimizar consultas com Criteria API</li>
</ul>
<hr>
<h2 id="-estrutura-da-implementao">üèóÔ∏è Estrutura da Implementa√ß√£o</h2><h3 id="strong-seu-dto-atualstrong"><strong>üìä Seu DTO Atual:</strong></h3><pre><code class="language-java">public record DoadorRequestFilterDTO(
    String cpf,
    String fullName,
    String email,
    String telefonePrincipal,
    String tipoSanguineo,
    String cidade,
    String estado,
    String empresa,
    String pesoKg,
    String doadorHabitual
) {}
</code></pre>
<h3 id="strong-resultado-finalstrong"><strong>üéØ Resultado Final:</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> Filtros opcionais (s√≥ aplica se n√£o for null/vazio)</li>
<li><span class="badge success">‚úÖ</span> Busca parcial para texto (LIKE)</li>
<li><span class="badge success">‚úÖ</span> Pagina√ß√£o integrada</li>
<li><span class="badge success">‚úÖ</span> Performance otimizada</li>
<li><span class="badge success">‚úÖ</span> Type safety completo</li>
</ul>
<hr>
<h2 id="-passo-1-configurao-do-repository">üìã Passo 1: Configura√ß√£o do Repository</h2><h3 id="strong-atualizar-doadorrepositorystrong"><strong>üîß Atualizar DoadorRepository</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaSpecificationExecutor.html">JpaSpecificationExecutor</a> | <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.core-concepts">JPA Repository</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.repository;

import com.faculdade.doesangue_api.entities.Doador;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.domain.Specification;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.JpaSpecificationExecutor;
import org.springframework.stereotype.Repository;

@Repository
public interface DoadorRepository extends 
    JpaRepository&lt;Doador, Long&gt;, 
    JpaSpecificationExecutor&lt;Doador&gt; {  // üëà Interface necess√°ria para Specifications
    
    // M√©todos existentes permanecem...
    
    // M√©todo opcional para busca com Specification customizada
    default Page&lt;Doador&gt; findWithFilters(Specification&lt;Doador&gt; spec, Pageable pageable) {
        return findAll(spec, pageable);
    }
}
</code></pre>
<hr>
<h2 id="-passo-2-criar-a-classe-de-specifications">üìã Passo 2: Criar a Classe de Specifications</h2><h3 id="strong-doadorspecificationsjavastrong"><strong>üî® DoadorSpecifications.java</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-data/jpa/reference/jpa/specifications.html">Specifications</a> | <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/criteria/CriteriaBuilder.html">Criteria Builder</a> | <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/criteria/Predicate.html">Predicate</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.specifications;

import com.faculdade.doesangue_api.dto.doador.DoadorRequestFilterDTO;
import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.entities.TipoSanguineo;
import jakarta.persistence.criteria.Join;
import jakarta.persistence.criteria.JoinType;
import jakarta.persistence.criteria.Predicate;
import org.springframework.data.jpa.domain.Specification;
import org.springframework.util.StringUtils;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

public class DoadorSpecifications {

    /**
     * üéØ M√©todo principal - Constr√≥i Specification baseada no FilterDTO
     */
    public static Specification&lt;Doador&gt; withFilters(DoadorRequestFilterDTO filters) {
        return (root, query, criteriaBuilder) -&gt; {
            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();

            // üìÑ Filtro por CPF (busca exata)
            if (StringUtils.hasText(filters.cpf())) {
                predicates.add(
                    criteriaBuilder.equal(
                        root.get(&quot;cpf&quot;), 
                        filters.cpf().replaceAll(&quot;[^0-9]&quot;, &quot;&quot;) // Remove formata√ß√£o
                    )
                );
            }

            // üë§ Filtro por Nome (busca parcial - LIKE)
            if (StringUtils.hasText(filters.fullName())) {
                predicates.add(
                    criteriaBuilder.like(
                        criteriaBuilder.lower(root.get(&quot;fullName&quot;)),
                        &quot;%&quot; + filters.fullName().toLowerCase() + &quot;%&quot;
                    )
                );
            }

            // üìß Filtro por Email (busca parcial)
            if (StringUtils.hasText(filters.email())) {
                predicates.add(
                    criteriaBuilder.like(
                        criteriaBuilder.lower(root.get(&quot;email&quot;)),
                        &quot;%&quot; + filters.email().toLowerCase() + &quot;%&quot;
                    )
                );
            }

            // üìû Filtro por Telefone (busca parcial)
            if (StringUtils.hasText(filters.telefonePrincipal())) {
                predicates.add(
                    criteriaBuilder.like(
                        root.get(&quot;telefonePrincipal&quot;),
                        &quot;%&quot; + filters.telefonePrincipal().replaceAll(&quot;[^0-9]&quot;, &quot;&quot;) + &quot;%&quot;
                    )
                );
            }

            // ü©∏ Filtro por Tipo Sangu√≠neo (JOIN com entidade relacionada)
            if (StringUtils.hasText(filters.tipoSanguineo())) {
                Join&lt;Doador, TipoSanguineo&gt; tipoSanguineoJoin = 
                    root.join(&quot;tipoSanguineo&quot;, JoinType.LEFT);
                
                predicates.add(
                    criteriaBuilder.like(
                        criteriaBuilder.lower(
                            criteriaBuilder.concat(
                                tipoSanguineoJoin.get(&quot;tipoAbo&quot;),
                                tipoSanguineoJoin.get(&quot;fatorRh&quot;)
                            )
                        ),
                        &quot;%&quot; + filters.tipoSanguineo().toLowerCase() + &quot;%&quot;
                    )
                );
            }

            // üèôÔ∏è Filtro por Cidade (busca parcial)
            if (StringUtils.hasText(filters.cidade())) {
                predicates.add(
                    criteriaBuilder.like(
                        criteriaBuilder.lower(root.get(&quot;cidade&quot;)),
                        &quot;%&quot; + filters.cidade().toLowerCase() + &quot;%&quot;
                    )
                );
            }

            // üó∫Ô∏è Filtro por Estado (busca exata)
            if (StringUtils.hasText(filters.estado())) {
                predicates.add(
                    criteriaBuilder.equal(
                        criteriaBuilder.upper(root.get(&quot;estado&quot;)),
                        filters.estado().toUpperCase()
                    )
                );
            }

            // üè¢ Filtro por Empresa (busca parcial)
            if (StringUtils.hasText(filters.empresa())) {
                predicates.add(
                    criteriaBuilder.like(
                        criteriaBuilder.lower(root.get(&quot;empresa&quot;)),
                        &quot;%&quot; + filters.empresa().toLowerCase() + &quot;%&quot;
                    )
                );
            }

            // ‚öñÔ∏è Filtro por Peso (range - maior ou igual)
            if (StringUtils.hasText(filters.pesoKg())) {
                try {
                    BigDecimal peso = new BigDecimal(filters.pesoKg());
                    predicates.add(
                        criteriaBuilder.greaterThanOrEqualTo(
                            root.get(&quot;pesoKg&quot;), 
                            peso
                        )
                    );
                } catch (NumberFormatException e) {
                    // Ignora se n√£o for um n√∫mero v√°lido
                }
            }

            // üîÑ Filtro por Doador Habitual (boolean)
            if (StringUtils.hasText(filters.doadorHabitual())) {
                Boolean isHabitual = Boolean.parseBoolean(filters.doadorHabitual());
                predicates.add(
                    criteriaBuilder.equal(
                        root.get(&quot;doadorHabitual&quot;), 
                        isHabitual
                    )
                );
            }

            // üö´ Sempre excluir registros deletados (soft delete)
            predicates.add(
                criteriaBuilder.isNull(root.get(&quot;deletedAt&quot;))
            );

            // &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Combina todos os predicates com AND
            return criteriaBuilder.and(predicates.toArray(new Predicate[0]));
        };
    }

    /**
     * üîç Specifications individuais para casos espec√≠ficos
     */
    
    public static Specification&lt;Doador&gt; hasCpf(String cpf) {
        return (root, query, criteriaBuilder) -&gt; 
            StringUtils.hasText(cpf) 
                ? criteriaBuilder.equal(root.get(&quot;cpf&quot;), cpf.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;))
                : criteriaBuilder.conjunction();
    }

    public static Specification&lt;Doador&gt; hasNameLike(String name) {
        return (root, query, criteriaBuilder) -&gt; 
            StringUtils.hasText(name)
                ? criteriaBuilder.like(
                    criteriaBuilder.lower(root.get(&quot;fullName&quot;)),
                    &quot;%&quot; + name.toLowerCase() + &quot;%&quot;
                )
                : criteriaBuilder.conjunction();
    }

    public static Specification&lt;Doador&gt; hasEmailLike(String email) {
        return (root, query, criteriaBuilder) -&gt; 
            StringUtils.hasText(email)
                ? criteriaBuilder.like(
                    criteriaBuilder.lower(root.get(&quot;email&quot;)),
                    &quot;%&quot; + email.toLowerCase() + &quot;%&quot;
                )
                : criteriaBuilder.conjunction();
    }

    public static Specification&lt;Doador&gt; isActive() {
        return (root, query, criteriaBuilder) -&gt; 
            criteriaBuilder.isNull(root.get(&quot;deletedAt&quot;));
    }

    public static Specification&lt;Doador&gt; inCity(String cidade) {
        return (root, query, criteriaBuilder) -&gt; 
            StringUtils.hasText(cidade)
                ? criteriaBuilder.like(
                    criteriaBuilder.lower(root.get(&quot;cidade&quot;)),
                    &quot;%&quot; + cidade.toLowerCase() + &quot;%&quot;
                )
                : criteriaBuilder.conjunction();
    }

    public static Specification&lt;Doador&gt; inState(String estado) {
        return (root, query, criteriaBuilder) -&gt; 
            StringUtils.hasText(estado)
                ? criteriaBuilder.equal(
                    criteriaBuilder.upper(root.get(&quot;estado&quot;)),
                    estado.toUpperCase()
                )
                : criteriaBuilder.conjunction();
    }
}
</code></pre>
<hr>
<h2 id="-passo-3-atualizar-o-service">üìã Passo 3: Atualizar o Service</h2><h3 id="strong-doadorservicejavastrong"><strong>üîß DoadorService.java</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction">Spring Transactions</a> | <a href="https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Page.html">Page and Pageable</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.service;

import com.faculdade.doesangue_api.dto.doador.DoadorRequestFilterDTO;
import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.repository.DoadorRepository;
import com.faculdade.doesangue_api.specifications.DoadorSpecifications;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.domain.Specification;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
@Transactional(readOnly = true)
public class DoadorService {

    private final DoadorRepository doadorRepository;

    public DoadorService(DoadorRepository doadorRepository) {
        this.doadorRepository = doadorRepository;
    }

    /**
     * üîç Busca com filtros din√¢micos usando Specifications
     * 
     * @param filters - DTO com filtros opcionais
     * @param pageable - Configura√ß√£o de pagina√ß√£o
     * @return Page&lt;Doador&gt; - Resultados paginados
     */
    public Page&lt;Doador&gt; buscarComFiltros(DoadorRequestFilterDTO filters, Pageable pageable) {
        Specification&lt;Doador&gt; spec = DoadorSpecifications.withFilters(filters);
        return doadorRepository.findAll(spec, pageable);
    }

    /**
     * üéØ Busca usando Specifications compostas (exemplo avan√ßado)
     */
    public Page&lt;Doador&gt; buscarDoadoresAtivosNaCidade(String cidade, Pageable pageable) {
        Specification&lt;Doador&gt; spec = Specification
            .where(DoadorSpecifications.isActive())
            .and(DoadorSpecifications.inCity(cidade));
            
        return doadorRepository.findAll(spec, pageable);
    }

    /**
     * üìä Exemplo de combina√ß√£o de Specifications
     */
    public Page&lt;Doador&gt; buscarDoadoresComCriterios(
            String nome, 
            String cidade, 
            String estado, 
            Pageable pageable) {
        
        Specification&lt;Doador&gt; spec = Specification
            .where(DoadorSpecifications.isActive())
            .and(DoadorSpecifications.hasNameLike(nome))
            .and(DoadorSpecifications.inCity(cidade))
            .and(DoadorSpecifications.inState(estado));
            
        return doadorRepository.findAll(spec, pageable);
    }

    // Outros m√©todos existentes...
}
</code></pre>
<hr>
<h2 id="-passo-4-atualizar-o-controller">üìã Passo 4: Atualizar o Controller</h2><h3 id="strong-doadorcontrollerjavastrong"><strong>üéÆ DoadorController.java</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc">Spring Web MVC</a> | <a href="https://springdoc.org/#migrating-from-springfox">OpenAPI Annotations</a> | <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#validation-beanvalidation">Bean Validation</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.controller;

import com.faculdade.doesangue_api.dto.doador.DoadorRequestFilterDTO;
import com.faculdade.doesangue_api.dto.doador.DoadorDTO;
import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.service.DoadorService;
import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.Parameter;
import io.swagger.v3.oas.annotations.responses.ApiResponse;
import io.swagger.v3.oas.annotations.responses.ApiResponses;
import io.swagger.v3.oas.annotations.tags.Tag;
import jakarta.validation.constraints.Max;
import jakarta.validation.constraints.Min;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;
import org.springframework.http.ResponseEntity;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping(&quot;/api/doadores&quot;)
@Tag(name = &quot;Doadores&quot;, description = &quot;API para gerenciamento de doadores de sangue&quot;)
@Validated
public class DoadorController {

    private final DoadorService doadorService;
    private final DoadorMapper doadorMapper;

    public DoadorController(DoadorService doadorService, DoadorMapper doadorMapper) {
        this.doadorService = doadorService;
        this.doadorMapper = doadorMapper;
    }

    /**
     * üîç Endpoint principal com filtros din√¢micos
     */
    @GetMapping
    @Operation(
        summary = &quot;üîç Listar doadores com filtros din√¢micos&quot;,
        description = &quot;&quot;&quot;
            Lista doadores com filtros opcionais usando JPA Specifications.
            
            **Funcionalidades:**
            - &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Todos os filtros s√£o opcionais
            - &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Busca parcial para texto (nome, email, cidade)
            - &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Busca exata para CPF e estado
            - &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Filtro por peso m√≠nimo
            - &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Pagina√ß√£o e ordena√ß√£o
            - &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Performance otimizada
            
            **Exemplos de uso:**
            - `GET /api/doadores?fullName=Jo√£o&amp;cidade=S√£o Paulo&amp;page=0&amp;size=10`
            - `GET /api/doadores?tipoSanguineo=O+&amp;doadorHabitual=true`
            - `GET /api/doadores?estado=SP&amp;pesoKg=60&amp;sort=fullName,asc`
            &quot;&quot;&quot;
    )
    @ApiResponses({
        @ApiResponse(responseCode = &quot;200&quot;, description = &quot;&lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; Lista retornada com sucesso&quot;),
        @ApiResponse(responseCode = &quot;400&quot;, description = &quot;&lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; Par√¢metros inv√°lidos&quot;)
    })
    public ResponseEntity&lt;Page&lt;DoadorDTO&gt;&gt; listarComFiltros(
            
            @Parameter(description = &quot;CPF para busca exata (apenas n√∫meros)&quot;)
            @RequestParam(required = false) String cpf,
            
            @Parameter(description = &quot;Nome completo para busca parcial&quot;)
            @RequestParam(required = false) String fullName,
            
            @Parameter(description = &quot;Email para busca parcial&quot;)
            @RequestParam(required = false) String email,
            
            @Parameter(description = &quot;Telefone para busca parcial&quot;)
            @RequestParam(required = false) String telefonePrincipal,
            
            @Parameter(description = &quot;Tipo sangu√≠neo (ex: O+, A-, AB+)&quot;)
            @RequestParam(required = false) String tipoSanguineo,
            
            @Parameter(description = &quot;Cidade para busca parcial&quot;)
            @RequestParam(required = false) String cidade,
            
            @Parameter(description = &quot;Estado (UF - 2 caracteres)&quot;)
            @RequestParam(required = false) String estado,
            
            @Parameter(description = &quot;Empresa para busca parcial&quot;)
            @RequestParam(required = false) String empresa,
            
            @Parameter(description = &quot;Peso m√≠nimo em kg&quot;)
            @RequestParam(required = false) String pesoKg,
            
            @Parameter(description = &quot;Filtrar doadores habituais (true/false)&quot;)
            @RequestParam(required = false) String doadorHabitual,
            
            @Parameter(description = &quot;N√∫mero da p√°gina (0-based)&quot;)
            @RequestParam(defaultValue = &quot;0&quot;) @Min(0) int page,
            
            @Parameter(description = &quot;Tamanho da p√°gina&quot;)
            @RequestParam(defaultValue = &quot;20&quot;) @Min(1) @Max(100) int size,
            
            @Parameter(description = &quot;Campo para ordena√ß√£o&quot;)
            @RequestParam(defaultValue = &quot;fullName&quot;) String sort,
            
            @Parameter(description = &quot;Dire√ß√£o da ordena√ß√£o (asc/desc)&quot;)
            @RequestParam(defaultValue = &quot;asc&quot;) String direction
    ) {
        
        // üìä Criar DTO de filtros
        DoadorRequestFilterDTO filters = new DoadorRequestFilterDTO(
            cpf, fullName, email, telefonePrincipal, tipoSanguineo,
            cidade, estado, empresa, pesoKg, doadorHabitual
        );
        
        // üìÑ Configurar pagina√ß√£o e ordena√ß√£o
        Sort.Direction sortDirection = &quot;desc&quot;.equalsIgnoreCase(direction) 
            ? Sort.Direction.DESC 
            : Sort.Direction.ASC;
        
        Pageable pageable = PageRequest.of(page, size, Sort.by(sortDirection, sort));
        
        // üîç Executar busca com filtros
        Page&lt;Doador&gt; doadoresPage = doadorService.buscarComFiltros(filters, pageable);
        
        // üîÑ Converter para DTO
        Page&lt;DoadorDTO&gt; doadoresDTO = doadoresPage.map(doadorMapper::toDTO);
        
        return ResponseEntity.ok(doadoresDTO);
    }

    /**
     * üéØ Endpoint espec√≠fico para busca por cidade (exemplo simples)
     */
    @GetMapping(&quot;/por-cidade/{cidade}&quot;)
    @Operation(summary = &quot;Buscar doadores ativos por cidade&quot;)
    public ResponseEntity&lt;Page&lt;DoadorDTO&gt;&gt; buscarPorCidade(
            @PathVariable String cidade,
            Pageable pageable) {
        
        Page&lt;Doador&gt; doadores = doadorService.buscarDoadoresAtivosNaCidade(cidade, pageable);
        Page&lt;DoadorDTO&gt; doadoresDTO = doadores.map(doadorMapper::toDTO);
        
        return ResponseEntity.ok(doadoresDTO);
    }

    // Outros endpoints existentes...
}
</code></pre>
<hr>
<h2 id="-passo-5-testes-e-validao">üìã Passo 5: Testes e Valida√ß√£o</h2><h3 id="strong-exemplo-de-teste-unitriostrong"><strong>üß™ Exemplo de Teste Unit√°rio</strong></h3><blockquote>
<p>üìñ <strong>Documenta√ß√£o:</strong> <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/testing.html">Spring Boot Testing</a> | <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/test-auto-configuration.html#test-auto-configuration-data-jpa">@DataJpaTest</a> | <a href="https://assertj.github.io/doc/">AssertJ</a></p>
</blockquote>
<pre><code class="language-java">package com.faculdade.doesangue_api.specifications;

import com.faculdade.doesangue_api.dto.doador.DoadorRequestFilterDTO;
import com.faculdade.doesangue_api.entities.Doador;
import com.faculdade.doesangue_api.repository.DoadorRepository;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.jpa.domain.Specification;

import static org.assertj.core.api.Assertions.assertThat;

@DataJpaTest
class DoadorSpecificationsTest {

    @Autowired
    private DoadorRepository doadorRepository;

    @Test
    void deveFilterarPorNome() {
        // Given
        DoadorRequestFilterDTO filters = new DoadorRequestFilterDTO(
            null, &quot;Jo√£o&quot;, null, null, null, null, null, null, null, null
        );
        
        // When
        Specification&lt;Doador&gt; spec = DoadorSpecifications.withFilters(filters);
        Page&lt;Doador&gt; resultado = doadorRepository.findAll(spec, PageRequest.of(0, 10));
        
        // Then
        assertThat(resultado.getContent())
            .allMatch(doador -&gt; doador.getFullName().toLowerCase().contains(&quot;jo√£o&quot;));
    }

    @Test
    void deveFilterarPorCidadeEEstado() {
        // Given
        DoadorRequestFilterDTO filters = new DoadorRequestFilterDTO(
            null, null, null, null, null, &quot;S√£o Paulo&quot;, &quot;SP&quot;, null, null, null
        );
        
        // When
        Specification&lt;Doador&gt; spec = DoadorSpecifications.withFilters(filters);
        Page&lt;Doador&gt; resultado = doadorRepository.findAll(spec, PageRequest.of(0, 10));
        
        // Then
        assertThat(resultado.getContent())
            .allMatch(doador -&gt; 
                doador.getCidade().toLowerCase().contains(&quot;s√£o paulo&quot;) &amp;&amp;
                doador.getEstado().equals(&quot;SP&quot;)
            );
    }
}
</code></pre>
<hr>
<h2 id="-uso-prtico-exemplos-de-requisies">üöÄ Uso Pr√°tico - Exemplos de Requisi√ß√µes</h2><h3 id="strong-exemplos-de-chamadas-da-apistrong"><strong>üì± Exemplos de Chamadas da API</strong></h3><pre><code class="language-bash"># 1. Buscar todos os doadores (sem filtros)
GET /api/doadores?page=0&amp;size=20

# 2. Buscar por nome
GET /api/doadores?fullName=Jo√£o Silva&amp;page=0&amp;size=10

# 3. Buscar por cidade e estado
GET /api/doadores?cidade=S√£o Paulo&amp;estado=SP

# 4. Buscar doadores habituais tipo O+
GET /api/doadores?tipoSanguineo=O+&amp;doadorHabitual=true

# 5. Buscar por peso m√≠nimo e ordenar por nome
GET /api/doadores?pesoKg=60&amp;sort=fullName&amp;direction=asc

# 6. Filtro complexo com m√∫ltiplos campos
GET /api/doadores?fullName=Maria&amp;cidade=Rio&amp;estado=RJ&amp;empresa=Hospital&amp;page=0&amp;size=5

# 7. Buscar por CPF espec√≠fico
GET /api/doadores?cpf=12345678901

# 8. Buscar por email parcial
GET /api/doadores?email=gmail.com
</code></pre>
<hr>
<h2 id="-dicas-e-boas-prticas">üí° Dicas e Boas Pr√°ticas</h2><h3 id="strongspan-classbadge-successspan-performancestrong"><strong><span class="badge success">‚úÖ</span> Performance:</strong></h3><ul>
<li>Use <code>LEFT JOIN</code> para relacionamentos opcionais</li>
<li>Evite <code>EAGER</code> loading desnecess√°rio</li>
<li>Considere √≠ndices para campos filtrados frequentemente</li>
</ul>
<h3 id="strongspan-classbadge-successspan-seguranastrong"><strong><span class="badge success">‚úÖ</span> Seguran√ßa:</strong></h3><ul>
<li>Sempre valide entrada de dados</li>
<li>Use <code>StringUtils.hasText()</code> para verificar strings</li>
<li>Limite tamanho da p√°gina (m√°ximo 100)</li>
</ul>
<h3 id="strongspan-classbadge-successspan-flexibilidadestrong"><strong><span class="badge success">‚úÖ</span> Flexibilidade:</strong></h3><ul>
<li>Specifications s√£o compos√°veis</li>
<li>Pode combinar com outros m√©todos do repository</li>
<li>Reutiliz√°vel em diferentes contextos</li>
</ul>
<h3 id="strongspan-classbadge-successspan-manutenibilidadestrong"><strong><span class="badge success">‚úÖ</span> Manutenibilidade:</strong></h3><ul>
<li>Separe Specifications por entidade</li>
<li>Use nomes descritivos para m√©todos</li>
<li>Documente comportamento de cada filtro</li>
</ul>
<hr>
<h2 id="-configuraes-opcionais">üîß Configura√ß√µes Opcionais</h2><h3 id="strong-custom-repository-avanadostrong"><strong>üìä Custom Repository (Avan√ßado)</strong></h3><pre><code class="language-java">@Repository
public interface DoadorRepository extends 
    JpaRepository&lt;Doador, Long&gt;, 
    JpaSpecificationExecutor&lt;Doador&gt;,
    DoadorRepositoryCustom {
}

interface DoadorRepositoryCustom {
    Page&lt;DoadorProjection&gt; findDoadoresProjection(
        DoadorRequestFilterDTO filters, 
        Pageable pageable
    );
}

@Component
class DoadorRepositoryImpl implements DoadorRepositoryCustom {
    
    @PersistenceContext
    private EntityManager entityManager;
    
    @Override
    public Page&lt;DoadorProjection&gt; findDoadoresProjection(
            DoadorRequestFilterDTO filters, 
            Pageable pageable) {
        
        CriteriaBuilder cb = entityManager.getCriteriaBuilder();
        CriteriaQuery&lt;DoadorProjection&gt; query = cb.createQuery(DoadorProjection.class);
        Root&lt;Doador&gt; root = query.from(Doador.class);
        
        // Proje√ß√£o customizada para melhor performance
        query.select(cb.construct(
            DoadorProjection.class,
            root.get(&quot;id&quot;),
            root.get(&quot;fullName&quot;),
            root.get(&quot;email&quot;),
            root.get(&quot;cidade&quot;)
        ));
        
        // Aplicar filtros usando Specifications
        Specification&lt;Doador&gt; spec = DoadorSpecifications.withFilters(filters);
        Predicate predicate = spec.toPredicate(root, query, cb);
        query.where(predicate);
        
        // Executar query...
        return new PageImpl&lt;&gt;(results, pageable, total);
    }
}
</code></pre>
<hr>
<h2 id="-documentao-oficial-e-referncias">üìö Documenta√ß√£o Oficial e Refer√™ncias</h2><h3 id="strong-spring-data-jpa-documentao-principalstrong"><strong>üåü Spring Data JPA - Documenta√ß√£o Principal</strong></h3><h4 id="strong-jpa-specificationsstrong"><strong>üìñ JPA Specifications:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/specifications.html">Spring Data JPA Specifications</a></strong> - Guia oficial completo</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/specifications.html#specifications.predicate">JPA Criteria API</a></strong> - Constru√ß√£o de predicados</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/specifications.html#specifications.composing">Type-safe Query Methods</a></strong> - Composi√ß√£o de Specifications</li>
</ul>
<h4 id="strong-spring-data-jpa-geralstrong"><strong>üìñ Spring Data JPA - Geral:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/">Spring Data JPA Reference</a></strong> - Documenta√ß√£o completa</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods">Query Methods</a></strong> - M√©todos de consulta</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.special-parameters">Paging and Sorting</a></strong> - Pagina√ß√£o e ordena√ß√£o</li>
<li><strong><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations">Custom Implementations</a></strong> - Implementa√ß√µes customizadas</li>
</ul>
<h3 id="strong-jpa-e-hibernate-documentao-corestrong"><strong>üîß JPA e Hibernate - Documenta√ß√£o Core</strong></h3><h4 id="strong-jpa-criteria-apistrong"><strong>üìñ JPA Criteria API:</strong></h4><ul>
<li><strong><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-criteria.htm">Oracle JPA Tutorial - Criteria API</a></strong> - Tutorial oficial Oracle</li>
<li><strong><a href="https://jakarta.ee/specifications/persistence/3.1/">JPA 3.1 Specification</a></strong> - Especifica√ß√£o oficial JPA</li>
<li><strong><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-criteria002.htm">Criteria API - Building Queries</a></strong> - Constru√ß√£o de queries</li>
</ul>
<h4 id="strong-hibernate-documentationstrong"><strong>üìñ Hibernate Documentation:</strong></h4><ul>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html">Hibernate User Guide</a></strong> - Guia completo do Hibernate</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#criteria">Criteria Queries</a></strong> - Hibernate Criteria</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#query-by-example">Query by Example</a></strong> - QBE com Hibernate</li>
</ul>
<h3 id="strong-spring-framework-basestrong"><strong>üöÄ Spring Framework - Base</strong></h3><h4 id="strong-spring-framework-corestrong"><strong>üìñ Spring Framework Core:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/">Spring Framework Reference</a></strong> - Documenta√ß√£o completa</li>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc">Data Access with JDBC</a></strong> - Acesso a dados</li>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#transaction">Transaction Management</a></strong> - Gerenciamento de transa√ß√µes</li>
</ul>
<h4 id="strong-spring-bootstrong"><strong>üìñ Spring Boot:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">Spring Boot Reference Guide</a></strong> - Guia oficial Spring Boot</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.jpa-and-spring-data">Spring Boot Data JPA</a></strong> - Configura√ß√£o JPA</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/auto-configuration.html">Auto-configuration</a></strong> - Configura√ß√£o autom√°tica</li>
</ul>
<h3 id="strong-validao-e-dtosstrong"><strong>üìä Valida√ß√£o e DTOs</strong></h3><h4 id="strong-bean-validationstrong"><strong>üìñ Bean Validation:</strong></h4><ul>
<li><strong><a href="https://jakarta.ee/specifications/bean-validation/3.0/">Jakarta Bean Validation</a></strong> - Especifica√ß√£o oficial</li>
<li><strong><a href="https://docs.jboss.org/hibernate/validator/7.0/reference/en-US/html_single/">Hibernate Validator</a></strong> - Implementa√ß√£o de refer√™ncia</li>
<li><strong><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#validation">Spring Validation</a></strong> - Valida√ß√£o no Spring</li>
</ul>
<h4 id="strong-java-records-java-14strong"><strong>üìñ Java Records (Java 14+):</strong></h4><ul>
<li><strong><a href="https://docs.oracle.com/en/java/javase/17/language/records.html">Oracle Java Records</a></strong> - Documenta√ß√£o oficial</li>
<li><strong><a href="https://openjdk.org/jeps/395">JEP 395: Records</a></strong> - Proposta de especifica√ß√£o</li>
<li><strong><a href="https://docs.oracle.com/en/java/javase/19/language/pattern-matching-switch-expressions-and-statements.html">Java Record Patterns</a></strong> - Pattern matching</li>
</ul>
<h3 id="strong-testing-e-qualidadestrong"><strong>üéØ Testing e Qualidade</strong></h3><h4 id="strong-spring-boot-testingstrong"><strong>üìñ Spring Boot Testing:</strong></h4><ul>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/testing.html">Testing in Spring Boot</a></strong> - Testes no Spring Boot</li>
<li><strong><a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/autoconfigure/orm/jpa/DataJpaTest.html">@DataJpaTest</a></strong> - Testes de JPA</li>
<li><strong><a href="https://www.testcontainers.org/modules/databases/">TestContainers</a></strong> - Testes com containers</li>
</ul>
<h4 id="strong-frameworks-de-testestrong"><strong>üìñ Frameworks de Teste:</strong></h4><ul>
<li><strong><a href="https://junit.org/junit5/docs/current/user-guide/">JUnit 5 User Guide</a></strong> - Framework de testes</li>
<li><strong><a href="https://assertj.github.io/doc/">AssertJ</a></strong> - Assertions fluentes</li>
<li><strong><a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html">Mockito</a></strong> - Framework de mocks</li>
</ul>
<h3 id="strong-performance-e-otimizaostrong"><strong>üìñ Performance e Otimiza√ß√£o</strong></h3><h4 id="strong-jpa-performancestrong"><strong>üìñ JPA Performance:</strong></h4><ul>
<li><strong><a href="https://vladmihalcea.com/jpa-hibernate-performance-tuning/">JPA Performance Tips</a></strong> - Blog Vlad Mihalcea</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#fetching-strategies">N+1 Query Problem</a></strong> - Estrat√©gias de fetch</li>
<li><strong><a href="https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#caching">Second Level Cache</a></strong> - Cache de segundo n√≠vel</li>
</ul>
<h4 id="strong-database-optimizationstrong"><strong>üìñ Database Optimization:</strong></h4><ul>
<li><strong><a href="https://docs.microsoft.com/en-us/sql/relational-databases/performance/performance-monitoring-and-tuning-tools">SQL Server Performance</a></strong> - Otimiza√ß√£o SQL Server</li>
<li><strong><a href="https://docs.microsoft.com/en-us/sql/relational-databases/indexes/indexes">Index Tuning</a></strong> - Estrat√©gias de √≠ndices</li>
<li><strong><a href="https://docs.microsoft.com/en-us/sql/relational-databases/performance/execution-plans">Query Execution Plans</a></strong> - Planos de execu√ß√£o</li>
</ul>
<h3 id="strong-ferramentas-e-idesstrong"><strong>üîß Ferramentas e IDEs</strong></h3><h4 id="strong-development-toolsstrong"><strong>üìñ Development Tools:</strong></h4><ul>
<li><strong><a href="https://www.jetbrains.com/help/idea/jpa-facet.html">IntelliJ IDEA - JPA Support</a></strong> - Suporte JPA no IntelliJ</li>
<li><strong><a href="https://www.eclipse.org/webtools/dali/">Eclipse - Dali JPA Tools</a></strong> - Ferramentas JPA no Eclipse</li>
<li><strong><a href="https://spring.io/tools">Spring Tools Suite</a></strong> - IDE especializada Spring</li>
</ul>
<h4 id="strong-database-toolsstrong"><strong>üìñ Database Tools:</strong></h4><ul>
<li><strong><a href="https://docs.microsoft.com/en-us/sql/ssms/">SQL Server Management Studio</a></strong> - SSMS oficial</li>
<li><strong><a href="https://dbeaver.io/docs/">DBeaver</a></strong> - Cliente universal de banco</li>
<li><strong><a href="https://www.pgadmin.org/docs/">pgAdmin</a></strong> - Para PostgreSQL (se aplic√°vel)</li>
</ul>
<h3 id="strong-api-design-e-documentaostrong"><strong>üì± API Design e Documenta√ß√£o</strong></h3><h4 id="strong-openapiswaggerstrong"><strong>üìñ OpenAPI/Swagger:</strong></h4><ul>
<li><strong><a href="https://swagger.io/specification/">OpenAPI Specification</a></strong> - Especifica√ß√£o oficial</li>
<li><strong><a href="https://springdoc.org/">SpringDoc OpenAPI</a></strong> - Integra√ß√£o Spring Boot</li>
<li><strong><a href="https://github.com/swagger-api/swagger-core/wiki/Swagger-2.X---Annotations">Swagger Annotations</a></strong> - Anota√ß√µes Swagger</li>
</ul>
<h4 id="strong-rest-api-best-practicesstrong"><strong>üìñ REST API Best Practices:</strong></h4><ul>
<li><strong><a href="https://restfulapi.net/">REST API Tutorial</a></strong> - Guia completo REST</li>
<li><strong><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">HTTP Status Codes</a></strong> - C√≥digos de status</li>
<li><strong><a href="https://martinfowler.com/articles/richardsonMaturityModel.html">Richardson Maturity Model</a></strong> - N√≠veis de maturidade REST</li>
</ul>
<h3 id="strong-tutoriais-e-guias-prticosstrong"><strong>üéì Tutoriais e Guias Pr√°ticos</strong></h3><h4 id="strong-spring-guidesstrong"><strong>üìñ Spring Guides:</strong></h4><ul>
<li><strong><a href="https://spring.io/guides/gs/accessing-data-jpa/">Accessing Data with JPA</a></strong> - Tutorial b√°sico</li>
<li><strong><a href="https://spring.io/guides/tutorials/rest/">Building REST services with Spring</a></strong> - Tutorial REST completo</li>
<li><strong><a href="https://spring.io/guides/gs/consuming-rest/">Consuming REST services</a></strong> - Consumindo APIs</li>
</ul>
<h4 id="strong-baeldung-tutorialsstrong"><strong>üìñ Baeldung Tutorials:</strong></h4><ul>
<li><strong><a href="https://www.baeldung.com/rest-api-search-language-spring-data-specifications">Spring Data JPA Specifications</a></strong> - Tutorial pr√°tico</li>
<li><strong><a href="https://www.baeldung.com/spring-data-jpa-query">Spring Data JPA Query</a></strong> - Queries com Spring Data</li>
<li><strong><a href="https://www.baeldung.com/hibernate-criteria-queries">JPA Criteria Queries</a></strong> - Criteria API</li>
</ul>
<h3 id="strong-blogs-e-recursos-especializadosstrong"><strong>üîç Blogs e Recursos Especializados</strong></h3><h4 id="strong-especialistas-em-jpahibernatestrong"><strong>üìñ Especialistas em JPA/Hibernate:</strong></h4><ul>
<li><strong><a href="https://vladmihalcea.com/">Vlad Mihalcea&#39;s Blog</a></strong> - Expert em JPA/Hibernate</li>
<li><strong><a href="https://thorben-janssen.com/">Thorben Janssen&#39;s Blog</a></strong> - Hibernate tips</li>
<li><strong><a href="https://www.petrikainulainen.net/">Petri Kainulainen&#39;s Blog</a></strong> - Spring Data JPA</li>
</ul>
<h4 id="strong-spring-communitystrong"><strong>üìñ Spring Community:</strong></h4><ul>
<li><strong><a href="https://spring.io/blog">Spring Blog</a></strong> - Blog oficial Spring</li>
<li><strong><a href="https://spring.academy/">Spring Academy</a></strong> - Cursos oficiais</li>
<li><strong><a href="https://spring.io/community">Spring Community</a></strong> - Comunidade Spring</li>
</ul>
<h3 id="strong-quick-reference-linksstrong"><strong>‚ö° Quick Reference Links</strong></h3><h4 id="strong-cheat-sheetsstrong"><strong>üîñ Cheat Sheets:</strong></h4><ul>
<li><strong><a href="https://www.baeldung.com/jpa-annotations">JPA Annotations Cheat Sheet</a></strong> - Anota√ß√µes JPA</li>
<li><strong><a href="https://springframework.guru/spring-data-jpa-query-derivation/">Spring Data JPA Cheat Sheet</a></strong> - Deriva√ß√£o de queries</li>
<li><strong><a href="https://www.w3schools.com/sql/">SQL Cheat Sheet</a></strong> - Refer√™ncia SQL</li>
</ul>
<h4 id="strong-github-repositoriesstrong"><strong>üîñ GitHub Repositories:</strong></h4><ul>
<li><strong><a href="https://github.com/spring-projects/spring-data-examples">Spring Data Examples</a></strong> - Exemplos oficiais</li>
<li><strong><a href="https://github.com/spring-projects/spring-boot/tree/main/spring-boot-samples">Spring Boot Samples</a></strong> - Amostras Spring Boot</li>
<li><strong><a href="https://github.com/ThomasVitale/awesome-spring">Awesome Spring</a></strong> - Recursos curados Spring</li>
</ul>
<hr>
<p>üí° <strong>Dica:</strong> Marque estes links nos seus favoritos para consulta r√°pida durante o desenvolvimento!</p>
<hr>
<h2 id="-recursos-adicionais">üìã Recursos Adicionais</h2><h3 id="strong-links-teisstrong"><strong>üìñ Links √öteis:</strong></h3><ul>
<li><a href="https://docs.spring.io/spring-data/jpa/reference/jpa/specifications.html">Spring Data JPA Specifications</a></li>
<li><a href="https://docs.oracle.com/javaee/7/tutorial/persistence-criteria.htm">Criteria API Guide</a></li>
<li><a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods">Spring Data JPA Query Methods</a></li>
</ul>
<h3 id="strong-prximos-passosstrong"><strong>üîç Pr√≥ximos Passos:</strong></h3><ol>
<li>Implementar cache para consultas frequentes</li>
<li>Adicionar m√©tricas de performance</li>
<li>Criar DSL customizada para queries complexas</li>
<li>Implementar filtros geoespaciais</li>
</ol>
<hr>
<p><em>Este tutorial fornece uma implementa√ß√£o completa e profissional de JPA Specifications para o projeto DoeSangue, garantindo filtros din√¢micos, performance otimizada e c√≥digo maint√≠vel.</em></p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>
