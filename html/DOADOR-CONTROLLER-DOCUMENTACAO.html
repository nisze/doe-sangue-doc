
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö Documenta√ß√£o Detalhada - DoadorController - DoeSangue Documentation</title>
    <style>
        /* Reset e Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px 10px 0 0;
            margin: -20px -20px 30px -20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .header .meta {
            margin-top: 15px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.5em;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 2em;
            color: #3498db;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.5em;
            color: #e74c3c;
            margin-top: 25px;
        }
        
        h4 {
            font-size: 1.3em;
            color: #f39c12;
        }
        
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* Lists */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Code */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #e74c3c;
            border: 1px solid #e9ecef;
        }
        
        pre {
            background: #2d3748;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            color: #fff;
            border: none;
            padding: 0;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        /* Blockquotes */
        blockquote {
            border-left: 4px solid #3498db;
            padding: 15px 20px;
            margin: 20px 0;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        /* Links */
        a {
            color: #3498db;
            text-decoration: none;
            border-bottom: 1px dotted #3498db;
        }
        
        a:hover {
            color: #2980b9;
            border-bottom: 1px solid #2980b9;
        }
        
        /* Badges/Tags */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 0.8em;
            margin: 2px;
        }
        
        .badge.success { background: #27ae60; }
        .badge.warning { background: #f39c12; }
        .badge.danger { background: #e74c3c; }
        .badge.info { background: #3498db; }
        
        /* Navigation */
        .nav {
            background: #2c3e50;
            padding: 15px 0;
            margin: -20px -20px 20px -20px;
            border-radius: 0 0 8px 8px;
        }
        
        .nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
            margin: 0;
        }
        
        .nav li {
            margin: 0 15px;
        }
        
        .nav a {
            color: #ecf0f1;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            transition: background 0.3s;
        }
        
        .nav a:hover {
            background: #34495e;
            border: none;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            h3 { font-size: 1.3em; }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav li {
                margin: 5px 0;
            }
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid #3498db;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ üìö Documenta√ß√£o Detalhada - DoadorController</h1>
            <div class="subtitle">Sistema DoeSangue - Documenta√ß√£o T√©cnica</div>
            <div class="meta">Gerado em 28/08/2025, 00:52:53 | Vers√£o 1.0</div>
        </div>
        
        <nav class="nav">
            <ul>
                <li><a href="../index.html">üè† In√≠cio</a></li>
                <li><a href="architecture.html">üèóÔ∏è Arquitetura</a></li>
                <li><a href="DOCUMENTACAO-ENTIDADES.html">üìä Entidades</a></li>
                <li><a href="DOADOR-CONTROLLER-DOCUMENTACAO.html">üéÆ Controller</a></li>
                <li><a href="SWAGGER-DOCUMENTACAO.html">üìñ Swagger</a></li>
                <li><a href="ROADMAP-PROXIMOS-PASSOS.html">üó∫Ô∏è Roadmap</a></li>
            </ul>
        </nav>
        
        <div class="content">
            <h1 id="-documentao-detalhada-doadorcontroller">üìö Documenta√ß√£o Detalhada - DoadorController</h1><p><strong>Data:</strong> 27 de Agosto de 2025<br><strong>Autor:</strong> Winston (Dev Agent)<br><strong>Finalidade:</strong> Estudo de caso para desenvolvimento de controllers REST</p>
<hr>
<h2 id="-objetivo-deste-controller">üéØ Objetivo deste Controller</h2><p>O <code>DoadorController</code> foi criado como um <strong>exemplo completo</strong> demonstrando as melhores pr√°ticas para desenvolvimento de APIs REST no Spring Boot com documenta√ß√£o Swagger profissional. Este controller serve como <strong>template de refer√™ncia</strong> para implementa√ß√£o de outros controllers no sistema.</p>
<hr>
<h2 id="-estrutura-do-controller">üìã Estrutura do Controller</h2><h3 id="strong-arquivos-criadosstrong"><strong>üóÇÔ∏è Arquivos Criados:</strong></h3><pre><code>src/main/java/com/faculdade/doesangue_api/
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îî‚îÄ‚îÄ DoadorController.java           # Controller principal
‚îî‚îÄ‚îÄ dtos/
    ‚îú‚îÄ‚îÄ DoadorCreateDTO.java           # DTO para cria√ß√£o
    ‚îú‚îÄ‚îÄ DoadorDTO.java                 # DTO para resposta
    ‚îî‚îÄ‚îÄ DoadorFiltroDTO.java           # DTO para filtros
</code></pre>
<h3 id="strong-estatsticas-do-cdigostrong"><strong>üìä Estat√≠sticas do C√≥digo:</strong></h3><ul>
<li><strong>700+ linhas</strong> de c√≥digo documentado</li>
<li><strong>6 endpoints</strong> REST completos</li>
<li><strong>50+ anota√ß√µes</strong> Swagger</li>
<li><strong>15+ valida√ß√µes</strong> Bean Validation</li>
<li><strong>100+ exemplos</strong> JSON</li>
<li><strong>Documenta√ß√£o multil√≠ngue</strong> (PT/EN)</li>
</ul>
<hr>
<h2 id="-funcionalidades-implementadas">üöÄ Funcionalidades Implementadas</h2><h3 id="strong1-listagem-paginada-com-filtrosstrong"><strong>1. üìã Listagem Paginada com Filtros</strong></h3><pre><code class="language-java">GET /api/doadores?page=0&amp;size=20&amp;nome=Jo√£o&amp;tipoSanguineo=O+
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Pagina√ß√£o</strong> configur√°vel (p√°gina, tamanho)</li>
<li><span class="badge success">‚úÖ</span> <strong>Ordena√ß√£o</strong> por m√∫ltiplos campos</li>
<li><span class="badge success">‚úÖ</span> <strong>Filtros avan√ßados</strong> (nome, CPF, tipo sangu√≠neo, idade, etc.)</li>
<li><span class="badge success">‚úÖ</span> <strong>Performance</strong> otimizada</li>
<li><span class="badge success">‚úÖ</span> <strong>Documenta√ß√£o completa</strong> com exemplos</li>
</ul>
<p><strong>Filtros Dispon√≠veis:</strong></p>
<ul>
<li><code>nome</code> - Busca parcial por nome</li>
<li><code>cpf</code> - CPF completo</li>
<li><code>tipoSanguineo</code> - A+, A-, B+, B-, AB+, AB-, O+, O-</li>
<li><code>gender</code> - M ou F</li>
<li><code>hemocentroId</code> - ID do hemocentro</li>
<li><code>idadeMinima/idadeMaxima</code> - Faixa et√°ria</li>
<li><code>apenasAptos</code> - Apenas doadores aptos</li>
</ul>
<h3 id="strong2-busca-por-idstrong"><strong>2. üîç Busca por ID</strong></h3><pre><code class="language-java">GET /api/doadores/{id}
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Dados completos</strong> do doador</li>
<li><span class="badge success">‚úÖ</span> <strong>CPF mascarado</strong> para seguran√ßa</li>
<li><span class="badge success">‚úÖ</span> <strong>Informa√ß√µes calculadas</strong> (idade, aptid√£o)</li>
<li><span class="badge success">‚úÖ</span> <strong>Hist√≥rico resumido</strong> de doa√ß√µes</li>
<li><span class="badge success">‚úÖ</span> <strong>Tratamento de erro 404</strong></li>
</ul>
<h3 id="strong3-cadastro-de-novo-doadorstrong"><strong>3. ‚ûï Cadastro de Novo Doador</strong></h3><pre><code class="language-java">POST /api/doadores
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Valida√ß√µes completas</strong> (20+ regras)</li>
<li><span class="badge success">‚úÖ</span> <strong>CPF √∫nico</strong> no sistema</li>
<li><span class="badge success">‚úÖ</span> <strong>Compliance LGPD</strong> obrigat√≥rio</li>
<li><span class="badge success">‚úÖ</span> <strong>Dados obrigat√≥rios</strong> validados</li>
<li><span class="badge success">‚úÖ</span> <strong>Resposta detalhada</strong> com status 201</li>
</ul>
<p><strong>Valida√ß√µes Implementadas:</strong></p>
<ul>
<li>Nome: 2-100 caracteres, obrigat√≥rio</li>
<li>CPF: exatamente 11 d√≠gitos, √∫nico</li>
<li>Email: formato v√°lido, √∫nico</li>
<li>Data nascimento: no passado, idade 16-69</li>
<li>Telefone: 10-15 d√≠gitos</li>
<li>Endere√ßo: campos obrigat√≥rios</li>
<li>Consentimento LGPD: obrigat√≥rio (true)</li>
</ul>
<h3 id="strong4-atualizao-de-dadosstrong"><strong>4. üîÑ Atualiza√ß√£o de Dados</strong></h3><pre><code class="language-java">PUT /api/doadores/{id}
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Campos atualiz√°veis</strong> definidos</li>
<li><span class="badge success">‚úÖ</span> <strong>Campos protegidos</strong> (CPF, nascimento)</li>
<li><span class="badge success">‚úÖ</span> <strong>Auditoria autom√°tica</strong> (updatedAt)</li>
<li><span class="badge success">‚úÖ</span> <strong>Valida√ß√µes mantidas</strong></li>
</ul>
<h3 id="strong5-verificao-de-aptidostrong"><strong>5. ü©∫ Verifica√ß√£o de Aptid√£o</strong></h3><pre><code class="language-java">GET /api/doadores/{id}/aptidao
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Regras m√©dicas</strong> aplicadas</li>
<li><span class="badge success">‚úÖ</span> <strong>Intervalos por g√™nero</strong> (60d M, 90d F)</li>
<li><span class="badge success">‚úÖ</span> <strong>Motivos detalhados</strong> se inapto</li>
<li><span class="badge success">‚úÖ</span> <strong>Pr√≥xima data permitida</strong></li>
<li><span class="badge success">‚úÖ</span> <strong>Recomenda√ß√µes m√©dicas</strong></li>
</ul>
<h3 id="strong6-estatsticas-detalhadasstrong"><strong>6. üìä Estat√≠sticas Detalhadas</strong></h3><pre><code class="language-java">GET /api/doadores/{id}/estatisticas
</code></pre>
<p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><span class="badge success">‚úÖ</span> <strong>Hist√≥rico completo</strong> de doa√ß√µes</li>
<li><span class="badge success">‚úÖ</span> <strong>M√©tricas calculadas</strong> (frequ√™ncia, volume)</li>
<li><span class="badge success">‚úÖ</span> <strong>Gamifica√ß√£o</strong> (status fidelidade, metas)</li>
<li><span class="badge success">‚úÖ</span> <strong>Impacto social</strong> (vidas ajudadas)</li>
</ul>
<hr>
<h2 id="-arquitetura-dos-dtos">üèóÔ∏è Arquitetura dos DTOs</h2><h3 id="strong-doadorcreatedto-para-criaostrong"><strong>üî® DoadorCreateDTO - Para Cria√ß√£o</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>20 campos</strong> com valida√ß√µes espec√≠ficas</li>
<li><strong>Anota√ß√µes Swagger</strong> detalhadas</li>
<li><strong>Exemplos pr√°ticos</strong> para cada campo</li>
<li><strong>Valida√ß√µes Bean Validation</strong></li>
<li><strong>Documenta√ß√£o dos requisitos</strong></li>
</ul>
<p><strong>Principais Valida√ß√µes:</strong></p>
<pre><code class="language-java">@NotBlank(message = &quot;Nome completo √© obrigat√≥rio&quot;)
@Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
private String fullName;

@Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;)
private String cpf;

@Email(message = &quot;Email deve ter formato v√°lido&quot;)
private String email;

@AssertTrue(message = &quot;Consentimento LGPD deve ser verdadeiro para prosseguir&quot;)
private Boolean consentimentoLgpd;
</code></pre>
<h3 id="strong-doadordto-para-respostastrong"><strong>üì§ DoadorDTO - Para Resposta</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Dados calculados</strong> (idade, aptid√£o)</li>
<li><strong>Campos mascarados</strong> (CPF para privacidade)</li>
<li><strong>Informa√ß√µes agregadas</strong> (total doa√ß√µes, √∫ltima doa√ß√£o)</li>
<li><strong>Status em tempo real</strong> (pode doar)</li>
<li><strong>Timestamps de auditoria</strong></li>
</ul>
<p><strong>Campos Especiais:</strong></p>
<pre><code class="language-java">@Schema(description = &quot;CPF mascarado para privacidade&quot;, example = &quot;123.***.***-01&quot;)
private String cpfMasked;

@Schema(description = &quot;Idade calculada&quot;, accessMode = Schema.AccessMode.READ_ONLY)
private Integer idade;

@Schema(description = &quot;Indica se pode doar no momento&quot;, accessMode = Schema.AccessMode.READ_ONLY)
private Boolean podeDoar;
</code></pre>
<h3 id="strong-doadorfiltrodto-para-filtrosstrong"><strong>üîç DoadorFiltroDTO - Para Filtros</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Filtros opcionais</strong> todos</li>
<li><strong>Ranges de valores</strong> (idade, datas)</li>
<li><strong>Flags booleanas</strong> (apenas aptos)</li>
<li><strong>Campos de localiza√ß√£o</strong> (estado, cidade)</li>
</ul>
<hr>
<h2 id="-strongpublic-recordstrong-vs-strongpublic-classstrong-para-dtos">üîç <strong>public record</strong> vs <strong>public class</strong> para DTOs</h2><h3 id="strong-public-record-moderna-e-concisa-java-14strong"><strong>üìù public record - Moderna e Concisa (Java 14+)</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Imut√°vel por padr√£o</strong> - Todos os campos s√£o <code>final</code></li>
<li><strong>C√≥digo mais limpo</strong> - Sem boilerplate de getters/setters</li>
<li><strong>Equals/hashCode autom√°tico</strong> - Implementados automaticamente</li>
<li><strong>toString() √∫til</strong> - Mostra todos os campos</li>
<li><strong>Construtor autom√°tico</strong> - Com todos os par√¢metros</li>
</ul>
<p><strong>Exemplo pr√°tico:</strong></p>
<pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de doador&quot;)
public record DoadorCreateDTO(
    @Schema(description = &quot;Nome completo&quot;, example = &quot;Jo√£o Silva&quot;)
    @NotBlank(message = &quot;Nome completo √© obrigat√≥rio&quot;)
    @Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
    String fullName,
    
    @Schema(description = &quot;CPF sem formata√ß√£o&quot;, example = &quot;12345678901&quot;)
    @Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;)
    String cpf,
    
    @Schema(description = &quot;Email para contato&quot;, example = &quot;joao.silva@email.com&quot;)
    @Email(message = &quot;Email deve ter formato v√°lido&quot;)
    String email,
    
    @Schema(description = &quot;Consentimento LGPD&quot;, example = &quot;true&quot;)
    @AssertTrue(message = &quot;Consentimento LGPD deve ser verdadeiro para prosseguir&quot;)
    Boolean consentimentoLgpd
) {}
</code></pre>
<p><strong><span class="badge success">‚úÖ</span> Vantagens:</strong></p>
<ul>
<li><strong>Menos c√≥digo</strong> - Reduz significativamente o boilerplate</li>
<li><strong>Imutabilidade</strong> - Mais seguro para transfer√™ncia de dados</li>
<li><strong>Modernidade</strong> - Padr√£o atual do Java para DTOs</li>
<li><strong>Performance</strong> - Ligeiramente mais eficiente</li>
</ul>
<h3 id="strong-public-class-tradicional-e-flexvelstrong"><strong>üèóÔ∏è public class - Tradicional e Flex√≠vel</strong></h3><p><strong>Caracter√≠sticas:</strong></p>
<ul>
<li><strong>Mut√°vel por padr√£o</strong> - Campos podem ser modificados</li>
<li><strong>C√≥digo verbose</strong> - Requer getters/setters manuais ou Lombok</li>
<li><strong>Flexibilidade total</strong> - Permite customiza√ß√£o de comportamentos</li>
<li><strong>Compatibilidade</strong> - Funciona em todas as vers√µes do Java</li>
</ul>
<p><strong>Exemplo pr√°tico:</strong></p>
<pre><code class="language-java">@Schema(description = &quot;Dados para cria√ß√£o de doador&quot;)
@Getter @Setter
@NoArgsConstructor @AllArgsConstructor
public class DoadorCreateDTO {
    
    @Schema(description = &quot;Nome completo&quot;, example = &quot;Jo√£o Silva&quot;)
    @NotBlank(message = &quot;Nome completo √© obrigat√≥rio&quot;)
    @Size(min = 2, max = 100, message = &quot;Nome deve ter entre 2 e 100 caracteres&quot;)
    private String fullName;
    
    @Schema(description = &quot;CPF sem formata√ß√£o&quot;, example = &quot;12345678901&quot;)
    @Pattern(regexp = &quot;\\d{11}&quot;, message = &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;)
    private String cpf;
    
    @Schema(description = &quot;Email para contato&quot;, example = &quot;joao.silva@email.com&quot;)
    @Email(message = &quot;Email deve ter formato v√°lido&quot;)
    private String email;
    
    @Schema(description = &quot;Consentimento LGPD&quot;, example = &quot;true&quot;)
    @AssertTrue(message = &quot;Consentimento LGPD deve ser verdadeiro para prosseguir&quot;)
    private Boolean consentimentoLgpd;
    
    // Lombok gera getters, setters, construtores
}
</code></pre>
<p><strong><span class="badge success">‚úÖ</span> Vantagens:</strong></p>
<ul>
<li><strong>Flexibilidade</strong> - Permite valida√ß√µes customizadas</li>
<li><strong>Compatibilidade</strong> - Funciona com bibliotecas mais antigas</li>
<li><strong>Lombok</strong> - Reduz boilerplate com anota√ß√µes</li>
<li><strong>Debugging</strong> - Mais f√°cil para debug em algumas IDEs</li>
</ul>
<h3 id="strong-quando-usar-cada-umstrong"><strong>üéØ Quando Usar Cada Um</strong></h3><table>
<thead>
<tr>
<th><strong>Cen√°rio</strong></th>
<th><strong>Record</strong></th>
<th><strong>Class</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>DTOs simples de transfer√™ncia</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Prefer√≠vel</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Adequado</td>
</tr>
<tr>
<td><strong>Dados imut√°veis</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Ideal</strong></td>
<td><span class="badge danger">‚ùå</span> Requer esfor√ßo extra</td>
</tr>
<tr>
<td><strong>APIs REST modernas</strong></td>
<td><span class="badge success">‚úÖ</span> <strong>Recomendado</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Tradicional</td>
</tr>
<tr>
<td><strong>Valida√ß√µes complexas</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Limitado</td>
<td><span class="badge success">‚úÖ</span> <strong>Melhor</strong></td>
</tr>
<tr>
<td><strong>Heran√ßa necess√°ria</strong></td>
<td><span class="badge danger">‚ùå</span> N√£o suporta</td>
<td><span class="badge success">‚úÖ</span> <strong>Necess√°rio</strong></td>
</tr>
<tr>
<td><strong>Java &lt; 14</strong></td>
<td><span class="badge danger">‚ùå</span> N√£o dispon√≠vel</td>
<td><span class="badge success">‚úÖ</span> <strong>√önica op√ß√£o</strong></td>
</tr>
<tr>
<td><strong>Frameworks antigos</strong></td>
<td><span class="badge warning">‚ö†Ô∏è</span> Pode ter problemas</td>
<td><span class="badge success">‚úÖ</span> <strong>Compat√≠vel</strong></td>
</tr>
</tbody></table>
<h3 id="strong-recomendao-para-o-projeto-doesanguestrong"><strong>üí° Recomenda√ß√£o para o Projeto DoeSangue</strong></h3><p><strong>Para DTOs de Entrada/Sa√≠da:</strong></p>
<pre><code class="language-java">// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; RECOMENDADO - Record para dados simples
public record DoadorCreateDTO(
    @NotBlank String fullName,
    @Pattern(regexp = &quot;\\d{11}&quot;) String cpf,
    @Email String email
) {}

// &lt;span class=&quot;badge success&quot;&gt;‚úÖ&lt;/span&gt; ALTERNATIVO - Class quando precisar de flexibilidade
@Getter @Setter
public class DoadorUpdateDTO {
    private String fullName;
    private String email;
    
    // M√©todos customizados de valida√ß√£o
    @AssertTrue
    public boolean isValidUpdate() {
        return fullName != null || email != null;
    }
}
</code></pre>
<p><strong>üìö Conclus√£o:</strong></p>
<ul>
<li><strong>Records</strong> s√£o ideais para DTOs simples e modernos</li>
<li><strong>Classes</strong> oferecem mais flexibilidade quando necess√°rio</li>
<li><strong>Ambos funcionam</strong> com Spring Boot e valida√ß√µes</li>
<li><strong>Escolha baseada</strong> na complexidade e requisitos do projeto</li>
</ul>
<hr>
<h2 id="-documentao-swagger-avanada">üìñ Documenta√ß√£o Swagger Avan√ßada</h2><h3 id="strong-recursos-utilizadosstrong"><strong>üé® Recursos Utilizados:</strong></h3><h4 id="strong1-anotaes-de-operaostrong"><strong>1. Anota√ß√µes de Opera√ß√£o</strong></h4><pre><code class="language-java">@Operation(
    summary = &quot;üìã Listar doadores com filtros avan√ßados&quot;,
    description = &quot;&quot;&quot;
        Descri√ß√£o detalhada em markdown...
        
        **Funcionalidades:**
        - Item 1
        - Item 2
        
        **Casos de Uso:**
        - Caso 1
        - Caso 2
        &quot;&quot;&quot;,
    tags = {&quot;Doadores&quot;}
)
</code></pre>
<h4 id="strong2-exemplos-json-completosstrong"><strong>2. Exemplos JSON Completos</strong></h4><pre><code class="language-java">@ExampleObject(
    name = &quot;Exemplo completo de cadastro&quot;,
    value = &quot;&quot;&quot;
        {
            &quot;fullName&quot;: &quot;Maria Oliveira Silva&quot;,
            &quot;cpf&quot;: &quot;98765432101&quot;,
            &quot;email&quot;: &quot;maria.oliveira@email.com&quot;,
            // ... JSON completo
        }
        &quot;&quot;&quot;
)
</code></pre>
<h4 id="strong3-respostas-detalhadasstrong"><strong>3. Respostas Detalhadas</strong></h4><pre><code class="language-java">@ApiResponse(
    responseCode = &quot;400&quot;, 
    description = &quot;&lt;span class=&quot;badge danger&quot;&gt;‚ùå&lt;/span&gt; Dados inv√°lidos fornecidos&quot;,
    content = @Content(
        schema = @Schema(implementation = Map.class),
        examples = @ExampleObject(
            value = &quot;&quot;&quot;
                {
                    &quot;error&quot;: &quot;Bad Request&quot;,
                    &quot;message&quot;: &quot;Dados inv√°lidos&quot;,
                    &quot;details&quot;: {
                        &quot;fullName&quot;: &quot;Nome completo √© obrigat√≥rio&quot;,
                        &quot;cpf&quot;: &quot;CPF deve conter exatamente 11 d√≠gitos num√©ricos&quot;
                    }
                }
                &quot;&quot;&quot;
        )
    )
)
</code></pre>
<h4 id="strong4-parmetros-documentadosstrong"><strong>4. Par√¢metros Documentados</strong></h4><pre><code class="language-java">@Parameter(
    description = &quot;N√∫mero da p√°gina (iniciando em 0)&quot;, 
    example = &quot;0&quot;,
    schema = @Schema(minimum = &quot;0&quot;, defaultValue = &quot;0&quot;)
)
@RequestParam(defaultValue = &quot;0&quot;) int page
</code></pre>
<h3 id="strong-benefcios-da-documentaostrong"><strong>üéØ Benef√≠cios da Documenta√ß√£o:</strong></h3><ol>
<li><strong>Auto-explicativa</strong> - Desenvolvedores entendem sem explica√ß√£o</li>
<li><strong>Test√°vel</strong> - Todos os endpoints test√°veis via Swagger UI</li>
<li><strong>Exemplos reais</strong> - JSON examples que funcionam</li>
<li><strong>Tratamento de erros</strong> - Todos os c√≥digos HTTP documentados</li>
<li><strong>Valida√ß√µes claras</strong> - Regras expl√≠citas para cada campo</li>
</ol>
<hr>
<h2 id="-como-testar-o-controller">üß™ Como Testar o Controller</h2><h3 id="strong1-iniciar-a-aplicaostrong"><strong>1. Iniciar a Aplica√ß√£o</strong></h3><pre><code class="language-bash">cd doesangue_backend
./mvnw spring-boot:run
</code></pre>
<h3 id="strong2-acessar-swagger-uistrong"><strong>2. Acessar Swagger UI</strong></h3><pre><code>http://localhost:8080/swagger-ui.html
</code></pre>
<h3 id="strong3-testar-endpointsstrong"><strong>3. Testar Endpoints</strong></h3><h4 id="stronglistar-doadoresstrong"><strong>Listar Doadores:</strong></h4><pre><code>GET /api/doadores?page=0&amp;size=5&amp;nome=Jo√£o
</code></pre>
<h4 id="strongbuscar-por-idstrong"><strong>Buscar por ID:</strong></h4><pre><code>GET /api/doadores/1
</code></pre>
<h4 id="strongcadastrar-doadorstrong"><strong>Cadastrar Doador:</strong></h4><pre><code>POST /api/doadores
{
    &quot;fullName&quot;: &quot;Novo Doador Teste&quot;,
    &quot;cpf&quot;: &quot;99999999999&quot;,
    &quot;email&quot;: &quot;teste@email.com&quot;,
    &quot;birthDate&quot;: &quot;1990-01-01&quot;,
    &quot;gender&quot;: &quot;M&quot;,
    &quot;telefonePrincipal&quot;: &quot;11999999999&quot;,
    &quot;logradouro&quot;: &quot;Rua Teste&quot;,
    &quot;numero&quot;: &quot;123&quot;,
    &quot;cidade&quot;: &quot;S√£o Paulo&quot;,
    &quot;estado&quot;: &quot;SP&quot;,
    &quot;cep&quot;: &quot;01234567&quot;,
    &quot;tipoSanguineoId&quot;: 1,
    &quot;hemocentroId&quot;: 1,
    &quot;cadastradoPorId&quot;: 1,
    &quot;consentimentoLgpd&quot;: true
}
</code></pre>
<h4 id="strongverificar-aptidostrong"><strong>Verificar Aptid√£o:</strong></h4><pre><code>GET /api/doadores/1/aptidao
</code></pre>
<h3 id="strong4-testar-validaesstrong"><strong>4. Testar Valida√ß√µes</strong></h3><h4 id="strongcpf-duplicadostrong"><strong>CPF Duplicado:</strong></h4><pre><code>POST /api/doadores
{
    &quot;cpf&quot;: &quot;12345678901&quot;,  // CPF que j√° existe
    // outros campos...
}
</code></pre>
<p><strong>Resultado esperado:</strong> 409 Conflict</p>
<h4 id="strongdados-invlidosstrong"><strong>Dados Inv√°lidos:</strong></h4><pre><code>POST /api/doadores
{
    &quot;fullName&quot;: &quot;&quot;,           // Nome vazio
    &quot;cpf&quot;: &quot;123&quot;,            // CPF inv√°lido
    &quot;email&quot;: &quot;email-inv√°lido&quot;, // Email inv√°lido
    &quot;consentimentoLgpd&quot;: false // LGPD n√£o aceito
}
</code></pre>
<p><strong>Resultado esperado:</strong> 400 Bad Request com detalhes</p>
<hr>
<h2 id="-conceitos-demonstrados">üéì Conceitos Demonstrados</h2><h3 id="strong1-spring-boot-spring-webstrong"><strong>1. Spring Boot / Spring Web</strong></h3><ul>
<li><code>@RestController</code> - Marca classe como controller REST</li>
<li><code>@RequestMapping</code> - Define base path da API</li>
<li><code>@GetMapping/@PostMapping/@PutMapping</code> - Mapeia HTTP methods</li>
<li><code>@PathVariable</code> - Captura vari√°veis da URL</li>
<li><code>@RequestParam</code> - Captura query parameters</li>
<li><code>@RequestBody</code> - Mapeia body do request para objeto</li>
<li><code>@Valid</code> - Ativa valida√ß√µes Bean Validation</li>
</ul>
<h3 id="strong2-bean-validationstrong"><strong>2. Bean Validation</strong></h3><ul>
<li><code>@NotNull/@NotBlank</code> - Valida√ß√µes de nulidade</li>
<li><code>@Size</code> - Valida√ß√£o de tamanho</li>
<li><code>@Pattern</code> - Valida√ß√£o com regex</li>
<li><code>@Email</code> - Valida√ß√£o de formato de email</li>
<li><code>@Past</code> - Data deve ser no passado</li>
<li><code>@Positive</code> - N√∫mero deve ser positivo</li>
<li><code>@AssertTrue</code> - Booleano deve ser verdadeiro</li>
</ul>
<h3 id="strong3-swaggeropenapi-3strong"><strong>3. Swagger/OpenAPI 3</strong></h3><ul>
<li><code>@Tag</code> - Agrupa endpoints por categoria</li>
<li><code>@Operation</code> - Documenta opera√ß√£o</li>
<li><code>@ApiResponse/@ApiResponses</code> - Documenta respostas</li>
<li><code>@Parameter</code> - Documenta par√¢metros</li>
<li><code>@Schema</code> - Documenta estrutura de dados</li>
<li><code>@ExampleObject</code> - Fornece exemplos</li>
<li><code>@SecurityRequirement</code> - Define requisitos de seguran√ßa</li>
</ul>
<h3 id="strong4-dtos-data-transfer-objectsstrong"><strong>4. DTOs (Data Transfer Objects)</strong></h3><ul>
<li><strong>Separa√ß√£o de responsabilidades</strong> - DTOs diferentes para diferentes opera√ß√µes</li>
<li><strong>Valida√ß√µes espec√≠ficas</strong> - Cada DTO com suas valida√ß√µes</li>
<li><strong>Documenta√ß√£o integrada</strong> - Schema documentado no DTO</li>
<li><strong>Transforma√ß√£o de dados</strong> - Entre entity e DTO</li>
</ul>
<h3 id="strong5-paginaostrong"><strong>5. Pagina√ß√£o</strong></h3><ul>
<li><code>Page&lt;T&gt;</code> - Interface padr√£o Spring Data</li>
<li><code>PageRequest</code> - Requisi√ß√£o de p√°gina</li>
<li><code>PageImpl</code> - Implementa√ß√£o de p√°gina</li>
<li>Query parameters padr√£o (page, size, sort)</li>
</ul>
<h3 id="strong6-tratamento-de-errosstrong"><strong>6. Tratamento de Erros</strong></h3><ul>
<li>Status HTTP apropriados (200, 201, 400, 404, 409)</li>
<li>Respostas estruturadas para erros</li>
<li>Mensagens descritivas</li>
<li>Detalhes de valida√ß√£o</li>
</ul>
<hr>
<h2 id="-prximos-passos">üéØ Pr√≥ximos Passos</h2><h3 id="strongpara-este-controllerstrong"><strong>Para Este Controller:</strong></h3><ol>
<li><strong>Implementar Service layer</strong> - DoadorService com regras de neg√≥cio</li>
<li><strong>Implementar Repository</strong> - DoadorRepository com queries customizadas</li>
<li><strong>Integrar com entidades JPA</strong> - Mapear para Doador entity</li>
<li><strong>Adicionar testes</strong> - Unit e integration tests</li>
<li><strong>Implementar seguran√ßa</strong> - JWT authentication</li>
</ol>
<h3 id="strongpara-outros-controllersstrong"><strong>Para Outros Controllers:</strong></h3><ol>
<li><strong>UserController</strong> - Gest√£o de usu√°rios</li>
<li><strong>HemocentroController</strong> - Gest√£o de hemocentros</li>
<li><strong>AuthController</strong> - Autentica√ß√£o JWT</li>
<li><strong>TriagemController</strong> - Triagem cl√≠nica</li>
<li><strong>AgendamentoController</strong> - Agendamentos</li>
</ol>
<h3 id="strongmelhorias-arquiteturaisstrong"><strong>Melhorias Arquiteturais:</strong></h3><ol>
<li><strong>Exception Handler global</strong> - Tratamento centralizado de erros</li>
<li><strong>Audit logs</strong> - Auditoria autom√°tica de opera√ß√µes</li>
<li><strong>Cache</strong> - Cache para consultas frequentes</li>
<li><strong>Metrics</strong> - M√©tricas de performance</li>
<li><strong>Rate limiting</strong> - Controle de taxa de requisi√ß√µes</li>
</ol>
<hr>
<h2 id="-recursos-de-aprendizado">üìö Recursos de Aprendizado</h2><h3 id="strongconceitos-aplicadosstrong"><strong>Conceitos Aplicados:</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>REST API Design</strong> - Padr√µes RESTful</li>
<li><span class="badge success">‚úÖ</span> <strong>OpenAPI 3.0</strong> - Documenta√ß√£o autom√°tica</li>
<li><span class="badge success">‚úÖ</span> <strong>Bean Validation</strong> - Valida√ß√µes declarativas</li>
<li><span class="badge success">‚úÖ</span> <strong>DTO Pattern</strong> - Transfer√™ncia de dados</li>
<li><span class="badge success">‚úÖ</span> <strong>Pagina√ß√£o</strong> - Listagens eficientes</li>
<li><span class="badge success">‚úÖ</span> <strong>Error Handling</strong> - Tratamento de erros</li>
<li><span class="badge success">‚úÖ</span> <strong>Security</strong> - Autentica√ß√£o JWT</li>
<li><span class="badge success">‚úÖ</span> <strong>Documentation</strong> - C√≥digo autodocumentado</li>
</ul>
<h3 id="strongboas-prticas-demonstradasstrong"><strong>Boas Pr√°ticas Demonstradas:</strong></h3><ul>
<li><span class="badge success">‚úÖ</span> <strong>Single Responsibility</strong> - Cada m√©todo uma responsabilidade</li>
<li><span class="badge success">‚úÖ</span> <strong>Separation of Concerns</strong> - DTOs separados por fun√ß√£o</li>
<li><span class="badge success">‚úÖ</span> <strong>DRY Principle</strong> - Reutiliza√ß√£o de valida√ß√µes</li>
<li><span class="badge success">‚úÖ</span> <strong>Clean Code</strong> - C√≥digo leg√≠vel e bem estruturado</li>
<li><span class="badge success">‚úÖ</span> <strong>API First</strong> - Documenta√ß√£o guiando implementa√ß√£o</li>
<li><span class="badge success">‚úÖ</span> <strong>Security by Design</strong> - Seguran√ßa desde o in√≠cio</li>
</ul>
<hr>
<p><strong>üéØ Conclus√£o:</strong> Este controller serve como um <strong>template completo</strong> para desenvolvimento de APIs REST profissionais no Spring Boot, demonstrando desde valida√ß√µes b√°sicas at√© documenta√ß√£o avan√ßada e tratamento de erros. √â um exemplo pr√°tico de como implementar APIs de qualidade industrial.</p>
<p><strong>üìà Valor para Aprendizado:</strong> Estudar este c√≥digo fornece uma base s√≥lida para desenvolvimento de APIs REST modernas, com foco em qualidade, documenta√ß√£o e manutenibilidade.</p>

        </div>
        
        <div class="footer">
            <p>üìã Documenta√ß√£o gerada automaticamente | üéØ Projeto DoeSangue</p>
            <p>üíª Desenvolvido com ‚ù§Ô∏è pela equipe de desenvolvimento</p>
        </div>
    </div>
</body>
</html>
